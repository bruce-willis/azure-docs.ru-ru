---
title: Руководство. Доступ к большим двоичным объектам хранилища с помощью личного домена Azure CDN по протоколу HTTPS | Документация Майкрософт
description: ''
services: cdn
documentationcenter: ''
author: dksimpson
manager: cfowler
editor: ''
ms.assetid: ''
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: tutorial
ms.date: 06/15/2018
ms.author: v-deasim
ms.custom: mvc
ms.openlocfilehash: a1a86f28c9650c86df7c333ca52d772a09597efd
ms.sourcegitcommit: cc4fdd6f0f12b44c244abc7f6bc4b181a2d05302
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2018
ms.locfileid: "47091067"
---
# <a name="tutorial-access-storage-blobs-using-an-azure-cdn-custom-domain-over-https"></a>Руководство. Доступ к большим двоичным объектам хранилища с помощью личного домена Azure CDN по протоколу HTTPS

Интегрировав учетную запись хранения Azure с сетью доставки содержимого Azure (Azure CDN), можно добавить личный домен и включить на нем протокол HTTPS для пользовательской конечной точки хранилища BLOB-объектов. 

## <a name="prerequisites"></a>Предварительные требования

Перед выполнением инструкций в этом руководстве необходимо интегрировать учетную запись хранения Azure с Azure CDN. Дополнительные сведения см. в статье [Краткое руководство по интеграции учетной записи хранения Azure с Azure CDN](cdn-create-a-storage-account-with-cdn.md).

## <a name="add-a-custom-domain"></a>Добавление личного домена
После создания конечной точки CDN в вашем профиле имя конечной точки, которое является поддоменом azureedge.net, добавляется в URL-адрес для доставки содержимого CDN по умолчанию. Можно также связать личный домен с конечной точкой CDN. Эта возможность позволяет доставлять содержимое с личным доменом в URL-адресе, а не именем конечной точки. Чтобы добавить личный домен для конечной точки, следуйте инструкциям в этом руководстве: [Руководство. Добавление личного домена к конечной точке CDN Azure](cdn-map-content-to-custom-domain.md).

## <a name="configure-https"></a>Настройка протокола HTTPS
С помощью протокола HTTPS в личном домене обеспечивается безопасная доставка данных через Интернет. Для этого применяется шифрование TLS/SSL. При подключении веб-браузера к веб-сайту через HTTPS, он выполняет проверку сертификата безопасности веб-сайта и подтверждает, что он выдан законным центром сертификации. Чтобы настроить протокол HTTPS в личном домене, следуйте инструкциям в этом руководстве: [Руководство по настройке протокола HTTPS для личного домена в сети доставки содержимого Azure](cdn-custom-ssl.md).

## <a name="shared-access-signatures"></a>Подписи коллективного доступа
Если для конечной точки хранилища BLOB-объектов настроен запрет анонимного доступа для чтения, следует предоставить токен [подписанного URL-адреса (SAS)](cdn-sas-storage-support.md) в каждом запросе к личному домену. По умолчанию конечные точки хранилища BLOB-объектов запрещают анонимный доступ для чтения. Дополнительные сведения о SAS см. в статье [Управление анонимным доступом на чтение к контейнерам и большим двоичным объектам](../storage/blobs/storage-manage-access-to-resources.md).

Azure CDN игнорирует ограничения, добавленные в токен SAS. Например, все токены SAS имеют срок действия. Это значит, что к содержимому все еще можно будет обращаться с помощью SAS с истекшим сроком действия, пока это содержимое не будет удалено с серверов точек подключения (POP) CDN. Вы можете контролировать срок хранения данных в кэше Azure CDN, задавая заголовок ответа кэша. Дополнительные сведения см. в разделе [Управление сроком действия хранилища BLOB-объектов Azure в Azure CDN](cdn-manage-expiration-of-blob-content.md).

При создании нескольких подписанных URL-адресов для одной и той же конечной точки BLOB-объектов рекомендуется включить кэширование строк запросов. Это гарантирует, что каждый URL-адрес будет рассматриваться как уникальная сущность. Дополнительные сведения см. в статье [Управление режимом кэширования Azure CDN с помощью строк запросов (ценовая категория "Стандартный")](cdn-query-string.md).

## <a name="http-to-https-redirection"></a>Перенаправление из HTTP в HTTPS
Можно выбрать перенаправление трафика HTTP в HTTPS, создав [правило перенаправления URL-адресов](cdn-rules-engine-reference-features.md#url-redirect) с помощью [обработчика правил Azure CDN](cdn-rules-engine.md). Для использования этого параметра нужен профиль **Azure CDN уровня "Премиум" от Verizon**. 

![Правило перенаправления URL-адресов](./media/cdn-storage-custom-domain-https/cdn-url-redirect-rule.png)

В этом правиле *Cdn-endpoint-name* — это имя, которое вы настроили для конечной точки CDN. Его можно выбрать из раскрывающегося списка. Значение *origin-path* — это путь в вашей исходной учетной записи хранения, в которой размещается статическое содержимое. Если все статическое содержимое размещается в одном контейнере, замените *origin-path* именем этого контейнера.

## <a name="pricing-and-billing"></a>Цены и выставление счетов
При доступе к большим двоичным объектам через Azure CDN вы оплачиваете трафик между серверами POP и источником (хранилищем BLOB-объектов) по [расценкам хранилища BLOB-объектов](https://azure.microsoft.com/pricing/details/storage/blobs/), а данные, доступ к которым получаете с серверов POP, — по [расценкам Azure CDN](https://azure.microsoft.com/pricing/details/cdn/).

Например, ваша учетная запись хранения размещена в США и доступ к ней осуществляется через Azure CDN. Если кто-то в Европе пытается получить доступ к одному из больших двоичных объектов в этой учетной записи хранения через Azure CDN, то для этого большого двоичного объекта Azure CDN сначала проверяет сервер POP, который является ближайшим к Европе. Если он найден, Azure CDN обратится к этой копии большого двоичного объекта и использует расценки CDN, так как доступ к нему осуществляется через Azure CDN. Если он не найден, Azure CDN скопирует большой двоичный объект на POP, что повлечет за собой начисление платы за транзакции и исходящий трафик (как указано в расценках хранилища BLOB-объектов), а затем обратится к файлу на сервере POP, за что будет начислена плата по расценкам Azure CDN.

## <a name="next-steps"></a>Дополнительная информация
[Tutorial: Set Azure CDN caching rules](cdn-caching-rules-tutorial.md) (Руководство. Настройка правил кэширования Azure CDN)




