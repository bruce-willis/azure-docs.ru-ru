---
title: Что собой представляет инструмент What If для условного доступа Azure Active Directory
description: Узнайте, как оценить воздействие политик условного доступа на среду.
services: active-directory
keywords: условный доступ к приложениям, условный доступ посредством Azure Active Directory, безопасный доступ к ресурсам организации, политики условного доступа
documentationcenter: ''
author: MarkusVi
manager: mtillman
editor: ''
ms.assetid: 8c1d978f-e80b-420e-853a-8bbddc4bcdad
ms.service: active-directory
ms.component: conditional-access
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 07/17/2018
ms.author: markvi
ms.reviewer: nigu
ms.openlocfilehash: d9bdc35e732a84920800424a260610fd6f068c94
ms.sourcegitcommit: 4de6a8671c445fae31f760385710f17d504228f8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2018
ms.locfileid: "39626096"
---
# <a name="what-is-the-what-if-tool-in-azure-active-directory-conditional-access"></a>Что собой представляет инструмент What If для условного доступа Azure Active Directory

С помощью [условного доступа](../active-directory-conditional-access-azure-portal.md) Azure Active Directory (Azure AD) можно контролировать доступ авторизованных пользователей к облачным приложениям. Как узнать, чего ожидать от политик условного доступа в своей среде? Чтобы ответить на этот вопрос, можно использовать **инструмент what if для условного доступа**.

В этой статье объясняется, как использовать этот инструмент для тестирования политик условного доступа.

## <a name="what-it-is"></a>Что это

С помощью **инструмента what if для политик условного доступа** можно понять, как политики условного доступа влияют на рабочую среду. Вместо того, чтобы тестировать политики, выполняя несколько входов вручную, можно воспользоваться данным инструментом, чтобы имитировать вход пользователя. При имитации оценивается влияние входа на политики и создается отчет об имитации. Этот отчет содержит не только примененные политики условного доступа, но и [классические политики](policy-migration.md#classic-policies), если они существуют.    

Инструмент what if также позволяет быстро определить политики, применяемые к определенному пользователю. Эти сведения можно использовать, например, если необходимо устранить проблему.  

## <a name="how-it-works"></a>Принцип работы

В **инструменте what if для условного доступа** необходимо сначала настроить параметры сценария входа, который требуется имитировать. К числу этих параметров относятся следующие:

- пользователь, которого необходимо проверить; 

- облачные приложения, к которым пользователь попытается получить доступ;

- условия, при которых осуществляется доступ к настроенным облачным приложениям.
     
В качестве следующего шага можно запустить имитацию, чтобы проверить выбранные параметры. В оценке участвуют только включенные политики.


По завершении оценки инструмент создает отчет о задействованных политиках.


> [!NOTE]
> В настоящее время инструмент What If не поддерживает вложенные группы. Если пользователь входит в группу, а эта группа является членом другой группы, которая используется в политике условного доступа, то инструмент what if неправильно отображает пользователю результат воздействия этой политики. 


## <a name="running-the-tool"></a>Запуск инструмента

Инструмент **what if** можно найти на странице **[Условный доступ — политики](https://portal.azure.com/#blade/Microsoft_AAD_IAM/ConditionalAccessBlade/Policies)** на портале Azure.

Чтобы запустить этот инструмент, на панели инструментов в верхней части списка политик щелкните **What if**.

![What if](./media/what-if-tool/01.png)

Прежде чем можно будет выполнить оценку, необходимо настроить параметры.

## <a name="settings"></a>Параметры

В этом разделе приводятся сведения о параметрах имитации.

![What if](./media/what-if-tool/02.png)


### <a name="user"></a>Пользователь

Можно выбрать только одного пользователя. Это единственное обязательное для заполнения поле.

### <a name="cloud-apps"></a>Облачные приложения

Значение по умолчанию для этого параметра — **Все облачные приложения**. При значении по умолчанию выполняется оценка всех доступных политик в вашей среде. Можно сузить область оценки до политик, влияющих на конкретные облачные приложения.


### <a name="ip-address"></a>IP-адрес

IP-адрес — это отдельный IPv4-адрес, необходимый для имитации [условия расположения](location-condition.md). Адрес представляет веб-адрес устройства, используемого пользователем для входа. Можно проверить IP-адрес устройства, например, перейдя по ссылке [What is my IP address](https://whatismyipaddress.com) (Определить мой IP-адрес).    

### <a name="device-platforms"></a>Платформы устройств

Этот параметр имитирует [условие платформы устройства](conditions.md#device-platforms) и представляет эквивалент параметра **Все платформы (в том числе и неподдерживаемые)**. 
### <a name="client-apps"></a>Клиентские приложения

Этот параметр имитирует [условие клиентских приложений](conditions.md#client-apps).
По умолчанию этот параметр вызывает оценку всех политик, для которых выбран параметр **Браузер** или **Мобильные приложения и настольные клиенты** (или оба эти параметра). Он также позволяет обнаружить политики, которые принудительно используют **Exchange ActiveSync (EAS)**. Область этого параметра можно сузить, выбрав:

- **Браузер** для оценки всех политик, для которых выбран по крайней мере параметр **Браузер**; 

- **Мобильные приложения и настольные клиенты** для оценки всех политик, для которых выбран по крайней мере параметр **Мобильные приложения и настольные клиенты**. 


### <a name="sign-in-risk"></a>Риск при входе

Этот параметр имитирует [условие риска при входе](conditions.md#sign-in-risk).   


## <a name="evaluation"></a>Оценка 

Запустите оценку, щелкнув **What if**. После оценки предоставляется отчет, содержащий: 

![What if](./media/what-if-tool/03.png)

- индикатор существования классических политик в вашей среде;
- политики, которые применяются к вашему пользователю;
- политики, которые не применяются к вашему пользователю.


Если для выбранных облачных приложений существуют [классические политики](policy-migration.md#classic-policies), то отчет содержит соответствующий индикатор. Щелкнув этот индикатор, можно перейти на страницу классических политик. На странице классических политик можно перенести классическую политику или просто отключить ее. Закрыв эту страницу, можно вернуться к результату оценки.

В списке политик, применяемых к выбранному пользователю, можно найти список [элементов управления разрешениями](controls.md#grant-controls) и элементов управления [сеансами](controls.md#session-controls), которым должен соответствовать пользователь.

В списке политик, которые не применяются к пользователю, можно также найти причины, по которым эти политики не применяются. Для каждой из перечисленных политик причина представляет первое условие, которое не было выполнено. Возможной причиной для политики, которая не применяется, является отключение политики ввиду того, что она в дальнейшем не оценивается.   



## <a name="next-steps"></a>Дополнительная информация

- Чтобы узнать, как настроить политику условного доступа, см. статью [Краткое руководство. Требование многофакторной идентификации (MFA) для конкретных приложений с помощью условного доступа Azure Active Directory](app-based-mfa.md).

- Если вы готовы к настройке политик условного доступа для своей среды, см. статью [Рекомендации по работе с условным доступом в Azure Active Directory](best-practices.md). 

- Если вы хотите перенести классические политики, прочитайте раздел [Перенос классических политик на портале Azure](policy-migration.md).  
