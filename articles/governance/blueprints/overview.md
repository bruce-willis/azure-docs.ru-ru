---
title: Обзор Azure Blueprint
description: Azure Blueprint — это служба в Azure, с помощью которой можно создавать, определять и развертывать артефакты в среде Azure.
services: blueprints
author: DCtheGeek
ms.author: dacoulte
ms.date: 09/18/2018
ms.topic: overview
ms.service: blueprints
manager: carmonm
ms.custom: mvc
ms.openlocfilehash: c7ffbe86407bc776870890e5b4151556f572832e
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46957519"
---
# <a name="what-is-azure-blueprints"></a>Что такое Azure Blueprint?

Так же, как чертеж позволяет инженеру или архитектору набросать конструктивные параметры для проекта, схемы Azure Blueprint позволяют облачным архитекторам и центральным ИТ-специалистам определять воспроизводимый набор ресурсов Azure, который реализует стандарты, модели и требования организации и соблюдает их. С помощью Azure Blueprint группы разработчиков могут быстро подготавливать и настраивать новые среды, зная, что они создаются в соответствии с требованиями организации и содержат ряд встроенных компонентов, таких как сети, для ускорения разработки и поставки.

Схемы — это декларативный способ оркестрации развертывания нескольких шаблонов ресурсов и других артефактов, таких как:

- Назначения ролей
- Назначения политик
- Шаблоны Azure Resource Manager
- Группы ресурсов

## <a name="how-it-is-different-from-resource-manager-templates"></a>В чем отличие от шаблонов Resource Manager

Схемы предназначены для облегчения _настройки среды_, которая часто включает ряд групп ресурсов, политик и назначений ролей, в дополнение к развертываниям шаблонов Resource Manager. Схема — это пакет, который объединяет все эти _артефакты_, и вы можете компоновать такой пакет и создавать его варианты, в том числе через конвейер CI/CD. В конечном счете каждый из них назначается подписке за одну операцию, которую можно контролировать и отслеживать.

Почти все, что вам захочется включить в схемы для развертывания, можно выполнить с помощью шаблона Resource Manager. Однако шаблон Resource Manager является документом, который не существует в исходном виде в Azure°— каждый из них хранится локально или в системе управления версиями. Шаблон используется для развертывания одного или нескольких ресурсов Azure, но после развертывания этих ресурсов связь с используемым шаблоном и отношение к нему теряется.

В случае схем связь между определением схемы (тем, _что должно быть_ развернуто) и назначением схемы (тем, _что было_ развернуто) остается. Эта связь обеспечивает улучшенное отслеживание и контроль развертываний, возможность обновления нескольких подписок, управляемых одной схемой, в одно и то же время, и многое другое.

Нет необходимости выбирать между схемой и шаблоном Resource Manager. В каждой схеме может быть от нуля до нескольких _артефактов_ шаблона Resource Manager. Это означает, что предыдущие действия по разработке и поддержке библиотеки шаблонов Resource Manager не пропадут зря, так как все это можно использовать в схемах.

## <a name="how-it-is-different-from-azure-policy"></a>В чем отличие от политики Azure

Схема — это пакет или контейнер для составления специальных наборов стандартов, шаблонов и требований к реализации облачных служб Azure, безопасности и разработке, которые можно использовать многократно для обеспечения согласованности и соответствия требованиям.

[Политика](../policy/overview.md) — это система разрешений по умолчанию и явных запретов, ориентированная на свойства ресурсов во время развертывания и предназначенная для уже существующих ресурсов. Она поддерживает ИТ-управление, гарантируя соответствие ресурсов в подписке требованиям и стандартам.

Включение политики в схему позволяет не только создавать правильный шаблон или проект во время назначения схемы, но и гарантирует, что в среду могут вноситься только утвержденные или планируемые изменения, обеспечивая постоянное соответствие целям схемы.

Политику можно включать в определение схем в качестве одного из многих _артефактов_. Схемы также поддерживают использование параметров с политиками и инициативами.

## <a name="blueprint-definition"></a>Определение схемы

Схема состоит из _артефактов_. В настоящее время схемы в качестве артефактов поддерживают следующие ресурсы.

|Ресурс  | Параметры иерархии| ОПИСАНИЕ  |
|---------|---------|---------|
|Группы ресурсов     | Подписка | Создайте новую группу ресурсов для использования другими артефактами в схеме.  Эти группы ресурсов-заполнителей позволяют упорядочивать ресурсы в точном соответствии с требуемой структурой и предоставляют механизм ограничения области для включенных артефактов назначения политик и ролей, а также шаблонов Azure Resource Manager.         |
|Шаблон Azure Resource Manager      | Группа ресурсов | Эти шаблоны можно использовать для создания сложных сред, таких как ферма SharePoint, платформа настройки состояния службы автоматизации Azure или рабочая область Log Analytics. |
|Назначение политики     | Подписка, группа ресурсов | Позволяет назначать политику или инициативу группе управления или подписке, которой назначена схема. Эта политика или инициатива должна быть в области схемы (в группе управления схемы или ниже). Если политика или инициатива имеет параметры, эти параметры можно назначить при создании схемы или во время назначения схемы.       |
|Назначение ролей   | Подписка, группа ресурсов | Добавьте существующего пользователя или группу во встроенную роль, чтобы соответствующие пользователи всегда имели соответствующий доступ к ресурсам. Назначения ролей можно определить для всей подписки или в определенной группе ресурсов, включенной в схему. |

### <a name="blueprints-and-management-groups"></a>Схемы и группы управления

При создании определения схемы вы указываете место сохранения схемы. В настоящее время схемы можно сохранять только в [группах управления](../management-groups/overview.md), к которым у вас есть доступ **участника**. Затем схему можно будет назначать любому дочернему объекту (группе управления или подписке) этой группы управления.

> [!IMPORTANT]
> Если у вас нет доступа ни к одной из групп управления или ни к одной из настроенных групп управления, то загрузка списка определений схем покажет, что доступных определений нет. Если нажать **Область**, откроется окно с предупреждением о выборе группы управления. Чтобы устранить эту проблему, убедитесь, что подписка, к которой вы имеете соответствующий доступ, является частью [группы управления](../management-groups/overview.md).

### <a name="blueprint-parameters"></a>Параметры схемы

Схемы могут передавать параметры в политику/инициативу или в шаблон Azure Resource Manager.
При добавлении в схему какого-либо _артефакта_ автор может выбрать, предоставить ли определенное значение каждому назначению схемы, или разрешить предоставлять значение каждому назначению схемы во время назначения. Такая гибкость позволяет задать предопределенное значение для всех видов использования схемы или разрешить принимать это решение во время назначения.

> [!NOTE]
> Схема может иметь собственные параметры, но в настоящее время их можно создать только в том случае, если схема была создана из REST API, а не на портале.

Дополнительные сведения см. в описании [параметров схемы](./concepts/parameters.md).

### <a name="blueprint-publishing"></a>Публикация схемы

Изначально, когда схема создается, она находится в режиме **черновика**. Когда она будет готова к назначению, ее следует **опубликовать**. Для публикации необходимо задать строку **Версия** (буквы, цифры и дефисы, не более 20 символов) и при желании указать необязательные **сведения об изменениях**.
Каждый вариант этой схемы, полученный в результате будущих изменений, имеет свою **версию**, и можно назначать любую версию этой схемы. Кроме того, можно назначать разные **версии** одной и той же схемы одной подписке. Когда в схему вносятся дополнительные изменения, **опубликованная** **версия** продолжает существовать в дополнение к версии с **неопубликованными изменениями**. После завершения изменений обновленная схема **публикуется** с новой и уникальной **версией**, и с этого момента ее также можно назначать.

## <a name="blueprint-assignment"></a>Назначение схемы

Каждую **опубликованную** **версию** схемы можно назначить существующей подписке. На портале схеме по умолчанию назначается **версия**, соответствующая версии последней **опубликованной** схемы. Если имеются параметры артефакта (или параметры схемы), они будут задаваться в процессе назначения.

## <a name="permissions-in-azure-blueprints"></a>Разрешения в Azure Blueprint

Чтобы использовать схемы, вам необходимо авторизоваться с помощью [управления доступом на основе ролей](../../role-based-access-control/overview.md) (RBAC). Для создания схем ваша учетная запись должна иметь следующие разрешения:

- `Microsoft.Blueprint/blueprints/write` — создание определения схемы
- `Microsoft.Blueprint/blueprints/artifacts/write` — создание артефактов в определении схемы
- `Microsoft.Blueprint/blueprints/versions/write` — публикация схемы

Для удаления схем ваша учетная запись должна иметь следующие разрешения:

- `Microsoft.Blueprint/blueprints/delete`
- `Microsoft.Blueprint/blueprints/artifacts/delete`
- `Microsoft.Blueprint/blueprints/versions/delete`

> [!NOTE]
> Так как определения схем создаются в группе управления, разрешения на определение схем должны быть предоставлены в области группы управления или унаследованы в области группы управления.

Для назначения или отмены назначения схем ваша учетная запись должна иметь следующие разрешения:

- `Microsoft.Blueprint/blueprintAssignments/write` — назначение схемы
- `Microsoft.Blueprint/blueprintAssignments/delete` — отмена назначения схемы

> [!NOTE]
> Так как назначения схем создаются в подписке, разрешения на назначение и отмену назначения схем должны быть предоставлены в области подписки или унаследованы в области подписки.

Эти разрешения имеют роль **владельца** и, за исключением разрешений на назначение схем, также роли **участника**. Если эти встроенные роли не соответствуют вашим требованиям безопасности, можно создать [настраиваемую роль](../../role-based-access-control/custom-roles.md).

> [!NOTE]
> Субъекту-службе для Azure Blueprint требуется роль **владельца** в назначенной подписке, чтобы развертывание было разрешено. При использовании портала эта роль автоматически предоставляется для развертывания и отменяется после завершения развертывания. При использовании REST API эту роль необходимо предоставлять вручную, но она тоже автоматически отменяется после завершения развертывания.

## <a name="next-steps"></a>Дополнительная информация

- [Создание схемы°— портал](create-blueprint-portal.md)
- [Создание схемы°— REST API](create-blueprint-rest-api.md)