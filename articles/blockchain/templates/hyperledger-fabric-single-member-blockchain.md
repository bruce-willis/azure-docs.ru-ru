---
title: Консорциум Hyperledger Fabric
description: Развертывание и настройка сети с одним участником с помощью шаблона решения консорциума Hyperledger Fabric
services: azure-blockchain
keywords: ''
author: PatAltimore
ms.author: patricka
ms.date: 5/21/2018
ms.topic: article
ms.service: azure-blockchain
ms.reviewer: zeyadr
manager: femila
ms.openlocfilehash: ee8057be98d18db5963a3e5f1ba1f8bd8d76fe05
ms.sourcegitcommit: 1981c65544e642958917a5ffa2b09d6b7345475d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/03/2018
ms.locfileid: "48241594"
---
# <a name="hyperledger-fabric-single-member-network"></a>Сеть Hyperledger Fabric с одним участником

Вы можете использовать шаблон решения консорциума Hyperledger Fabric для развертывания и настройки сети Hyperledger Fabric с одним участником (с несколькими узлами).

После прочтения этой статьи вы узнаете:

- о работе с блокчейном, Hyperledger Fabric и более сложными сетевыми архитектурами консорциума;
- как развернуть и настроить сеть консорциума Hyperledger Fabric с одним участником на портале Azure.

## <a name="about-blockchain"></a>Сведения о технологии Блокчейн

Для тех, кто не знаком с блокчейн-сообществом, это отличная возможность познакомиться с этой технологией в простой и настраиваемой среде Azure. Блокчейн — базовая технология системы Биткойн, однако это гораздо больше, чем просто средство для виртуальной валюты. Он представляет собой составную часть существующей базы данных, распределенной системы и криптографических технологий, которая обеспечивает безопасное вычисление с несколькими участниками, гарантиями по неизменяемости, проверяемости и устойчивости к атакам. В разных протоколах применяются разные механизмы для предоставления этих атрибутов. [Hyperledger Fabric](https://github.com/hyperledger/fabric) является одним из таких протоколов.

## <a name="consortium-architecture-on-azure"></a>Архитектура консорциума в Azure

Этот шаблон развертывает топологию, помогающую тестировать и моделировать среду разработки для пользователей в рамках одной организации (с одним участником). Это развертывание состоит из многоузловой сети в одном регионе, которая вскоре будет расширена до нескольких регионов.

Сеть состоит из трех типов узлов:

1. **Узел участника**. Узел, на котором запущена служба членства в Fabric, которая регистрирует участников сети и управляет ими. В конечном итоге этот узел может быть помещен в кластер для обеспечения масштабируемости и высокой доступности, однако в этой лаборатории будет использоваться один узел участника.
2. **Организующий узел**. Узел, на котором работает служба связи, реализующая гарантию доставки, такую ​​как передача общего порядка или атомарные транзакции.
3. **Одноранговый узел**. Узел, который совершает транзакции и поддерживает состояние и копию распределенного реестра.

## <a name="getting-started"></a>Приступая к работе

Чтобы приступить к работе, вам понадобится подписка Azure, которая может поддерживать развертывание нескольких виртуальных машин и стандартных учетных записей хранения. Если у вас еще нет ее, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/).

По умолчанию большинство типов подписки поддерживают небольшую топологию развертывания без необходимости увеличения квоты. Для наименьшего возможного развертывания для одного участника потребуется:

- 5 виртуальных машин (5 ядер);
- 1 виртуальная сеть;
- 1 подсистема балансировки нагрузки;
- 1 общедоступный IP-адрес.

Оформив подписку, перейдите на [портал Azure](https://portal.azure.com). Выберите **+**, а затем — **Блокчейн** и **Hyperledger Fabric Single Member Blockchain** (Блокчейн с одним участником Hyperledger Fabric).

![Шаблон блокчейна с одним участником Hyperledger Fabric в Marketplace](./media/hyperledger-fabric-single-member-blockchain/marketplace-template.png)

## <a name="deployment"></a>Развертывание

Чтобы начать, щелкните **Hyperledger Fabric Single Member Blockchain** (Блокчейн с одним участником Hyperledger Fabric) и нажмите кнопку **Создать**. После этого откроется колонка **Основы** в мастере.

Шаблон развертывания поможет вам выполнить настройку многоузловой сети. Процедура развертывания подразделяется на три этапа: основы, конфигурация сети и конфигурация Fabric.

### <a name="basics"></a>Основы

В колонке **Основы** укажите значения для стандартных параметров любого развертывания, такие как подписка, группа ресурсов и основные свойства виртуальной машины.

![Основы](./media/hyperledger-fabric-single-member-blockchain/basics.png)

Имя параметра| ОПИСАНИЕ| Допустимые значения|По умолчанию
---|---|---|---
**Resource prefix** (Префикс ресурса)| Строка используется в качестве основы для именования развернутых ресурсов.|6 знаков или меньше|Нет данных
**Имя пользователя ВМ**| Имя администратора для каждой виртуальной машины, развернутой для этого участника.|1–64 знаков|azureuser
**Тип проверки подлинности**| Метод аутентификации на виртуальной машине.|Пароль или открытый ключ SSH|Пароль
**Пароль (тип аутентификации = пароль)**|Пароль учетной записи администратора для каждой развернутой виртуальной машины. Пароль должен содержать знаки трех видов из следующих: 1 строчная буква, 1 прописная буква, 1 цифра и 1 специальный знак.<br /><br />Хотя все виртуальные машины изначально имеют одинаковый пароль, вы можете изменить пароль после инициализации.|12–72 знаков|Нет данных
**Ключ SSH (тип аутентификации = открытый ключ)**|Ключ защищенной оболочки, используемый для удаленного входа.||Нет данных
**Restrict access by IP address** (Ограничение доступа по IP-адресу)|Параметр для определения того, ограничен ли доступ к конечной точке клиента.|Да/нет| Нет 
**Allowed IP address or subnet (Разрешенный IP-адрес или подсеть), если параметр ограничения доступа по IP-адресу = "Да"**|IP-адрес или набор IP-адресов, которым разрешен доступ к конечной точке клиента при включенном управлении доступом.||Нет данных
**Подписка** |Подписка, в которую необходимо выполнить развертывание.
**Группа ресурсов** |Группа ресурсов, куда будет развертываться сеть консорциума.||Нет данных
**Местоположение.** |Регион Azure, в который необходимо развернуть сеть с первым участником**.

### <a name="network-size-and-performance"></a>Размер и производительность сети

Далее в разделе **Network size and performance** (Размер и производительность сети) укажите значения, касающиеся размера сети консорциума, например количество участников, организующих и одноранговых узлов. Выберите параметры инфраструктуры и размер вашей виртуальной машины.

![Размер и производительность сети](./media/hyperledger-fabric-single-member-blockchain/network-size-performance.png)

Имя параметра| ОПИСАНИЕ| Допустимые значения|По умолчанию
---|---|---|---
**Number of Membership Nodes** (Количество узлов участников)|Число узлов, на которых выполняется служба участников. Дополнительные сведения о службе участников см. в разделе о службах безопасности и участников в [документации](https://media.readthedocs.org/pdf/hyperledger-fabric/latest/hyperledger-fabric.pdf) Hyperledger.<br /><br />В настоящее время это значение ограничено 1 узлом, но мы планируем поддерживать масштабирование через кластеризацию в следующей версии.|1| 1
**Number of Orderer Nodes** (Количество организующих узлов) |Число узлов, которые упорядочивают (организуют) транзакции в блоки.--> Это утверждение является многословным и запутанным. Дополнительные сведения о службе упорядочивания см. в [документации](https://hyperledger-fabric.readthedocs.io/en/release-1.1/ordering-service-faq.html) Hyperledger.<br /><br />В настоящее время это значение ограничено 1 узлом. |1 |1
**Number of Peer Nodes** (Число одноранговых узлов)| Узлы, принадлежащие участникам консорциума, которые выполняют транзакции и поддерживают состояние и копию реестра.<br /><br />Дополнительные сведения о службе упорядочивания см. в [документации](https://hyperledger-fabric.readthedocs.io/en/latest/glossary.html) Hyperledger.|3| 3–9
**Производительность хранилища**|Тип хранилища, поддерживающий каждый из развернутых узлов. Дополнительные сведения о службе хранилища см. в статьях [Высокопроизводительное хранилище класса Premium и управляемые диски для виртуальных машин Azure](https://docs.microsoft.com/azure/storage/common/storage-introduction) и [Высокопроизводительное хранилище класса Premium и управляемые диски для виртуальных машин Azure](https://docs.microsoft.com/azure/virtual-machines/windows/premium-storage).|Standard или Premium|Стандартная
**Размер виртуальной машины** |Размер виртуальной машины, используемый для всех узлов сети.|"Стандартный" A,<br />"Стандартный" D,<br />"Стандартный" D-v2,<br />"Стандартный" F,<br />"Стандартный" DS,<br />"Стандартный" FS|"Стандартный" D1_v2

### <a name="fabric-specific-settings"></a>Определенные параметры Fabric

Наконец, в разделе **Fabric Settings** (Параметры Fabric) укажите параметры конфигурации, связанные с Fabric.

![Параметры Fabric](./media/hyperledger-fabric-single-member-blockchain/fabric-settings.png)

Имя параметра| ОПИСАНИЕ| Допустимые значения|По умолчанию
---|---|---|---
**Bootstrap User Name** (Имя пользователя для начальной загрузки)| Начальный авторизованный пользователь, который будет зарегистрирован в службах участников в развернутой сети.|не более 9 знаков|admin
**Bootstrap User Password for Fabric CA** (Пароль пользователя для начальной загрузки для ЦС Fabric)|Пароль администратора, используемый для защиты учетной записи ЦС Fabric, импортированной на узел участника.<br /><br />Пароль должен содержать одну строчную букву, одну прописную букву и одну цифру.|12 или более знаков|Нет данных

### <a name="deploy"></a>Развертывание

В разделе **Сводка** просмотрите введенные данные и выполните базовую проверку перед развертыванием.

![Сводка](./media/hyperledger-fabric-single-member-blockchain/summary.png)

Просмотрите юридические и конфиденциальные условия и нажмите кнопку **Приобрести**, чтобы выполнить развертывание. В зависимости от количества предоставляемых виртуальных машин время развертывания может варьироваться от нескольких минут до десятков минут.

### <a name="accessing-nodes"></a>Доступ к узлам

После завершения развертывания появится окно **Обзор**.

![Развернутые приложения](./media/hyperledger-fabric-single-member-blockchain/deployments.png)

Если это окно не отображается автоматически (возможно, вы перемещались по порталу управления во время развертывания), его всегда можно найти на вкладке "Группы ресурсов" на левой панели навигации. Щелкните имя группы ресурсов, введенное на шаге 1, чтобы перейти на страницу **Обзор**.

На странице перечислены все ресурсы, которые были развернуты с помощью шаблона решения. По желанию вы можете анализировать их, но с этой страницы вы также можете получить доступ к _выходным параметрам_, сгенерированным шаблоном. Эти параметры предоставят вам полезную информацию, необходимую при подключении к сети Hyperledger Fabric.

Чтобы получить доступ к выходным параметрам, сначала щелкните вкладку **Развертывания** в колонке "Группа ресурсов". Отображается журнал развертывания.

![Журнал развертывания](./media/hyperledger-fabric-single-member-blockchain/deployment-history.png)

В истории развертывания щелкните первое развертывание в списке, чтобы просмотреть подробности.

![Сведения о развертывании](./media/hyperledger-fabric-single-member-blockchain/deployment-details.png)

На экране сведений появится сводка развертывания, а затем три полезных выходных параметра:

- Параметр _Конечная точка API_ можно использовать после развертывания приложения в сети.
- Параметр _Префикс_, также называемый _префиксом развертывания_, уникально идентифицирует ваши ресурсы и развертывание. Он нужен при использовании инструментов на основе командной строки.
- Параметр _SSH-TO-FIRST-VM_ (Сеанс SSH с первой ВМ) предоставляет вам предварительно собранную команду SSH со всеми параметрами, необходимыми для подключения к первой виртуальной машине в вашей сети (в случае с Hyperledger Fabric это будет узел Fabric-CA).

Вы можете удаленно подключиться к виртуальным машинам для каждого узла по протоколу SSH с предоставленными именем администратора и паролем или ключом SSH. Так как виртуальные машины узлов не имеют собственных общедоступных IP-адресов, вам нужно будет перейти к балансировщику нагрузки и указать номер порта. SSH-команда для доступа к первому узлу транзакции является третьим выводом шаблона — **SSH-TO-FIRST-VM (Сеанс SSH с первой ВМ). Для примера развертывания — это `sh -p 3000 azureuser@hlf2racpt.northeurope.cloudapp.azure.com`. Чтобы получить дополнительные узлы транзакций, увеличьте номер порта на единицу (например, первый узел транзакции находится на порту 3000, второй — на 3001, третий — на 3002 и т. д.).

## <a name="next-steps"></a>Дополнительная информация

Теперь вы можете сосредоточиться на разработке приложений и сетевого кода в сети блокчейна консорциума Hyperledger.
