---
title: Подключение к IBM DB2 с помощью Azure Logic Apps | Microsoft Docs
description: Управление ресурсами с помощью интерфейсов REST API IBM DB2 и Azure Logic Apps
services: logic-apps
ms.service: logic-apps
author: ecfan
ms.author: estfan
ms.reviewer: plarsen, LADocs
ms.suite: integration
ms.topic: article
ms.date: 08/23/2018
tags: connectors
ms.openlocfilehash: 354e67183a36f511811d74a0685dea2e23d6c0e2
ms.sourcegitcommit: 58c5cd866ade5aac4354ea1fe8705cee2b50ba9f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/24/2018
ms.locfileid: "42818881"
---
# <a name="manage-ibm-db2-resources-with-azure-logic-apps"></a>Управление ресурсами IBM DB2 с помощью Azure Logic Apps

С помощью Azure Logic Apps и соединителя IBM DB2 можно создавать автоматизированные задачи и рабочие процессы на основе ресурсов, хранящихся в базе данных DB2. Рабочие процессы могут подключаться к ресурсам в базе данных, считывать и выводить таблицы баз данных, добавлять, менять и удалять строки и т. д. В приложения логики можно включать действия, которые получают ответы от базы данных и делают выходные данные доступными для других действий. 

В этой статье показано, как создать приложение логики, выполняющее различные операции с базами данных. Если вы не знакомы с приложениями логики, ознакомьтесь со статьей [Что такое Azure Logic Apps](../logic-apps/logic-apps-overview.md).

## <a name="supported-platforms-and-versions"></a>Поддерживаемые платформы и версии

Соединитель DB2 содержит клиент Майкрософт, который взаимодействует с удаленными серверами DB2 по сети TCP/IP. С помощью этого соединителя можно получать доступ к таким облачным базам данных, как IBM Bluemix dashDB и IBM DB2 для Windows, работающим в системе виртуализации Azure. Вы также можете получать доступ к локальным базам данных DB2 после [установки и настройки локального шлюза данных](../logic-apps/logic-apps-gateway-connection.md). 

Соединитель IBM DB2 поддерживает следующие платформы и версии IBM DB2, а также совместимые c IBM DB2 продукты (например, IBM Bluemix dashDB), поддерживающие архитектуру распределенной реляционной базы данных (DRDA) SQL Access Manager (SQLAM) версий 10 и 11:

| платформа | Version (версия) | 
|----------|---------|
| IBM DB2 для z/OS | 11.1, 10.1 |
| IBM DB2 для i | 7.3, 7.2, 7.1 |
| IBM DB2 для LUW | 11, 10.5 |
|||

## <a name="supported-database-operations"></a>Поддерживаемые операции с базами данных

Ниже указаны операции с базами данных, поддерживаемые соединителем IBM DB2, и соответствующие действия соединителя.

| Операция с базой данных | Действие соединителя | 
|--------------------|------------------|
| создание списка таблиц базы данных; | Получение таблиц | 
| чтение одной строки с помощью инструкции SELECT; | Получение строки | 
| чтение всех строк с помощью инструкции SELECT; | Получение строк | 
| добавление одной строки с помощью инструкции INSERT; | Вставка строки | 
| Изменение одной строки с помощью инструкции UPDATE | Обновление строки | 
| удаление одной строки с помощью инструкции DELETE. | Удаление строки | 
|||

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, <a href="https://azure.microsoft.com/free/" target="_blank">зарегистрируйтесь для получения бесплатной учетной записи Azure</a>. 

* База данных IBM DB2 (облачная или локальная).

* Базовые знания [создания приложений логики](../logic-apps/quickstart-create-first-logic-app-workflow.md).

* Приложение логики, из которого требуется получить доступ к базе данных DB2. Этот соединитель предоставляет только действия, поэтому для запуска приложения логики выберите отдельный триггер, например **Периодичность**.
В примерах этой статьи мы используем триггер **Периодичность**.

<a name="add-db2-action"></a>

## <a name="add-db2-action---get-tables"></a>Добавление действия DB2 — получение таблиц

1. Откройте приложение логики в конструкторе приложений логики на [портале Azure](https://portal.azure.com), если оно еще не открыто.

1. В разделе триггера выберите **Добавить шаг**.

1. В поле поиска введите слово db2 в качестве фильтра. В этом примере выберите из списка действие **Получить таблицы (предварительная версия)**
   
   ![Выбор действия](./media/connectors-create-api-db2/select-db2-action.png)

   Вам будет предложено указать сведения о подключении к базе данных DB2. 

1. Следуйте инструкциям по созданию подключений для [облачных](#cloud-connection) или [локальных баз данных](#on-premises-connection).

<a name="cloud-connection"></a>

## <a name="connect-to-cloud-db2"></a>Подключение к облаку DB2

Чтобы настроить подключение, по запросу укажите приведенные ниже сведения, нажмите **Создать**, а затем сохраните приложение логики.

| Свойство | Обязательно | ОПИСАНИЕ | 
|----------|----------|-------------| 
| **Подключиться через локальный шлюз** | Нет  | Применяется только для локальных подключений. | 
| **Имя подключения** | Yes | Имя подключения, например MyLogicApp-DB2-connection |
| **Сервер** | Yes | Адрес или псевдоним, двоеточие и номер порта для сервера DB2, например myDB2server.cloudapp.net:50000 <p><p>**Примечание**. Это строка, представляющая псевдоним или адрес TCP/IP в формате IPv4 или IPv6, за которым следуют двоеточие и номер порта TCP/IP. |
| **База данных** | Yes | Имя базы данных <p><p>**Примечание**. Это строка, представляющая имя реляционной базы данных DRDA (RDBNAM): <p>– DB2 для z/OS принимает 16-байтовую строку, если база данных известна как расположение "IBM DB2 для z/OS". <br>– DB2 для i принимает 18-байтовую строку, если база данных известна как реляционная база данных "IBM DB2 для i". <br>– DB2 для LUW принимает в качестве значения 8-байтовую строку. |
| **Имя пользователя** | Yes | Имя пользователя для базы данных <p><p>**Примечание**. Это строка, длина которой зависит от конкретной базы данных: <p><p>– DB2 для z/OS принимает 8-байтовую строку. <br>– DB2 для i принимает 10-байтовую строку. <br>– DB2 для Linux или UNIX принимает 8-байтовую строку. <br>– DB2 для Windows принимает 30-байтовую строку. | 
| **Пароль** | Yes | Пароль для базы данных | 
|||| 

Например: 

![Сведения о подключении к облачным базам данных](./media/connectors-create-api-db2/create-db2-cloud-connection.png)

<a name="on-premises-connection"></a>

## <a name="connect-to-on-premises-db2"></a>Подключение к локальной базе данных DB2

Перед созданием подключения локальный шлюз данных должен быть уже установлен. В противном случае вам не удастся настроить подключение. Если у вас установлен шлюз, продолжайте указывать эти сведения о подключении, а затем нажмите кнопку **Создать**.

| Свойство | Обязательно | ОПИСАНИЕ | 
|----------|----------|-------------| 
| **Подключиться через локальный шлюз** | Yes | Применяется, если необходимо локальное подключение. Показывает свойства локального подключения. | 
| **Имя подключения** | Yes | Имя подключения, например MyLogicApp-DB2-connection | 
| **Сервер** | Yes | Адрес или псевдоним, двоеточие и номер порта для сервера DB2, например myDB2server:50000 <p><p>**Примечание**. Это строка, представляющая псевдоним или адрес TCP/IP в формате IPv4 или IPv6, за которым следуют двоеточие и номер порта TCP/IP. | 
| **База данных** | Yes | Имя базы данных <p><p>**Примечание**. Это строка, представляющая имя реляционной базы данных DRDA (RDBNAM): <p>– DB2 для z/OS принимает 16-байтовую строку, если база данных известна как расположение "IBM DB2 для z/OS". <br>– DB2 для i принимает 18-байтовую строку, если база данных известна как реляционная база данных "IBM DB2 для i". <br>– DB2 для LUW принимает в качестве значения 8-байтовую строку. | 
| **Аутентификация** | Yes | Тип проверки подлинности для подключения, например "Обычная" <p><p>**Примечание**. Выберите это значение из списка, включающего варианты "Обычная" и "Windows (Kerberos)". | 
| **Имя пользователя** | Yes | Имя пользователя для базы данных <p><p>**Примечание**. Это строка, длина которой зависит от конкретной базы данных: <p><p>– DB2 для z/OS принимает 8-байтовую строку. <br>– DB2 для i принимает 10-байтовую строку. <br>– DB2 для Linux или UNIX принимает 8-байтовую строку. <br>– DB2 для Windows принимает 30-байтовую строку. | 
| **Пароль** | Yes | Пароль для базы данных | 
| **Шлюз** | Yes | Имя установленного локального шлюза данных <p><p>**Примечание**. Выберите это значение из списка, включающего все установленные шлюзы данных в вашей подписке Azure и группе ресурсов. | 
|||| 

Например: 

![Сведения о подключении к локальным базам данных](./media/connectors-create-api-db2/create-db2-on-premises-connection.png)

### <a name="view-output-tables"></a>Просмотр таблиц выходных данных

Чтобы вручную запустить приложение логики, на панели инструментов конструктора нажмите кнопку **Запустить**. Когда работа приложения логики завершится, вы сможете просмотреть выходные данные.

1. В меню приложения логики выберите **Обзор**. 

1. На вкладке **Сводка**, в разделе **Журнал запусков**, выберите последний запуск, который будет указан в списке первым. 

   ![Просмотр журнала выполнения](./media/connectors-create-api-db2/run-history.png)

1. В разделе **Запуск приложения логики** можно просмотреть состояние, а также входные и выходные данные для каждого этапа приложения логики. Разверните действие **Получить таблицы**.

   ![Разворачивание действия](./media/connectors-create-api-db2/expand-action-step.png)

1. Чтобы просмотреть входные данные, нажмите **Показать необработанные входные данные**. 

1. Чтобы просмотреть выходные данные, нажмите **Показать необработанные выходные данные**. 

   Выходные данные включают список таблиц. 
   
   ![Просмотр таблиц выходных данных](./media/connectors-create-api-db2/db2-connector-get-tables-outputs.png)

## <a name="get-row"></a>Получение строки

Чтобы получить одну запись из таблицы базы данных DB2, используйте действие **Получить строку** в приложении логики. Это действие выполняет оператор `SELECT WHERE` для базы данных DB2, например `SELECT FROM AREA WHERE AREAID = '99999'`.

1. Если вы еще не использовали действия DB2 в приложении логики, выполните инструкции из раздела [Добавление действия DB2 — получение таблиц](#add-db2-action), но добавьте действие **Получить строку**, а затем вернитесь к данному разделу. 

   После добавления действия **Получить строку** приложение логики будет выглядеть так:

   ![Действие "Получить строку"](./media/connectors-create-api-db2/db2-get-row-action.png)

1. Укажите значения для всех обязательных свойств (*). После выбора таблицы это действие показывает соответствующие свойства записей из этой таблицы.

   | Свойство | Обязательно | ОПИСАНИЕ | 
   |----------|----------|-------------| 
   | **Имя таблицы** | Yes | Таблица, содержащая нужную запись (в этом примере — "AREA") | 
   | **Идентификатор области** | Yes | Идентификатор нужной записи (в этом примере — 99999) | 
   |||| 

   ![Выбор таблицы](./media/connectors-create-api-db2/db2-get-row-action-select-table.png)

1. Завершив работу, нажмите кнопку **Сохранить** на панели инструментов конструктора. 

### <a name="view-output-row"></a>Просмотр строки выходных данных

Чтобы вручную запустить приложение логики, на панели инструментов конструктора нажмите кнопку **Запустить**. Когда работа приложения логики завершится, вы сможете просмотреть выходные данные.

1. В меню приложения логики выберите **Обзор**. 

1. На вкладке **Сводка**, в разделе **Журнал запусков**, выберите последний запуск, который будет указан в списке первым. 

1. В разделе **Запуск приложения логики** можно просмотреть состояние, а также входные и выходные данные для каждого этапа приложения логики. Разверните действие **Получить строку**.

1. Чтобы просмотреть входные данные, нажмите **Показать необработанные входные данные**. 

1. Чтобы просмотреть выходные данные, нажмите **Показать необработанные выходные данные**. 

   Выходные данные включают указанную строку. 
   
   ![Просмотр строки выходных данных](./media/connectors-create-api-db2/db2-connector-get-row-outputs.png)

## <a name="get-rows"></a>Получение строк

Чтобы получить все записи из таблицы базы данных DB2, используйте действие **Получить строки** в приложении логики. Это действие выполняет оператор `SELECT` для базы данных DB2, например `SELECT * FROM AREA`.

1. Если вы еще не использовали действия DB2 в приложении логики, выполните инструкции из раздела [Добавление действия DB2 — получение таблиц](#add-db2-action), но добавьте действие **Получить строки**, а затем вернитесь к данному разделу. 

   После добавления действия **Получить строки** приложение логики будет выглядеть так:

   ![Действие "Получить строки"](./media/connectors-create-api-db2/db2-get-rows-action.png)

1. Откройте список **Имя таблицы** и выберите нужную таблицу (в этом примере — "AREA"): 

   ![Выбор таблицы](./media/connectors-create-api-db2/db2-get-rows-action-select-table.png)

1. Чтобы задать фильтр или запросить результаты, нажмите **Показать расширенные параметры**.

1. Завершив работу, нажмите кнопку **Сохранить** на панели инструментов конструктора. 

### <a name="view-output-rows"></a>Просмотр строк выходных данных

Чтобы вручную запустить приложение логики, на панели инструментов конструктора нажмите кнопку **Запустить**. Когда работа приложения логики завершится, вы сможете просмотреть выходные данные.

1. В меню приложения логики выберите **Обзор**. 

1. На вкладке **Сводка**, в разделе **Журнал запусков**, выберите последний запуск, который будет указан в списке первым. 

1. В разделе **Запуск приложения логики** можно просмотреть состояние, а также входные и выходные данные для каждого этапа приложения логики. Разверните действие **Получить строки**.

1. Чтобы просмотреть входные данные, нажмите **Показать необработанные входные данные**. 

1. Чтобы просмотреть выходные данные, нажмите **Показать необработанные выходные данные**. 

   Выходные данные включают все записи из указанной таблицы.
   
   ![Просмотр строк выходных данных](./media/connectors-create-api-db2/db2-connector-get-rows-outputs.png)

## <a name="insert-row"></a>Вставка строки

Чтобы добавить одну запись в таблицу базы данных DB2, используйте действие **Вставить строку** в приложении логики. Это действие выполняет оператор `INSERT` для базы данных DB2, например `INSERT INTO AREA (AREAID, AREADESC, REGIONID) VALUES ('99999', 'Area 99999', 102)`.

1. Если вы еще не использовали действия DB2 в приложении логики, выполните инструкции из раздела [Добавление действия DB2 — получение таблиц](#add-db2-action), но добавьте действие **Вставить строку**, а затем вернитесь к данному разделу. 

   После добавления действия **Вставить строку** приложение логики будет выглядеть так:

   ![Действие "Вставить строку"](./media/connectors-create-api-db2/db2-insert-row-action.png)

1. Укажите значения для всех обязательных свойств (*). После выбора таблицы это действие показывает соответствующие свойства записей из этой таблицы. 

   Ниже приведены свойства для этого примера.

   | Свойство | Обязательно | ОПИСАНИЕ | 
   |----------|----------|-------------| 
   | **Имя таблицы** | Yes | Таблица, в которую требуется добавить запись, например "AREA" | 
   | **Идентификатор области** | Yes | Идентификатор добавляемой области, например 99999 | 
   | **Описание области** | Yes | Описание добавляемой области, например "Область 99999" | 
   | **Идентификатор региона** | Yes | Идентификатор добавляемого региона, например 102 | 
   |||| 

   Например: 

   ![Выбор таблицы](./media/connectors-create-api-db2/db2-insert-row-action-select-table.png)

1. Завершив работу, нажмите кнопку **Сохранить** на панели инструментов конструктора. 

### <a name="view-insert-row-outputs"></a>Просмотр выходных данных действия "Вставить строку"

Чтобы вручную запустить приложение логики, на панели инструментов конструктора нажмите кнопку **Запустить**. Когда работа приложения логики завершится, вы сможете просмотреть выходные данные.

1. В меню приложения логики выберите **Обзор**. 

1. На вкладке **Сводка**, в разделе **Журнал запусков**, выберите последний запуск, который будет указан в списке первым. 

1. В разделе **Запуск приложения логики** можно просмотреть состояние, а также входные и выходные данные для каждого этапа приложения логики. Разверните действие **Вставить строку**.

1. Чтобы просмотреть входные данные, нажмите **Показать необработанные входные данные**. 

1. Чтобы просмотреть выходные данные, нажмите **Показать необработанные выходные данные**. 

   Выходные данные включают запись, добавленную в указанную таблицу.
   
   ![Просмотр выходных данных со вставленной строкой](./media/connectors-create-api-db2/db2-connector-insert-row-outputs.png)

## <a name="update-row"></a>Обновление строки

Чтобы обновить одну запись в таблице базы данных DB2, используйте действие **Изменить строку** в приложении логики. Это действие выполняет оператор `UPDATE` для базы данных DB2, например `UPDATE AREA SET AREAID = '99999', AREADESC = 'Updated 99999', REGIONID = 102)`.

1. Если вы еще не использовали действия DB2 в приложении логики, выполните инструкции из раздела [Добавление действия DB2 — получение таблиц](#add-db2-action), но добавьте действие **Изменить строку**, а затем вернитесь к данному разделу. 

   После добавления действия **Изменить строку** приложение логики будет выглядеть так:

   ![Действие "Изменить строку"](./media/connectors-create-api-db2/db2-update-row-action.png)

1. Укажите значения для всех обязательных свойств (*). После выбора таблицы это действие показывает соответствующие свойства записей из этой таблицы. 

   Ниже приведены свойства для этого примера.

   | Свойство | Обязательно | ОПИСАНИЕ | 
   |----------|----------|-------------| 
   | **Имя таблицы** | Yes | Таблица, в которой требуется изменить запись, например "AREA" | 
   | **Идентификатор строки** | Yes | Идентификатор обновляемой записи, например 99999 | 
   | **Идентификатор области** | Yes | Новый идентификатор области, например 99999 | 
   | **Описание области** | Yes | Описание новой области, например "Обновленная 99999" | 
   | **Идентификатор региона** | Yes | Новый идентификатор региона, например 102 | 
   |||| 

   Например: 

   ![Выбор таблицы](./media/connectors-create-api-db2/db2-update-row-action-select-table.png)

1. Завершив работу, нажмите кнопку **Сохранить** на панели инструментов конструктора. 

### <a name="view-update-row-outputs"></a>Просмотр выходных данных действия "Изменить строку"

Чтобы вручную запустить приложение логики, на панели инструментов конструктора нажмите кнопку **Запустить**. Когда работа приложения логики завершится, вы сможете просмотреть выходные данные.

1. В меню приложения логики выберите **Обзор**. 

1. На вкладке **Сводка**, в разделе **Журнал запусков**, выберите последний запуск, который будет указан в списке первым. 

1. В разделе **Запуск приложения логики** можно просмотреть состояние, а также входные и выходные данные для каждого этапа приложения логики. Разверните действие **Изменить строку**.

1. Чтобы просмотреть входные данные, нажмите **Показать необработанные входные данные**. 

1. Чтобы просмотреть выходные данные, нажмите **Показать необработанные выходные данные**. 

   Выходные данные включают запись, обновленную в указанной таблице.
   
   ![Просмотр выходных данных с обновленной строкой](./media/connectors-create-api-db2/db2-connector-update-row-outputs.png)

## <a name="delete-row"></a>Удаление строки

Чтобы удалить одну запись из таблицы базы данных DB2, используйте действие **Удалить строку** в приложении логики. Это действие выполняет оператор `DELETE` для базы данных DB2, например `DELETE FROM AREA WHERE AREAID = '99999'`.

1. Если вы еще не использовали действия DB2 в приложении логики, выполните инструкции из раздела [Добавление действия DB2 — получение таблиц](#add-db2-action), но добавьте действие **Удалить строку**, а затем вернитесь к данному разделу. 

   После добавления действия **Удалить строку** приложение логики будет выглядеть так:

   ![Действие "Удалить строку"](./media/connectors-create-api-db2/db2-delete-row-action.png)

1. Укажите значения для всех обязательных свойств (*). После выбора таблицы это действие показывает соответствующие свойства записей из этой таблицы. 

   Ниже приведены свойства для этого примера.

   | Свойство | Обязательно | ОПИСАНИЕ | 
   |----------|----------|-------------| 
   | **Имя таблицы** | Yes | Таблица, из которой требуется удалить запись, например "AREA" | 
   | **Идентификатор строки** | Yes | Идентификатор удаляемой записи, например 99999 | 
   |||| 

   Например: 

   ![Выбор таблицы](./media/connectors-create-api-db2/db2-delete-row-action-select-table.png)

1. Завершив работу, нажмите кнопку **Сохранить** на панели инструментов конструктора. 

### <a name="view-delete-row-outputs"></a>Просмотр выходных данных действия "Удалить строку"

Чтобы вручную запустить приложение логики, на панели инструментов конструктора нажмите кнопку **Запустить**. Когда работа приложения логики завершится, вы сможете просмотреть выходные данные.

1. В меню приложения логики выберите **Обзор**. 

1. На вкладке **Сводка**, в разделе **Журнал запусков**, выберите последний запуск, который будет указан в списке первым. 

1. В разделе **Запуск приложения логики** можно просмотреть состояние, а также входные и выходные данные для каждого этапа приложения логики. Разверните действие **Удалить строку**.

1. Чтобы просмотреть входные данные, нажмите **Показать необработанные входные данные**. 

1. Чтобы просмотреть выходные данные, нажмите **Показать необработанные выходные данные**. 

   Выходные данные больше не включают запись, удаленную из указанной таблицы.
   
   ![Просмотр выходных данных без удаленной строки](./media/connectors-create-api-db2/db2-connector-delete-row-outputs.png)

## <a name="connector-reference"></a>Справочник по соединителям

См. дополнительные технические сведения о [триггерах, действиях и ограничениях, описываемых файлом Swagger соединителя](/connectors/db2/). 

## <a name="get-support"></a>Получение поддержки

* Если у вас возникли вопросы, то посетите [форум Azure Logic Apps](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).
* Отправить идею по поводу возможности или проголосовать за нее вы можете на [сайте отзывов пользователей Logic Apps](http://aka.ms/logicapps-wish).

## <a name="next-steps"></a>Дополнительная информация

* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
