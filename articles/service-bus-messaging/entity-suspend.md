---
title: Приостановка сущностей обмена сообщениями служебной шины Azure | Документация Майкрософт
description: Приостановка и повторная активация сущностей обмена сообщениями служебной шины Azure.
services: service-bus-messaging
documentationcenter: ''
author: clemensv
manager: timlt
editor: ''
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2018
ms.author: spelluru
ms.openlocfilehash: bd75fd5c34a3518f6da0dbd56eca2ad152d60ba9
ms.sourcegitcommit: b7e5bbbabc21df9fe93b4c18cc825920a0ab6fab
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2018
ms.locfileid: "47405722"
---
# <a name="suspend-and-reactivate-messaging-entities-disable"></a>Приостановка и повторная активация сущностей обмена сообщениями (отключение)

Очереди, разделы и подписки можно временно приостанавливать. Приостановка помещает сущность в отключенное состояние, при котором все сообщения остаются в хранилище. Однако удалить или добавить сообщения нельзя, а соответствующие операции протокола выдают ошибки.

Приостановка сущности обычно осуществляется, если нужно срочно выполнить какие-либо задачи администрирования. Одним из сценариев является наличие неисправного приемника, который принимает сообщения из очереди, не может их обработать и при этом неправильно завершает сообщения и удаляет их. Если обнаружено такое поведение, для очереди можно отключить операции получения до тех пор, пока не будет развернут исправленный код и дальнейшую потерю данных из-за неправильного кода можно будет предотвратить.

Приостановку или повторную активацию может выполнить либо пользователь, либо система. Система приостанавливает сущности только из-за серьезных причин, связанных с администрированием, например при достижении предельной суммы расходов на подписку. Отключенные системой сущности не могут быть повторно активированы пользователем, но восстанавливаются, когда причина приостановки устранена.

На портале состояние можно изменить в разделе **Свойства** соответствующей сущности. На следующем снимке экрана показан переключатель очереди:

![][1]

Портал позволяет отключать очереди только полностью. Также можно отключить операции отправки и получения по отдельности, используя API служебной шины [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) в пакете SDK для .NET Framework, или с помощью шаблона Azure Resource Manager через Azure CLI или Azure PowerShell.

## <a name="suspension-states"></a>Состояния приостановки

Для очереди можно установить следующие состояния.

-   **Active** (активно): очередь активна.
-   **Disabled** (отключено): очередь приостановлена.
-   **SendDisabled** (отправка отключена): очередь частично приостановлена, при этом получение разрешено.
-   **ReceiveDisabled** (получение отключено): очередь частично приостановлена, при этом отправка разрешена.

Для подписок и разделов можно задать только состояния **Active** и **Disabled**.

Перечисление [EntityStatus](/dotnet/api/microsoft.servicebus.messaging.entitystatus) также определяет набор переходных состояний, которые могут устанавливаться только системой. В следующем примере показана команда PowerShell для отключения очереди. Команда повторной активации эквивалентна установке значения **Active** для параметра `Status`.

```powershell
$q = Get-AzureRmServiceBusQueue -ResourceGroup mygrp -NamespaceName myns -QueueName myqueue

$q.Status = "Disabled"

Set-AzureRmServiceBusQueue -ResourceGroup mygrp -NamespaceName myns -QueueName myqueue -QueueObj $q
```

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения об обмене сообщениями через служебную шину см. в следующих статьях:

* [Базовая информация о служебной шине](service-bus-fundamentals-hybrid-solutions.md)
* [Очереди, разделы и подписки служебной шины](service-bus-queues-topics-subscriptions.md)
* [Начало работы с очередями служебной шины](service-bus-dotnet-get-started-with-queues.md)
* [Как использовать разделы и подписки служебной шины](service-bus-dotnet-how-to-use-topics-subscriptions.md)

[1]: ./media/entity-suspend/queue-disable.png

