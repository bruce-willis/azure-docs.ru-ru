---
title: Управление учетными записями хранения Azure Stack | Документация Майкрософт
description: Сведения о поиске, восстановлении, освобождении учетных записей хранения Azure Stack и управлении ими.
services: azure-stack
documentationcenter: ''
author: mattbriggs
manager: femila
editor: ''
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: PowerShell
ms.topic: get-started-article
ms.date: 09/28/2018
ms.author: mabrigg
ms.reviewer: xiaofmao
ms.openlocfilehash: 35c15613192ac12a7d4c64cbe28f62200724d311
ms.sourcegitcommit: f31bfb398430ed7d66a85c7ca1f1cc9943656678
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/28/2018
ms.locfileid: "47452281"
---
# <a name="manage-storage-accounts-in-azure-stack"></a>Управление учетными записями хранения в Azure Stack
В этой статье приведены сведения об управлении учетными записями хранения, включая их поиск, восстановление и освобождение емкости хранилища в соответствии с бизнес-потребностями.

## <a name="find"></a>Поиск учетной записи хранения
Чтобы просмотреть список учетных записей хранения в регионе в Azure Stack, сделайте следующее:

1. Войдите на [портал администрирования](https://adminportal.local.azurestack.external).

2. Выберите **Все службы** > **Управление регионами** в разделе **Администрирование**.

3. В списке **Поставщики ресурсов** выберите **Хранилище**.
   
   ![Поставщик ресурсов хранилища](media/azure-stack-manage-storage-accounts/image1.png)

5. В рабочей области **Хранилище** выберите **Учетные записи хранения**.
   
   ![](media/azure-stack-manage-storage-accounts/image2.png)
   
   В колонке отобразятся учетные записи хранения в этом регионе.
   
   ![](media/azure-stack-manage-storage-accounts/image4.png)

По умолчанию отображаются первые 10 учетных записей. Чтобы просмотреть другие учетные записи, щелкните ссылку **Загрузить еще** в нижней части списка.

Или

Если вы заинтересованы в определенной учетной записи хранения, **отфильтруйте список и получите только соответствующие**.


**Чтобы отфильтровать учетные записи, сделайте следующее:**

1. Выберите **Фильтр** в верхней части панели.
2. На панели "Фильтр" можно указать **имя учетной записи**, **идентификатор подписки или **состояние**, чтобы на основе этих критериев отобразить список учетных записей хранения. Укажите нужные значения.
3. Нажмите кнопку **Обновить**. Список должен обновиться соответствующим образом.
   
    ![](media/azure-stack-manage-storage-accounts/image5.png)
4. Чтобы сбросить фильтр, выберите **Фильтр**, очистите выбранные элементы и нажмите кнопку "Обновить".

Текстовое поле поиска (в верхней части панели со списком учетных записей хранения) позволяет выделить нужный текст в списке. Это можно использовать, если полное имя или идентификатор трудно найти.

Вы можете ввести здесь любой текст, чтобы найти нужную учетную запись.

![](media/azure-stack-manage-storage-accounts/image6.png)

## <a name="look-at-account-details"></a>Просмотр сведений учетной записи
Выбрав нужные учетные записи, вы можете щелкнуть любую из них, чтобы просмотреть определенные сведения. После этого откроется новая панель со сведениями об учетной записи, например ее тип, время создания, расположение и т. д.

![](media/azure-stack-manage-storage-accounts/image7.png)

## <a name="recover-a-deleted-account"></a>Восстановление удаленной учетной записи
В некоторых ситуациях вам, возможно, потребуется восстановить удаленную учетную запись.

В Azure Stack это сделать довольно просто:

1. Перейдите к списку учетных записей хранения. Дополнительные сведения см. в разделе [Поиск учетной записи хранения](#find) этой статьи.
2. Найдите эту конкретную учетную запись в списке. Вам, возможно, потребуется отфильтровать его.
3. Проверьте *состояние* учетной записи. Оно должно быть таким: **Удалено**.
4. Выберите учетную запись, после чего откроется панель сведений о ней.
5. В верхней части этой панели найдите кнопку **Восстановить** и нажмите ее.
6. Выберите **Да** для подтверждения.
   
   ![](media/azure-stack-manage-storage-accounts/image8.png)
7. После этого должно отобразиться оповещение о *выполнении восстановления*. Это означает, что процесс выполняется успешно.
   Кроме того, вы можете выбрать значок колокольчика в верхней части окна портала, чтобы просмотреть оповещения о ходе выполнения.
   
   ![](media/azure-stack-manage-storage-accounts/image9.png)
   
   После синхронизации восстановленную учетную запись можно снова использовать.

### <a name="some-gotchas"></a>Некоторые проблемы
* Состояние удаленной учетной записи — **out of retention** (Срок хранения истек).
  
  Это состояние означает, что срок хранения учетной записи истек и ее невозможно восстановить.
* Удаленная учетная запись не отображается в списке.
  
  Учетная запись может не отображаться в списке учетных записей после того, как она была удалена сборщиком мусора. В этом случае восстановить ее невозможно. Дополнительные сведения см. в разделе [Освобождение емкости](#reclaim) этой статьи.

## <a name="set-the-retention-period"></a>Установка срока хранения
В параметрах срока хранения оператор облачной среди может указать время (0–9999 дней), в течение которого можно восстановить удаленную учетную запись. По умолчанию срок хранения составляет 0 дней. Если задать этому параметру значение 0, срок хранения всех удаленных учетных записей мгновенно истекает и они отмечаются для периодической сборки мусора.

**Чтобы изменить срок хранения, сделайте следующее:**

1. Войдите на [портал администрирования](https://adminportal.local.azurestack.external).
2. Выберите **Все службы** > **Управление регионами** в разделе **Администрирование**.
3. В списке **Поставщики ресурсов** выберите **Хранилище**.
4. Чтобы открыть панель параметров, нажмите кнопку **Параметры** в верхней части.
5. Выберите **Конфигурация**, а затем измените значение срока хранения.

   Задайте количество дней, а затем сохраните изменение.
   
   Это значение немедленно вступает в силу и применяется ко всему региону.

   ![](media/azure-stack-manage-storage-accounts/image10.png)

## <a name="reclaim"></a>Освобождение емкости
Один из недостатков срока хранения заключается в том, что удаленная учетная запись продолжает потреблять емкость до истечения срока. Оператору облачной среды может потребоваться освободить емкость удаленной учетной записи до истечения срока хранения.

Это можно сделать на портале Azure или с помощью PowerShell.

**Чтобы освободить емкость на портале, сделайте следующее:**
1. Перейдите на панель с учетными записями хранения. Дополнительные сведения см. в разделе [Поиск учетной записи хранения](#find).
2. Выберите **Reclaim space** (Освобождение пространства) в верхней части панели.
3. Прочтите сообщение и нажмите кнопку **ОК**.

    ![](media/azure-stack-manage-storage-accounts/image11.png)
4. Дождитесь, пока не отобразится уведомление об успешном выполнении, или щелкните значок колокольчика на портале.

    ![](media/azure-stack-manage-storage-accounts/image12.png)
5. Обновите страницу "Учетные записи хранения". После этого удаленные учетные записи больше не отображаются в списке, так как они очищены.

С помощью PowerShell вы можете явно переопределить срок хранения и мгновенно освободить емкость.

**Чтобы освободить емкость с помощью PowerShell, сделайте следующее:**   

1. Проверьте, установлена и настроена ли среда Azure PowerShell. Если нет, сделайте следующее: 
   * Чтобы установить последнюю версию Azure PowerShell и связать ее с подпиской Azure, см. сведения в статье [Общие сведения об Azure PowerShell](http://azure.microsoft.com/documentation/articles/powershell-install-configure/).
   Дополнительные сведения о командлетах Azure Resource Manager см. в статье [Управление ресурсами с помощью Azure PowerShell и Resource Manager](http://go.microsoft.com/fwlink/?LinkId=394767).
2. Выполните следующие командлеты.

> [!NOTE]  
> При выполнении этих командлетов вы окончательно удалите учетную запись и ее содержимое. Восстановить его будет невозможно. Используйте этот командлет с осторожностью.

```PowerShell  
    $farm_name = (Get-AzsStorageFarm)[0].name
    Start-AzsReclaimStorageCapacity -FarmName $farm_name
````

Дополнительные сведения см. в [документации по PowerShell для Azure Stack](https://docs.microsoft.com/powershell/module/azurerm.azurestackstorage).
 

## <a name="next-steps"></a>Дополнительная информация

 - Сведения об управлении разрешениями см. в статье [Управление доступом на основе ролей](azure-stack-manage-permissions.md).
 - Сведения об управлении емкостью хранилища для Azure Stack см. в [этой статье](azure-stack-manage-storage-shares.md).