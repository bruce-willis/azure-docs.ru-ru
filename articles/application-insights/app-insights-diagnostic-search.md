---
title: Поиск в Azure Application Insights | Документация Майкрософт
description: Поиск и фильтрация необработанных данных телеметрии, отправляемых веб-приложением.
services: application-insights
documentationcenter: ''
author: mrbullwinkle
manager: carmonm
ms.assetid: 2a437555-8043-45ec-937a-225c9bf0066b
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: conceptual
ms.date: 09/20/2018
ms.author: mbullwin
ms.openlocfilehash: 1bf716d4e5a37739de2e820725449be2576054ea
ms.sourcegitcommit: 4ecc62198f299fc215c49e38bca81f7eb62cdef3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "47038781"
---
# <a name="using-search-in-application-insights"></a>Поиск в Application Insights
Поиск — это функция [Application Insights](app-insights-overview.md), которая позволяет искать и изучать отдельные элементы телеметрии, например просмотры страниц, исключения и веб-запросы. Также можно просматривать журнал трассировки и события, которые были закодированы.

(Для более сложных запросов к данным используйте [Analytics](app-insights-analytics-tour.md).)

## <a name="where-do-you-see-search"></a>Как найти функцию поиска?

### <a name="in-the-azure-portal"></a>На портале Azure

Поиск по журналу диагностики можно открыть в колонке "Обзор" Application Insights вашего приложения:

![Откройте поиск по журналу диагностики](./media/app-insights-diagnostic-search/001.png)

![Скриншот графиков поиска по диагностическим данным](./media/app-insights-diagnostic-search/002.png)

Основная часть колонки поиска по диагностическим данных — это список элементов телеметрии: запросы сервера, просмотры страниц, пользовательские события, которые были закодированы, и т. д. В верхней части списка находится сводная диаграмма, отображающая количество событий в динамике.

Нажмите кнопку "Обновить", чтобы просмотреть новые события.

### <a name="in-visual-studio"></a>В Visual Studio

В Visual Studio также есть окно поиска по Application Insights. Его удобно использовать для отображения событий телеметрии, созданных отлаживаемым приложением. Оно также может показывать события, собранные из опубликованного приложения на портале Azure.

Откройте окно "Поиск" в Visual Studio.

![Как открыть окно "Поиск по Application Insights" в Visual Studio](./media/app-insights-diagnostic-search/32.png)

Функции в окне поиска схожи с функциями на веб-портале:

![Окно "Поиск по Application Insights" в Visual Studio](./media/app-insights-diagnostic-search/34.png)

Вкладка Track Operation (Отслеживание операции) отображается при открытии запроса или представления страницы. Операция — это последовательность событий, связанных с отдельным запросом или представлением страницы. В одну операцию могут входить, например, вызовы зависимостей, исключения, журналы трассировки и пользовательские события. На вкладке Track Operation (Отслеживание операции) графически показано время и продолжительность этих событий относительно запроса или представления страницы. 

## <a name="inspect-individual-items"></a>Проверка отдельных элементов

Выберите любой элемент телеметрии для просмотра ключевых полей и связанных элементов.

![Скриншот запроса отдельных зависимостей](./media/app-insights-diagnostic-search/003.png)

Это окно просмотра сведений о сквозных транзакциях:

![Скриншот окна просмотра сведений о сквозных транзакциях.](./media/app-insights-diagnostic-search/004.png)

## <a name="filter-event-types"></a>Фильтрация по типам событий
Откройте колонку "Фильтр" и выберите типы событий, которые требуется просмотреть. (Если впоследствии потребуется восстановить фильтры, с которыми вы открыли колонку, нажмите кнопку сброса).

![Щелкните "Фильтр" и укажите типы элементов телеметрии](./media/app-insights-diagnostic-search/02-filter-req.png)

Ниже приведены типы событий.

* **Трассировка**  -  [журналы диагностики](app-insights-asp-net-trace-logs.md), в том числе TrackTrace, log4Net, NLog и вызовы System.Diagnostic.Trace.
* **Запрос** — HTTP-запросы, полученные серверным приложением, включая страницы, скрипты, изображения, файлы стилей и данные. Эти события используются для создания обзорных диаграмм запросов и ответов.
* **Просмотр страницы**  -  [элемент телеметрии, отправляемый веб-клиентом](app-insights-javascript.md) и используемый для создания отчетов о просмотрах страниц. 
* **Пользовательское событие** — при вставке в код вызовов TrackEvent() для [отслеживания использования](app-insights-api-custom-events-metrics.md) эти вызовы можно найти здесь.
* **Исключение** — неперехваченные [исключения на сервере](app-insights-asp-net-exceptions.md) и те, которые зарегистрированы с помощью метода TrackException().
* **Зависимость**  -  [вызовы из серверного приложения](app-insights-asp-net-dependencies.md) к другим службам, таким как интерфейсы REST API или базы данных, а также вызовы AJAX из [клиентского кода](app-insights-javascript.md).
* **Доступность** — результаты [тестов доступности](app-insights-monitor-web-app-availability.md).

## <a name="filter-on-property-values"></a>Фильтрация на основе значений свойств
Можно фильтровать события по значениям их свойств. Доступные свойства зависят от выбранных типов событий. 

Например, можно выбрать запросы с определенным кодом ответа. 

![Разверните свойство и выберите значение](./media/app-insights-diagnostic-search/03-response500.png)

Если не выбрать ни одно из значений конкретного свойства, эффект будет таким же, как и при выборе всех значений. Фильтрация по этому свойству будет отключена.

### <a name="narrow-your-search"></a>Сужение области поиска
Обратите внимание, что счетчики справа от значений фильтра показывают число вхождений в текущем отфильтрованном наборе. 

В этом примере ясно, что запрос Rpt/Employees вернул в большинстве случаев ошибку с кодом 500:

![Разверните свойство и выберите значение](./media/app-insights-diagnostic-search/04-failingReq.png)

## <a name="find-events-with-the-same-property"></a>Поиск событий с одним и тем же свойством
Поиск всех элементов с одинаковым значением свойства:

![Щелкните правой кнопкой мыши свойство](./media/app-insights-diagnostic-search/12-samevalue.png)

## <a name="search-the-data"></a>Поиск данных

> [!NOTE]
> Чтобы написать более сложный запрос, щелкните [**Аналитика**](app-insights-analytics-tour.md) в верхней части колонки "Поиск".
> 

В любом из значений свойств можно искать слова. Это особенно полезно, если вы написали [пользовательские события](app-insights-api-custom-events-metrics.md) со значениями свойств. 

Можно задать временной диапазон, так как поиск в более коротком диапазоне выполняется быстрее. 

![Откройте поиск по журналу диагностики](./media/app-insights-diagnostic-search/appinsights-311search.png)

Выполните поиск по полным словам, а не по подстрокам. Специальные символы заключайте в кавычки.

| строка | *не* найдена по словам | но найдена по словам |
| --- | --- | --- |
| HomeController.About |home<br/>controller<br/>out | homecontroller<br/>about<br/>"homecontroller.about"|
|США|Сое<br/>диненные|соединенные<br/>штаты<br/>соединенные AND штаты<br/>"соединенные штаты"

Вот доступные поисковые выражения:

| Пример запроса | Результат |
| --- | --- |
| `apple` |Поиск всех событий в диапазоне времени, поля которых включают слово "apple". |
| `apple AND banana` <br/>`apple banana` |Поиск событий, содержащих оба слова. Используйте "AND" заглавными буквами, а не "and". <br/>Короткая форма. |
| `apple OR banana` |Поиск событий, содержащих любое из этих слов. Используйте «OR» заглавными буквами, а не «or». |
| `apple NOT banana` |Поиск событий, содержащих только одно из этих слов, но не содержащих другое. |

## <a name="sampling"></a>Выборка
Если приложение генерирует много данных телеметрии (а вы используете пакет SDK ASP.NET 2.0.0-beta3 или более поздней версии), модуль адаптивной выборки автоматически сокращает объем отправляемых на портал данных, пересылая только репрезентативную часть событий. При этом связанные с тем же запросом события отбираются как группа, что позволяет перемещаться между связанными событиями. 

[Дополнительная информация о выборке](app-insights-sampling.md).

## <a name="create-work-item"></a>Создание рабочего элемента
В GitHub или Azure DevOps можно создать ошибку и указать в ней сведения из любого элемента телеметрии. 

![Щелкните "Создать рабочий элемент", отредактируйте поля и нажмите кнопку "ОК".](./media/app-insights-diagnostic-search/42.png)

Если вы делаете это в первый раз, вам будет предложено настроить ссылку на вашу организацию и проект в Azure DevOps.

![Укажите URL-адрес Azure DevOps Services и имя проекта, после чего щелкните "Авторизовать".](./media/app-insights-diagnostic-search/41.png)

(Можно также настроить ссылку в колонке "Рабочие элементы".)

## <a name="send-more-telemetry-to-application-insights"></a>Передача дополнительных элементов телеметрии в Application Insights
В дополнение к стандартным элементам телеметрии, передаваемым пакетом SDK Application Insights, можно сделать следующее.

* Выполнять трасcировку журналов, используя избранную платформу ведения журнала в [.NET](app-insights-asp-net-trace-logs.md) или [Java](app-insights-java-trace-logs.md). Благодаря этому можно будет выполнить поиск в журнале трассировки и сопоставить результаты с просмотрами страниц, исключениями и другими событиями. 
* [Создавать код](app-insights-api-custom-events-metrics.md) для отправки пользовательских событий, сведений о просмотрах страниц и исключениях. 

[Подробнее об отправке журналов и пользовательских данных телеметрии в Application Insights](app-insights-asp-net-trace-logs.md).

## <a name="questions"></a>Вопросы и ответы
### <a name="limits"></a>Какой объем данных сохраняется?

Ознакомьтесь со [сводной таблицей ограничений](app-insights-pricing.md#limits-summary).

### <a name="how-can-i-see-post-data-in-my-server-requests"></a>Как просмотреть данные POST в запросах к серверу?
Мы не заносим в журнал данные POST автоматически, но вы можете использовать [вызовы TrackTrace или вызовы журнала](app-insights-asp-net-trace-logs.md). Поместите данные POST в параметр сообщения. Сообщения нельзя отфильтровать тем же способом, как это делается для свойств, но предельный размер больше.

## <a name="video"></a>Видео

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/112/player]

## <a name="add"></a>Дальнейшие действия
* [Создание сложных запросов в Analytics](app-insights-analytics-tour.md)
* [Журналы, исключения и пользовательские средства диагностики для ASP.NET в Application Insights](app-insights-asp-net-trace-logs.md)
* [Наблюдение за доступностью и скоростью реагирования веб-сайта](app-insights-monitor-web-app-availability.md)
* [Устранение неполадок](app-insights-troubleshoot-faq.md)
