---
title: Удаленное подключение к узлу кластера Azure Service Fabric | Документация Майкрософт
description: Узнайте, как установить удаленное подключение к экземпляру масштабируемого набора (узел кластера Service Fabric).
services: service-fabric
documentationcenter: .net
author: aljo-microsoft
manager: timlt
editor: ''
ms.assetid: 5441e7e0-d842-4398-b060-8c9d34b07c48
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: conceptual
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 03/23/2018
ms.author: aljo
ms.openlocfilehash: 28424f9a7a0f77882ee3360c5599549303075c18
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34642579"
---
# <a name="remote-connect-to-a-virtual-machine-scale-set-instance-or-a-cluster-node"></a>Удаленное подключение к экземпляру масштабируемого набора виртуальных машин или узлу кластера
В кластере Service Fabric в Azure для каждого определяемого типа узла кластера [настраивается отдельный масштаб виртуальных машин](service-fabric-cluster-nodetypes.md).  Вы можете установить удаленное подключение к определенным экземплярам масштабируемого набора (узлам кластера).  В отличие от одноэкземплярных виртуальных машин, экземпляры масштабируемых наборов не имеют собственных виртуальных IP-адресов. Поэтому поиск IP-адреса и порта, которые можно использовать для удаленного подключения к определенному экземпляру, может оказаться непростой задачей.

Чтобы найти IP-адрес и порт, которые можно использовать для удаленного подключения к определенному экземпляру, выполните следующие действия.

1. Получите правила NAT для входящих подключений для протокола удаленного рабочего стола (RDP).

    Обычно у каждого типа узла, определенного в кластере, есть собственные виртуальные IP-адреса и выделенная подсистема балансировки нагрузки. По умолчанию имя подсистемы балансировки нагрузки для типа узла имеет следующий формат: *LB-{имя кластера}-{тип узла}*. Например, *LB-mycluster-FrontEnd*. 
    
    На странице подсистемы балансировки нагрузки на портале Azure выберите **Параметры** > **Правила преобразования сетевых адресов для входящих подключений**: 

    ![Правила NAT для входящих подключений подсистемы балансировки нагрузки](./media/service-fabric-cluster-remote-connect-to-azure-cluster-node/lb-window.png)

    На следующем снимке экрана показаны правила NAT для входящих подключений для типа узла с именем FrontEnd: 

    ![Правила NAT для входящих подключений подсистемы балансировки нагрузки](./media/service-fabric-cluster-remote-connect-to-azure-cluster-node/nat-rules.png)

    Для каждого узла IP-адрес отображается в столбце **Назначение**, столбец **Целевой объект** предоставляет экземпляр масштабируемого набора, а столбец **Служба** содержит номер порта. При удаленном подключении каждому узлу в возрастающем порядке выделяется порт, начиная с порта 3389.

    Кроме того, можно найти правила NAT в разделе `Microsoft.Network/loadBalancers` шаблона Resource Manager для кластера.
    
2. Чтобы проверить сопоставление входного и целевого портов узла, щелкните его правило и просмотрите значение **целевого порта**. На следующем снимке экрана показано правило NAT для входящих подключений для узла **FrontEnd (Instance 1)** из предыдущего шага. Обратите внимание, что несмотря на то, что номер порта (входящий трафик) — 3390, целевой порт сопоставляется с портом 3389, портом для службы протокола удаленного рабочего стола на целевом сервере.  

    ![Сопоставление целевых портов](./media/service-fabric-cluster-remote-connect-to-azure-cluster-node/port-mapping.png)

    По умолчанию для кластеров Windows целевым портом является порт 3389, который сопоставляется со службой протокола удаленного рабочего стола на целевом узле. Для кластеров Linux целевым портом является порт 22, который сопоставляется со службой Secure Shell (SSH).

3. Установите удаленное подключение к определенному узлу (экземпляр масштабируемого набора). Можно использовать имя пользователя и пароль, заданные при создании кластера, или любые другие настроенные учетные данные. 

    На следующем снимке экрана показано подключение к удаленному рабочему столу к узлу **FrontEnd (Instance 1)** в кластере Windows:
    
    ![Подключение к удаленному рабочему столу](./media/service-fabric-cluster-remote-connect-to-azure-cluster-node/rdp-connect.png)

    К узлам Linux можно подключиться с помощью SSH (для краткости приведенный ниже пример повторно использует тот же IP-адрес и порт):

    ``` bash
    ssh SomeUser@40.117.156.199 -p 3390
    ```


На следующем этапе ознакомьтесь с указанными ниже статьями:
* Дополнительные сведения о возможности развертывания в любом месте и сравнении с кластерами под управлением Azure см. в статье [Создание кластеров Service Fabric в Windows Server или Linux](service-fabric-deploy-anywhere.md).
* Дополнительные сведения о безопасности кластеров см. в статье [Сценарии защиты кластера Service Fabric](service-fabric-cluster-security.md).
* [Обновление значений диапазона портов RDP](./scripts/service-fabric-powershell-change-rdp-port-range.md) в кластере виртуальных машин после развертывания
* [Обновление имени пользователя и пароля администратора](./scripts/service-fabric-powershell-change-rdp-user-and-pw.md) для виртуальных машин кластера

