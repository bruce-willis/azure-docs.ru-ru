---
title: Целевые показатели масштабируемости и производительности службы файлов Azure | Документация Майкрософт
description: 'Ознакомьтесь с такими целевыми показателями масштабируемости и производительности службы файлов Аzure: емкость, частота запросов и предельная входящая и исходящая пропускная способность.'
services: storage
documentationcenter: na
author: wmgries
manager: aungoo
editor: tamram
ms.service: storage
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage
ms.date: 7/19/2018
ms.author: wgries
ms.openlocfilehash: 8937b0cfc620114c602278a3f8989ba1f3f60685
ms.sourcegitcommit: 4e5ac8a7fc5c17af68372f4597573210867d05df
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/20/2018
ms.locfileid: "39173730"
---
# <a name="azure-files-scalability-and-performance-targets"></a>Целевые показатели масштабируемости и производительности службы файлов Azure
[Служба файлов Azure](storage-files-introduction.md) предлагает полностью управляемые общие файловые ресурсы в облаке, доступ к которым можно получить с помощью стандартного отраслевого протокола SMB. В этой статье описываются целевые показатели масштабируемости и производительности службы файлов Azure и службы синхронизации файлов Azure.

Приведенные здесь целевые показатели масштабируемости и производительности предельно высоки, но на них могут оказывать негативное воздействие другие параметры вашего развертывания. Например, пропускная способность по файлу может быть ограничена не только серверами, на которых размещена служба файлов Azure, но и доступной пропускной способностью вашей сети. Мы настоятельно рекомендуем протестировать модель использования, чтобы определить, соответствуют ли показатели масштабируемости и производительности службы файлов Azure вашим требованиям. Мы также стремимся постепенно увеличивать предельные показатели. Мы ждем ваших отзывов о том, какие предельные показатели вы хотели бы увеличить. Отзывы можно оставить в комментариях ниже или на форуме [UserVoice службы файлов Azure](https://feedback.azure.com/forums/217298-storage/category/180670-files).

## <a name="azure-storage-account-scale-targets"></a>Целевые показатели масштабируемости для учетной записи хранения Azure
Учетная запись хранения Azure является родительским объектом общей папки Azure. Учетная запись хранения представляет собой пул носителей в Azure, которые можно использовать для хранения данных в разных службах хранения, включая службу файлов Azure. Другими службами для хранения данных в учетных записях хранения являются хранилище BLOB-объектов Azure, хранилище очередей Azure и табличное хранилище Azure. Следующие целевые показатели касаются всех служб хранения, которые сохраняют данные в учетных записях хранения:

[!INCLUDE [azure-storage-limits](../../../includes/azure-storage-limits.md)]

[!INCLUDE [azure-storage-limits-azure-resource-manager](../../../includes/azure-storage-limits-azure-resource-manager.md)]

> [!Important]  
> Если использовать средства учетной записи хранения в других службах хранения, это влияет на общие папки Azure вашей учетной записи хранения. Например, при достижении максимальной емкости учетной записи хранения в службе хранилища BLOB-объектов Azure вы не сможете создать файлы в общей папке Azure, даже если ее размер не превышает максимального.

## <a name="azure-files-scale-targets"></a>Целевые показатели масштабируемости службы файлов Azure
[!INCLUDE [storage-files-scale-targets](../../../includes/storage-files-scale-targets.md)]

## <a name="azure-file-sync-scale-targets"></a>Целевые показатели масштабируемости службы "Синхронизация файлов Azure"
Мы пытались максимально расширить границы использования службы "Синхронизация файлов Azure", но это удалось не во всех случаях. В таблице ниже указаны ограничения производительности во время нашего тестирования и жесткие ограничения целевых показателей:

[!INCLUDE [storage-sync-files-scale-targets](../../../includes/storage-sync-files-scale-targets.md)]

### <a name="azure-file-sync-performance-metrics"></a>Метрики производительности службы синхронизации файлов Azure
Так как агент службы синхронизации файлов Azure работает на компьютере под управлением Windows Server, который подключается к общим папкам Azure, эффективная синхронизация зависит от ряда факторов в вашей инфраструктуре: Windows Server и базовой конфигурации диска, пропускной способности сети между сервером и хранилищем Azure, размера файла, общего размера набора данных и активности в наборе данных. Так как служба синхронизации файлов Azure работает на уровне файлов, характеристики производительности решения на основе этой службы лучше измеряются в количестве обрабатываемых объектов (файлов и каталогов) в секунду. 
 
Для службы синхронизации файлов Azure производительность имеет решающее значение на двух этапах:
1. **Исходная одноразовая подготовка**. Сведения об оптимальном развертывании для оптимизации производительности при начальной подготовке см. в разделе [Подключение с помощью службы синхронизации файлов Azure](storage-sync-files-deployment-guide.md#onboarding-with-azure-file-sync).
2. **Непрерывная синхронизация**. После первоначального добавления данных в общие папки Azure служба синхронизации файлов Azure синхронизирует несколько конечных точек.

Чтобы помочь вам спланировать развертывание для каждого из этапов, ниже приведены результаты, полученные во время внутреннего тестирования в системе со следующей конфигурацией.
| Конфигурация системы |  |
|-|-|
| ЦП | 64 виртуальных ядер с кэшем L3 на 64 МиБ |
| Память | 128 ГБ |
| Диск | Диски SAS с RAID 10 и кэшем, работающем от аккумулятора |
| Сеть | Сеть 1 Гбит/с |
| Рабочая нагрузка | Файловый сервер общего назначения|

| Одноразовая начальная подготовка  |  |
|-|-|
| Число объектов | 10 млн объектов | 
| Размер набора данных| ~4 ТиБ |
| Средний размер файлов | ~500 КиБ (самый большой файл: 100 ГиБ) |
| Пропускная способность отправки | 15 объектов в секунду |
| Пропускная способность скачивания пространств имен* | 350 объектов в секунду |
 
* При создании новой конечной точки сервера агент синхронизации файлов Azure не скачивает содержимое файла. Сначала он синхронизирует полное пространство имен, а затем запускает фоновый вызов для скачивания файлов, либо полностью, либо, если включено распределение по уровням облака, в политику распределения по уровням облака, установленную на конечной точке сервера.

| Непрерывная синхронизация  |   |
|-|--|
| Количество синхронизированных объектов| 125 000 объектов (~1 % обновления) | 
| Размер набора данных| 50 ГиБ |
| Средний размер файлов | ~500 КиБ |
| Пропускная способность отправки | 20 объектов в секунду |
| Полная пропускная способность скачивания* | 30 объектов в секунду |
 
* Если включено распределение по уровням облака, вы, скорее всего, будете наблюдать лучшую производительность, так как скачиваются только некоторые данные файлов. Служба синхронизации файлов Azure скачивает данные кэшированных файлов только при их изменении в любой из конечных точек. Для любых многоуровневых или вновь созданных файлов агент не скачивает данные файла и вместо этого синхронизирует пространство имен со всеми конечными точками сервера. Агент также поддерживает частичное скачивание многоуровневых файлов по мере получения доступа к ним пользователем. 
 
> [!Note]  
> Цифры выше не являются показателем наблюдаемой производительности. Фактическая производительность будет зависеть от нескольких факторов, как указано в начале этого раздела.

В качестве общего руководства по развертыванию вы должны учитывать следующие моменты:
- Пропускная способность объекта приблизительно масштабируется пропорционально количеству групп синхронизации на сервере. Разделение данных на несколько групп синхронизации на сервере улучшает пропускную способность, которая также ограничена сервером и сетью.
- Пропускная способность объекта обратно пропорциональна пропускной способности в МиБ в секунду. Для файлов меньшего размера вы получите более высокую пропускную способность с точки зрения количества объектов, обработанных в секунду, но меньшую пропускную способность в МиБ в секунду. И наоборот, для файлов большего размера будет обработано меньше объектов в секунду, но с более высокой пропускной способностью в МиБ в секунду. Пропускная способность в МиБ в секунду ограничена целевыми объектами масштабирования файлов Azure. 

## <a name="see-also"></a>См. также
- [Планирование развертывания службы файлов Azure](storage-files-planning.md)
- [Планирование развертывания службы синхронизации файлов Azure (предварительная версия)](storage-sync-files-planning.md)
- [Целевые показатели масштабируемости и производительности службы хранилища Azure](../common/storage-scalability-targets.md)
