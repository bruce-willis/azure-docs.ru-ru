---
title: Руководство 5. Сущность pattern.any для неструктурированного текста
titleSuffix: Azure Cognitive Services
description: Сущность pattern.any следует использовать для извлечения данных из высказываний, где они хорошо отформатированы и где конец данных можно легко спутать с остальными словами высказывания.
services: cognitive-services
author: diberry
manager: cgronlun
ms.service: cognitive-services
ms.technology: language-understanding
ms.topic: article
ms.date: 09/09/2018
ms.author: diberry
ms.openlocfilehash: 4ff4a7085a8caeedebe2a734014afb1cb46d9fbf
ms.sourcegitcommit: 51a1476c85ca518a6d8b4cc35aed7a76b33e130f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2018
ms.locfileid: "47164401"
---
# <a name="tutorial-5-extract-free-form-data"></a>Руководство 5. Извлечение неструктурированных данных

В этом руководстве сущность pattern.any следует использовать для извлечения данных из высказываний, где они хорошо отформатированы и где конец данных можно легко спутать с остальными словами высказывания. 

Сущность Pattern.any позволяет найти данные произвольной формы, в которых формулировка сущности затрудняет определение ее окончание из остальной части высказывания. 

Приложение управления персоналом помогает сотрудникам находить формы организаций. 

|Фраза|
|--|
|Где находится **HRF-123456**?|
|Кто написал **HRF-123234**?|
|Было ли **HRF-456098** опубликовано на французском языке?|

Тем не менее в каждой из форм присутствует как форматированное имя, используемое в предыдущей таблице, так и такое понятное имя, как `Request relocation from employee new to the company 2018 version 5`. 

Фразы с понятным названием формы выглядят следующим образом.

|Фраза|
|--|
|Где находится **Request relocation from employee new to the company 2018 version 5**?|
|Кто написал **Request relocation from employee new to the company 2018 version 5**?|
|Был ли **Request relocation from employee new to the company 2018 version 5** опубликован во Франции?|

Заголовки переменной длины включают машинные слова, из-за которых LUIS может неправильно определить окончание сущности. С помощью шаблонной сущности Pattern.any можно указать начало и конец названия формы, что позволит LUIS правильно извлекать ее имя.

|Пример шаблона высказывания|
|--|
|Где находится {FormName} [?]|
|Кто создатель {FormName} [?]|
|Было ли {FormName} опубликовано на французском языке[?]|

**Из этого руководства вы узнали, как выполнять такие задачи:**

> [!div class="checklist"]
> * Использовать существующее приложение из руководства
> * Добавление примеров высказываний в существующую сущность
> * Создание сущности Pattern.any
> * Создание шаблона
> * Train
> * Тестирование нового шаблона

[!include[LUIS Free account](../../../includes/cognitive-services-luis-free-key-short.md)]

## <a name="use-existing-app"></a>Использование существующего приложения
Продолжите работу с приложением **Управление персоналом**, созданным в соответствии с инструкциями из предыдущего руководства. 

Если у вас нет этого приложения сделайте следующее:

1.  Загрузите и сохраните [JSON-файл приложения](https://github.com/Microsoft/LUIS-Samples/blob/master/documentation-samples/tutorials/custom-domain-roles-HumanResources.json).

2. Импортируйте JSON-файл в новое приложение.

3. Из раздела **Управление** на вкладке **Версии**, скопируйте версию и назовите ее `patt-any`. Клонирование — это отличный способ поэкспериментировать с различными функциями LUIS без влияния на исходную версию. Так как имя версии используется в составе URL-адреса, оно не должно содержать символы, недопустимые для URL-адресов.

## <a name="add-example-utterances"></a>Добавление примеров высказываний 
Удалите предварительно созданную сущность keyPhrase, если ее трудно создать и пометить меткой сущность FormName. 

1. В верхней панели навигации выберите **Сборка**, а затем выберите **Intents** (Намерения) из левой панели навигации.

2. Из списка намерений выберите **FindForm**.

3. Добавьте некоторые примеры фраз.

    |Пример фразы|
    |--|
    |Где находится форма **What to do when a fire breaks out in the Lab** и кто должен подписать ее после прочтения?|
    |Где находится **Request relocation from employee new to the company** на сервере?|
    |Кто создал **Health and wellness requests on the main campus** и какая ее текущая версия?|
    |Я ищу форму с именем **Office move request including physical assets**. |

    Если не используется сущность Pattern.any, LUIS будет трудно понять, где заканчивается название формы. Так происходит из-за множества вариантов имени формы.

## <a name="create-a-patternany-entity"></a>Создание сущности Pattern.any
Сущность Pattern.any извлекает сущности переменной длины. Эта сущность работает только в шаблоне, так как шаблон отмечает начало и окончание сущности. Если ваш шаблон, который включает сущность Pattern.any, извлекает сущности неправильно, используйте [явный список](luis-concept-patterns.md#explicit-lists), чтобы решить эту проблему. 

1. Выберите **Сущности** в меню навигации слева.

2. Выберите **Создать сущность**, введите имя `FormName` и в качестве типа выберите **Pattern.any**. Нажмите кнопку **Готово**. 

    Сущность невозможно пометить в намерении, так как Pattern.any действительна только в шаблоне. 

    Если необходимо, чтобы извлеченные данные включали другие сущности, например, число или datetimeV2, необходимо создать составную сущность, которая включает в себя Pattern.any, а также число и datetimeV2.

## <a name="add-a-pattern-that-uses-the-patternany"></a>Добавление шаблона, который использует сущность Pattern.any

1. Выберите **Шаблоны** в меню навигации слева.

2. Выберите намерение **FindForm**.

3. Введите следующие высказывания шаблона, использующие новую сущность.

    |Высказывания шаблона|
    |--|
    |Где находится форма ["]{FormName}["] и кто должен подписать ее после прочтения[?]|
    |Где находится форма ["]{FormName}["] на сервере[?]|
    |Кто создал ["]{FormName}["] и какая ее текущая версия [?]|
    |Я ищу форму с именем ["]{FormName}["][.]|

    Если необходимо учитывать вариации формы, например, одинарные кавычки вместо двойных кавычек или точка вместо вопросительного знака, тогда для каждого из вариантов требуется создать новый шаблон.

4. Если сущность keyPhrase была удалена, ее необходимо добавить обратно в приложение. 

## <a name="train-the-luis-app"></a>Обучение приложения LUIS

[!INCLUDE [LUIS How to Train steps](../../../includes/cognitive-services-luis-tutorial-how-to-train.md)]

## <a name="test-the-new-pattern-for-free-form-data-extraction"></a>Проверка извлечения произвольных данных для нового шаблона
1. Выберите **Тестирование** на верхней панели навигации, чтобы открыть панель тестирования. 

2. Введите следующую фразу. 

    `Where is the form Understand your responsibilities as a member of the community and who needs to sign it after I read it?`

3. Выберите **Просмотр** под результатом для просмотра результатов теста для сущности и намерения.

    Сначала обнаруживается сущность `FormName`, затем шаблон, определяющий намерение. Если в результате вашего теста не удалось обнаружить сущности и, следовательно, определить шаблон, необходимо добавить дополнительные примеры высказываний в намерение (не в шаблон).

4. Закройте панель "Тестирование", нажав кнопку **Тестирование** на верхней панели навигации.

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [LUIS How to clean up resources](../../../includes/cognitive-services-luis-tutorial-how-to-clean-up-resources.md)]

## <a name="next-steps"></a>Дополнительная информация

В этом руководстве добавлены примеры высказываний к существующему намерению, после чего был создана новая сущность Pattern.any для имени формы. Затем в руководстве был создал шаблон для существующего намерения с новыми примерами высказываний и сущностей. Интерактивное тестирование показало, что шаблон и его намерение были спрогнозированы, поскольку объект был найден. 

> [!div class="nextstepaction"]
> [Tutorial: Improve app with pattern roles](luis-tutorial-pattern-roles.md) (Руководство. Улучшение приложения с помощью ролей шаблонов)