---
title: Руководство 7. Простые сущности со списком фраз в службе LUIS
titleSuffix: Azure Cognitive Services
description: Извлечение данных машинного обучения из высказывания
services: cognitive-services
author: diberry
manager: cgronlun
ms.service: cognitive-services
ms.component: language-understanding
ms.topic: tutorial
ms.date: 09/09/2018
ms.author: diberry
ms.openlocfilehash: 941c29506aa8f17dcb6262495b28dd26e78194d5
ms.sourcegitcommit: 4ecc62198f299fc215c49e38bca81f7eb62cdef3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "47036068"
---
# <a name="tutorial-7-extract-names-with-simple-entity-and-phrase-list"></a>Руководство 7. Извлечение имен с простыми списками сущностей и фраз

В этом руководстве описано извлечение данных машинного обучения о названии должности из высказывания с помощью **простой** сущности. Чтобы повысить точность извлечения, добавьте список фраз, состоящий из терминов, относящихся к простой сущности.

В этом руководстве добавляется новая сущность для извлечения названия должности. Назначение простой сущности в этом приложении LUIS — научить LUIS тому, что такое имя должности и где его можно найти во фразе. Часть фразы, означающая название должности, может изменяться в разных высказываниях в зависимости от подобранных слов и длины высказывания. LUIS нуждается в примерах названий должностей во всех намерениях, которые их используют.  

Простая сущность — удачный выбор для этого типа данных, если:

* данные составляют единую концепцию;
* данные имеют неверный формат, например регулярное выражение;
* данные необычные, например предварительно созданная сущность телефонного номера или данных;
* данные не соответствуют точному списку известных слов, например сущность списка;
* данные не содержат другие элементы данных, например составную или иерархическую сущность.

**Из этого руководства вы узнаете о следующем.**

<!-- green checkmark -->
> [!div class="checklist"]
> * Использовать существующее приложение из руководства
> * Добавление простой сущности для извлечения заданий из приложения
> * Добавление списка фраз для усиления сигналов по словам, связанным с работой
> * Train 
> * Опубликовать 
> * Получение намерения и сущности из конечной точки

[!INCLUDE [LUIS Free account](../../../includes/cognitive-services-luis-free-key-short.md)]

## <a name="use-existing-app"></a>Использование существующего приложения

Продолжите работу с приложением, созданным в предыдущем руководстве, с именем **HumanResources**. 

Если приложение HumanResources из предыдущего руководства не создано, следуйте инструкциям, приведенным ниже.

1.  Загрузите и сохраните [JSON-файл приложения](https://github.com/Microsoft/LUIS-Samples/blob/master/documentation-samples/tutorials/custom-domain-composite-HumanResources.json).

2. Импортируйте JSON-файл в новое приложение.

3. Из раздела **Управление** на вкладке **Версии**, клонируйте версию и назовите ее `simple`. Клонирование — это отличный способ поэкспериментировать с различными функциями LUIS без влияния на исходную версию. Так как имя версии используется как часть маршрута URL-адреса, оно не может содержать символы, недопустимые для URL-адреса.

## <a name="simple-entity"></a>Простая сущность
Простая сущность обнаруживает единую концепцию данных, содержащуюся в слове или фразе.

Рассмотрите следующие высказывания чат-бота.

|Фраза|Извлекаемое имя должности|
|:--|:--|
|Я хочу подать заявку на новую задачу учета.|учет|
|Отправить резюме на должность инженера.|инженеры|
|Заполните заявку для задания 123456|123456|

Название должности сложно определить, так как оно может быть существительным, глаголом или фразой из нескольких слов. Например: 

|Задания|
|--|
|инженер|
|разработчик программного обеспечения|
|старший разработчик программного обеспечения|
|руководитель команды разработки |
|диспетчер службы движения|
|водитель автомобиля|
|водитель санитарного автомобиля|
|сиделка|
|мастер по работе с пресс-экструдером|
|монтажник|

У этого приложения LUIS есть названия должностей в нескольких намерениях. Пометив эти слова во всех высказываниях с намерениями, LUIS узнает больше о том, что такое должность и где она находится в высказываниях.

После того как объекты помечены в примерах высказываний, необходимо добавить список фраз для увеличения сигнала простой сущности. Список фраз **не** используется в качестве точного совпадения и не обязательно содержит все возможные ожидаемые значения. 

1. [!include[Start in Build section](../../../includes/cognitive-services-luis-tutorial-build-section.md)]

2. На странице **намерений** выберите намерение **ApplyForJob**. 

3. В выражении `I want to apply for the new accounting job` выберите `accounting`, введите `Job` в поле сверху всплывающего меню, а затем во всплывающем меню выберите **Create new entity** (Создать сущность). 

    [![](media/luis-quickstart-primary-and-secondary-data/hr-create-entity.png "Снимок экрана LUIS с намерением ApplyForJob и выделенными шагами создания сущности")](media/luis-quickstart-primary-and-secondary-data/hr-create-entity.png#lightbox)

4. Во всплывающем окне проверьте имя и тип сущности, а затем выберите **Готово**.

    ![Создание модального диалога простой сущности с названием должности и простым типом](media/luis-quickstart-primary-and-secondary-data/hr-create-simple-entity-popup.png)

5. Во фразе `Submit resume for engineering position` обозначьте слово `engineering` как сущность должности. Выберите слово `engineering`, а затем **Должность** во всплывающем меню. 

    [![](media/luis-quickstart-primary-and-secondary-data/hr-label-simple-entity.png "Снимок экрана с выделенной сущностью задания маркировки LUIS")](media/luis-quickstart-primary-and-secondary-data/hr-label-simple-entity.png#lightbox)

    Все фразы помечены, но пять фраз недостаточно, чтобы обучить LUIS связанным с должностями словам и фразам. Нам не нужны дополнительные примеры должностей, использующих значение номера, так как используется сущность регулярного выражения. Нужно по крайней мере 15 дополнительных примеров должностей, являющихся словами или фразами. 

6. Добавьте больше фраз и отметьте слова или фразы, связанные с должностями, в качестве сущности **Должность**. Типы должностей являются общими в службе по трудоустройству. Если нужны должности, связанные с определенной отраслью, слова должности должны отражать это. 

    |Фраза|Сущность должности|
    |:--|:--|
    |Я подаю заявку на получение должности руководителя программ в отделе исследовательской работы|руководитель программ|
    |Вот мое резюме на повара линии раздачи.|повар линии раздачи|
    |Мое резюме на воспитателя детского лагеря прилагается.|воспитатель детского лагеря|
    |Это моя краткая биография для получения должности помощника по административной работе.|помощник по административной работе|
    |Я хочу подать заявку на получение управленческой должности в сфере продаж.|управление, продажи|
    |Это резюме для новой должности в сфере учета.|учет|
    |Моя заявка для помощника бармена включена.|помощник бармена|
    |Я отправляю резюме на кровельщика и плотника.|кровельщик, плотник|
    |Мою краткую биографию для получения должности водителя автобуса можно найти здесь.|водитель автобуса|
    |Я дипломированная медсестра. Вот мое резюме.|дипломированная медсестра|
    |Я хотел бы представить документы на должность учителя из газеты.|учитель|
    |Это моя краткая биография на получение должности специалиста, обслуживающего полки с фруктами и овощами в магазине.|специалист, обслуживающий полки|
    |Резюме для укладчика плитки.|Плитка|
    |Вложенные резюме для ландшафтного архитектора.|ландшафтный архитектор|
    |Моя краткая биография для получения должности профессора биологии прилагается.|профессор биологии|
    |Я хотел бы подать заявку на должность фотографа.|фотограф|git 

## <a name="label-entity-in-example-utterances"></a>Добавление метки к сущности в примерах высказываний

Добавление метки (или _маркировки_) к сущности позволяет LUIS определить, где сущность находится в примере высказывания.

1. Выберите **намерения** в меню слева.

2. Выберите **GetJobInformation** из списка намерений. 

3. Обозначьте должности в примерах фраз:

    |Фраза|Сущность должности|
    |:--|:--|
    |Есть ли должность для работы с базами данных?|databases|
    |Ищу новую работу с обязанностями в бухгалтерском учете|учет|
    |Какие должности доступны для старших инженеров?|старшие инженеры|

    Существуют и другие примеры фраз, но в них нет слов, связанных с должностью.

## <a name="train"></a>Train

[!INCLUDE [LUIS How to Train steps](../../../includes/cognitive-services-luis-tutorial-how-to-train.md)]

## <a name="publish"></a>Опубликовать

[!INCLUDE [LUIS How to Publish steps](../../../includes/cognitive-services-luis-tutorial-how-to-publish.md)]

## <a name="get-intent-and-entities-from-endpoint"></a>Получение намерения и сущности из конечной точки 

1. [!INCLUDE [LUIS How to get endpoint first step](../../../includes/cognitive-services-luis-tutorial-how-to-get-endpoint.md)]

2. Перейдите в конец URL-адреса и введите `Here is my c.v. for the programmer job`. Последний параметр строки запроса — `q`. Это **запрос** фразы. Эта фраза не совпадает ни с какими помеченными фразами, поэтому она является хорошим тестом. В результате должны быть возвращены фразы `ApplyForJob`.

    ```JSON
    {
      "query": "Here is my c.v. for the programmer job",
      "topScoringIntent": {
        "intent": "ApplyForJob",
        "score": 0.9826467
      },
      "intents": [
        {
          "intent": "ApplyForJob",
          "score": 0.9826467
        },
        {
          "intent": "GetJobInformation",
          "score": 0.0218927357
        },
        {
          "intent": "MoveEmployee",
          "score": 0.007849265
        },
        {
          "intent": "Utilities.StartOver",
          "score": 0.00349470088
        },
        {
          "intent": "Utilities.Confirm",
          "score": 0.00348804821
        },
        {
          "intent": "None",
          "score": 0.00319909188
        },
        {
          "intent": "FindForm",
          "score": 0.00222647213
        },
        {
          "intent": "Utilities.Help",
          "score": 0.00211193133
        },
        {
          "intent": "Utilities.Stop",
          "score": 0.00172086991
        },
        {
          "intent": "Utilities.Cancel",
          "score": 0.00138010911
        }
      ],
      "entities": [
        {
          "entity": "programmer",
          "type": "Job",
          "startIndex": 24,
          "endIndex": 33,
          "score": 0.5230502
        }
      ]
    }
    ```
    
    LUIS находит правильное намерение (**ApplyForJob**) и извлекает правильную сущность (**Job**) со значением `programmer`.


## <a name="names-are-tricky"></a>Сложности с извлечением названия
Приложению LUIS удалось найти правильное намерение с высокой достоверностью и извлечь название должности, хоть это и непросто. Попробуйте выражение `This is the lead welder paperwork`.  

В следующем коде JSON приложение LUIS отвечает правильным намерением, `ApplyForJob`, но не извлекает название должности `lead welder`. 

```JSON
{
  "query": "This is the lead welder paperwork.",
  "topScoringIntent": {
    "intent": "ApplyForJob",
    "score": 0.468558252
  },
  "intents": [
    {
      "intent": "ApplyForJob",
      "score": 0.468558252
    },
    {
      "intent": "GetJobInformation",
      "score": 0.0102701457
    },
    {
      "intent": "MoveEmployee",
      "score": 0.009442534
    },
    {
      "intent": "Utilities.StartOver",
      "score": 0.00639619166
    },
    {
      "intent": "None",
      "score": 0.005859333
    },
    {
      "intent": "Utilities.Cancel",
      "score": 0.005087704
    },
    {
      "intent": "Utilities.Stop",
      "score": 0.00315379258
    },
    {
      "intent": "Utilities.Help",
      "score": 0.00259344373
    },
    {
      "intent": "FindForm",
      "score": 0.00193389168
    },
    {
      "intent": "Utilities.Confirm",
      "score": 0.000420796918
    }
  ],
  "entities": []
}
```

Так как имя может быть любым, LUIS спрогнозирует сущности точнее, если у него есть список фраз, усиливающих сигнал.

## <a name="to-boost-signal-add-phrase-list"></a>Добавление списка фраз для усиления сигнала

Откройте файл [jobs-phrase-list.csv](https://github.com/Microsoft/LUIS-Samples/blob/master/documentation-samples/quickstarts/job-phrase-list.csv) из репозитория Github примеров LUIS. Список содержит более тысячи слов и фраз, связанных с должностями. Ознакомьтесь со списком важных слов, связанных с должностями. Если слов или фраз нет в списке, добавьте собственные.

1. В разделе **Build** (Сборка) приложения LUIS и в меню **Improve app performance** (Повышение производительности приложения) выберите **Phrase lists** (Списки фраз).

2. Выберите **Create new phrase list** (Создать список фраз). 

3. Присвойте списку фраз имя `Job` и скопируйте список из файла jobs-phrase-list.csv в текстовое поле **Значения**. Нажмите клавишу "ВВОД". 

    [![](media/luis-quickstart-primary-and-secondary-data/hr-create-phrase-list-1.png "Снимок экрана со всплывающим диалоговым окном создания списка фраз")](media/luis-quickstart-primary-and-secondary-data/hr-create-phrase-list-1.png#lightbox)

    Если вы хотите добавить в список фраз другие слова, просмотрите **Связанные значения** и добавьте те, что вам необходимы. 

4. Выберите **Сохранить**, чтобы активировать список фраз.

    [![](media/luis-quickstart-primary-and-secondary-data/hr-create-phrase-list-2.png "Снимок экрана всплывающего диалогового окна создания списка фраз со словами в окне значений списка фраз")](media/luis-quickstart-primary-and-secondary-data/hr-create-phrase-list-2.png#lightbox)

5. [Обучите](#train-the-luis-app) и [опубликуйте](#publish-the-app-to-get-the-endpoint-URL) приложение еще раз, чтобы использовать список фраз.

6. Сделайте повторный запрос к конечной точке с той же фразой: `This is the lead welder paperwork.`

    Ответ JSON содержит извлеченные сущности:

    ```JSON
    {
        "query": "This is the lead welder paperwork.",
        "topScoringIntent": {
            "intent": "ApplyForJob",
            "score": 0.920025647
        },
        "intents": [
            {
            "intent": "ApplyForJob",
            "score": 0.920025647
            },
            {
            "intent": "GetJobInformation",
            "score": 0.003800706
            },
            {
            "intent": "Utilities.StartOver",
            "score": 0.00299335527
            },
            {
            "intent": "MoveEmployee",
            "score": 0.0027167045
            },
            {
            "intent": "None",
            "score": 0.00259556063
            },
            {
            "intent": "FindForm",
            "score": 0.00224019377
            },
            {
            "intent": "Utilities.Stop",
            "score": 0.00200693542
            },
            {
            "intent": "Utilities.Cancel",
            "score": 0.00195913855
            },
            {
            "intent": "Utilities.Help",
            "score": 0.00162656687
            },
            {
            "intent": "Utilities.Confirm",
            "score": 0.0002851904
            }
        ],
        "entities": [
            {
            "entity": "lead welder",
            "type": "Job",
            "startIndex": 12,
            "endIndex": 22,
            "score": 0.8295959
            }
        ]
    }
    ```

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [LUIS How to clean up resources](../../../includes/cognitive-services-luis-tutorial-how-to-clean-up-resources.md)]

## <a name="next-steps"></a>Дополнительная информация

В этом руководстве приложение "Управление персоналом" использует простую сущность машинного обучения для поиска названий должностей в высказываниях. Поскольку названия должностей могут обозначаться различными словами или фразами, для их усовершенствования приложению необходим список фраз. 

> [!div class="nextstepaction"]
> [Добавление готовой сущности keyPhrase](luis-quickstart-intent-and-key-phrase.md)