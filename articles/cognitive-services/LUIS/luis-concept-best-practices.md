---
title: Рекомендации по созданию приложений с использованием LUIS — Интеллектуальная служба распознавания речи
titleSuffix: Azure Cognitive Services
description: Рекомендации по использованию LUIS для получения наилучших результатов.
services: cognitive-services
author: diberry
manager: cgronlun
ms.service: cognitive-services
ms.component: language-understanding
ms.topic: article
ms.date: 09/10/2018
ms.author: diberry
ms.openlocfilehash: 511e6c732613cc577644365e38b271135659f2d3
ms.sourcegitcommit: 4ecc62198f299fc215c49e38bca81f7eb62cdef3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "47042250"
---
# <a name="best-practices-for-building-a-language-understanding-app-with-cognitive-services"></a>Рекомендации по созданию приложения для распознавания речи с использованием Cognitive Services
Используйте процесс разработки приложения для созданий приложений LUIS. 

* Создайте языковую модель
* Добавьте несколько примеров высказываний для обучения (по 10–15 на каждое намерение)
* Опубликовать 
* Проведите тестирование из конечной точки 
* Добавьте функции

После [публикации](luis-how-to-publish-app.md) приложения используйте следующий цикл разработки: добавление функций, публикация и тестирование из конечной точки. Не начинайте очередной цикл разработки с добавления новых примеров высказываний. Это не позволит LUIS обучить вашу модель с помощью высказываний настоящих пользователей. 

Чтобы LUIS эффективно выполнял обучение, не расширяйте набор высказываний до тех пор, пока для текущего набора высказываний примеров и конечной точки не возвращаются устойчивые результаты с высокой оценкой. Увеличивайте оценки с использованием активного обучения, [шаблонов](luis-concept-patterns.md) и [списков фраз](luis-concept-feature.md). 

## <a name="do-and-dont"></a>Рекомендации и предостережения
В следующем списке приведены рекомендации для приложений LUIS:

|Рекомендации|Предостережения|
|--|--|
|[Определяйте четкие намерения](#do-define-distinct-intents) |[Не добавляйте слишком много примеров высказываний в намерения](#dont-add-many-example-utterances-to-intents) |
|[Найдите компромисс между слишком общим и слишком конкретным содержанием для каждого намерения](#do-find-sweet-spot-for-intents)|[Не используйте LUIS в качестве платформы обучения](#dont-use-luis-as-a-training-platform)|
|[Разрабатывайте приложения итерационно](#do-build-the-app-iteratively)|[Не добавляйте слишком много примеров высказываний одного формата, игнорируя другие форматы](#dont-add-many-example-utterances-of-the-same-format-ignoring-other-formats)|
|[Добавляйте списки фраз и шаблоны в последующие итерации](#do-add-phrase-lists-and-patterns-in-later-iterations)|[Не смешивайте определения намерений и сущностей](#dont-mix-the-definition-of-intents-and-entities)|
|[Добавьте примеры высказываний в намерение None](#do-add-example-utterances-to-none-intent)|[Не создавайте списки фраз со всеми возможными значениями](#dont-create-phrase-lists-with-all-the-possible-values)|
|[Используйте функцию предложения для активного обучения](#do-leverage-the-suggest-feature-for-active-learning)|[Не добавляйте слишком много шаблонов](#dont-add-many-patterns)|
|[Отслеживайте производительность своего приложения](#do-monitor-the-performance-of-your-app)|[Не выполняйте обучение и публикацию для каждого добавленного примера высказывания](#dont-train-and-publish-with-every-single-example-utterance)|

## <a name="do-define-distinct-intents"></a>Определяйте четкие намерения
Убедитесь, что словарь для каждого намерения используется только для этого намерения и не перекрывается с другим намерением. Например, если вам необходимо приложение для бронирования авиабилетов и гостиниц, вы сможете сделать так, чтобы эти бронирования находились в отдельных намерениях, или поместить их в одно намерение с различными сущностями внутри высказывания для различных данных.

Если словарь для двух намерений совпадает, объедините намерения и используйте сущности. 

Взгляните на следующие примеры высказываний:

```
Book a flight
Book a hotel
```

В высказываниях "Book a flight" ("Забронировать авиабилет") и "Book a hotel" ("Забронировать гостиницу") используется один и тот же словарь "book a " ("Забронировать"). Эти высказывания перекрываются, поэтому необходимо использовать одно намерение с различными сущностями для авиабилетов и гостиниц. 

## <a name="do-find-sweet-spot-for-intents"></a>Найдите компромисс для каждого намерения
Чтобы определить, перекрываются ли намерения, используйте данные прогнозирования из LUIS. LUIS не может правильно обработать перекрывающиеся намерения. Результатом является то, что намерение с максимальной оценкой оказывается слишком близко к другому намерению. Поскольку LUIS не использует один и тот же путь к данным для обучения каждый раз, перекрывающееся намерение может стать первым или вторым в обучении. Необходимо сделать так, чтобы оценки высказываний для каждого намерения находились как можно дальше друг от друга, чтобы этого не произошло. Хорошее различие между намерениями приведет к тому, что вы всегда будете получать ожидаемое намерение в качестве намерения с максимальной оценкой. 
 
## <a name="do-build-the-app-iteratively"></a>Разрабатывайте приложения итерационно
Создайте отдельный *слепой* набор тестов, который не используется для [высказываний примеров](luis-concept-utterance.md) и высказываний конечных точек. Продолжайте улучшать приложение для своего набора тестов. Адаптируйте набор тестов, так чтобы он отражал настоящие высказывания пользователей. Используйте слепой набор тестов для оценки каждой итерации. 

У разработчиков должно быть три набора данных. Первый набор данных — это примеры высказываний для создания модели. Второй набор данных предназначен для тестирования модели в конечной точке. Третий набор данных — это слепые тестовые данные, используемые в [пакетном тестировании](luis-how-to-batch-test.md). Последний набор данных не используется для обучения приложения и не отправляется в конечную точку.  

## <a name="do-add-phrase-lists-and-patterns-in-later-iterations"></a>Добавляйте списки фраз и шаблоны в последующие итерации
[Списки фраз](luis-concept-feature.md) позволяют определять словари, состоящие из слов, связанных с доменом приложения. Заполните список фраз несколькими словами, затем используйте функцию предложения, чтобы сообщить LUIS о дополнительных словах в словаре. Не добавляйте каждое слово в словарь, так как список фраз не используется для точного сравнения. 

Высказывания настоящих пользователей из конечной точки, очень похожие друг на друга, могут раскрывать шаблоны, связанные с подбором и расположением слов. Функция [шаблона](luis-concept-patterns.md) использует подбор и расположение слов вместе с регулярными выражениями для повышения точности прогнозирования. С помощью регулярных выражений можно указать слова и знаки препинания, которые вы хотите игнорировать, и при этом сохранить соответствие шаблону. 

Для игнорируемых знаков препинания используйте дополнительный синтаксис шаблона.

Не используйте эти методы, пока ваше приложение не получило запросы от конечной точки, так как это снижает достоверность.  

## <a name="do-add-example-utterances-to-none-intent"></a>Добавьте примеры высказываний в намерение None
Это резервное намерение, и к нему относится все, что находится вне вашего приложения. Добавляйте по одному примеру высказывания в намерение None на каждые 10 примеров высказываний в остальной части приложения LUIS.

## <a name="do-leverage-the-suggest-feature-for-active-learning"></a>Используйте функцию предложения для активного обучения
Вместо добавления дополнительных высказываний в намерения регулярно используйте функцию **Просмотра высказываний конечной точки** [активного обучения](luis-how-to-review-endoint-utt.md). Так как приложение постоянно получает высказывания конечной точки, этот список растет и изменяется.

## <a name="do-monitor-the-performance-of-your-app"></a>Отслеживайте производительность своего приложения
Отслеживайте точность прогнозирования с помощью набора тестов. 

## <a name="dont-add-many-example-utterances-to-intents"></a>Не добавляйте слишком много примеров высказываний в намерения
После публикации приложения добавляйте в итеративный процесс только высказывания из активного обучения. Если высказывания очень похожи, добавьте шаблон. 

## <a name="dont-use-luis-as-a-training-platform"></a>Не используйте LUIS в качестве платформы обучения
LUIS относится к домену языковой модели. Он не может использоваться в качестве общей платформы для обучения. 

## <a name="dont-add-many-example-utterances-of-the-same-format-ignoring-other-formats"></a>Не добавляйте слишком много примеров высказываний одного формата, игнорируя другие форматы
LUIS ожидает вариации в высказываниях намерения. Высказывания могут различаться с сохранением одного и того же общего смысла. Эти вариации могут относиться к длине высказывания, подбору слов и расположению слов. 

|Не используйте одинаковый формат|Используйте различные форматы|
|--|--|
|Buy a ticket to Seattle (Купить билет в Сиэтл)<br>Buy a ticket to Paris (Купить билет в Париж)<br>Buy a ticket to Orlando (Купить билет в Орландо)|Buy 1 ticket to Seattle (Купить 1 билет в Сиэтл)<br>Reserve two seats on the red eye to Paris next Monday (Зарезервировать два места на ночной рейс в Париж на следующий понедельник)<br>I would like to book 3 tickets to Orlando for spring break (Я хотел бы забронировать 3 билета в Орландо на весенний отпуск)|

Во втором столбце используются разные глаголы (купить, зарезервировать, забронировать), разное количество (1, два, 3) и различный порядок слов, но намерение во всех случаях одно и то же — приобрести авиабилеты для путешествия. 

## <a name="dont-mix-the-definition-of-intents-and-entities"></a>Не смешивайте определения намерений и сущностей
Создайте намерения для всех действий, которые может предпринять ваш бот. Используйте сущности в качестве параметров, которые делают возможным выполнение действия. 

Для чат-бота, который будет бронировать авиабилеты, создайте намерение **BookFlight**. Не создавайте намерение для каждой авиакомпании или для каждого места назначения. Используйте эти фрагменты данных как [сущности](luis-concept-entity-types.md) и помечайте их в примерах высказываний. 

## <a name="dont-create-phrase-lists-with-all-the-possible-values"></a>Не создавайте списки фраз со всеми возможными значениями
Указывайте в [списках фраз](luis-concept-feature.md) по нескольку примеров, но не все возможные слова. LUIS обобщает указанные примеры и учитывает контекст. 

## <a name="dont-add-many-patterns"></a>Не добавляйте слишком много шаблонов
Не добавляйте слишком много [шаблонов](luis-concept-patterns.md). LUIS быстрее пройдет обучение с меньшим количеством примеров. Не перегружайте систему без необходимости.

## <a name="dont-train-and-publish-with-every-single-example-utterance"></a>Не выполняйте обучение и публикацию для каждого добавленного примера высказывания
Добавьте 10–15 высказываний перед обучением и публикацией. Это позволит оценить влияние на точность прогнозирования. Добавление одного высказывания может не оказать существенного влияния на оценку. 

## <a name="next-steps"></a>Дополнительная информация

* Узнайте, как [спланировать свое приложение](luis-how-plan-your-app.md) LUIS.