---
title: Структурированные выражения запросов в API службы поиска и распознавания данных | Документация Майкрософт
description: Узнайте, как использовать структурированные выражения запросов в API службы поиска и распознавания данных (KES) в Cognitive Services.
services: cognitive-services
author: bojunehsu
manager: stesp
ms.service: cognitive-services
ms.component: knowledge-exploration
ms.topic: article
ms.date: 03/26/2016
ms.author: paulhsu
ms.openlocfilehash: 070ee311a1153bc9fb59870dce68f385a43b15f1
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35380232"
---
# <a name="structured-query-expression"></a>Структурированное выражение запроса
Структурированное выражение запроса определяет набор операций, вычисляемых для данных индекса.  Оно состоит из выражений запросов с атрибутами и функций более высокого уровня.  С помощью метода [*evaluate*](evaluateMethod.md) можно вычислить объекты, соответствующие выражению.  Ниже приведен пример из области научных публикаций, возвращающий публикации Джейми Тивана (Jaime Teevan), изданные после 2013 года.

`And(Composite(Author.Name=='jaime teevan'),Y>=2013)`

Структурированные выражения запросов могут быть получены из результатов запросов [*interpret*](interpretMethod.md), в которых семантическими выходными данными каждой интерпретации является структурированное выражение запроса, возвращающее объекты индекса, соответствующие входному запросу на естественном языке.  Кроме того, они могут быть созданы вручную с помощью синтаксиса, описанного в этом разделе.

## <a name="attribute-query-expression"></a>Выражение запроса с атрибутами
Выражение запроса с атрибутами определяет набор объектов на основе сопоставления конкретного атрибута.  Поддерживаются разные операции сопоставления. Они зависят от типа атрибута и индексированной операции, указанной в [схеме](SchemaFormat.md).

| type | Операция | Примеры |
|------|-------------|------------|
| Строка | equals (равно) | Title='latent semantic analysis'  (каноническое значение и синонимы) |
| Строка | equals (равно) | Author.Name=='susan t dumais'  (только каноническое значение)|
| Строка | starts_with | Title='latent s'... |
| Int32, Int64, Double | equals (равно) | Year=2000 |
| Int32, Int64, Double | starts_with | Year='20'... (любое десятичное число, начинающееся с "20") |
| Int32, Int64, Double | is_between | Year&lt;2000 <br/> Year&lt;=2000 <br/> Year&gt;2000 <br/> Year&gt;=2000 <br/> Year=[2010,2012] *(включает только левое граничное значение: 2010, 2011)* <br/> Year=[2000,2012] *(включает оба граничных значения: 2010, 2011, 2012)* |
| Дата | equals (равно) | BirthDate='1984-05-14' |
| Дата | is_between | BirthDate&lt;='2008/03/14' <br/> PublishDate=['2000-01-01','2009-12-31'] |
| Guid | equals (равно) | Id='602DD052-CC47-4B23-A16A-26B52D30C05B' |


Например, выражение "Title='latent s'..." соответствует всем научным публикациям, название которых начинается со строки "latent s".  Для вычисления этого выражения атрибут Title должен задавать операцию starts_with в схеме, используемой для создания индекса.

Для атрибутов со связанными синонимами при помощи оператора "==" в выражении запроса моно указать объекты, каноническое значение которых соответствует заданной строке. Кроме того, с помощью оператора "=" можно указать объекты, каноническое значение или синоним которых соответствует заданной строке.  В обоих случаях в определении атрибута требуется оператор equals.


## <a name="functions"></a>Функции Azure
Имеется набор встроенных функций, позволяющих создавать более сложные выражения запросов на основе базовых запросов с атрибутами.

### <a name="and-function"></a>Функция And
`And(expr1, expr2)`

Возвращает область пересечения двух входных выражений.

В следующем примере возвращаются научные публикации за 2000 год об извлечении информации.

`And(Year=2000, Keyword=='information retrieval')`

### <a name="or-function"></a>Функция Or
`Or(expr1, expr2)`

Возвращает область объединения двух входных выражений.

В следующем примере возвращаются научные публикации за 2000 год об извлечении информации или моделировании пользователей.

`And(Year=2000, Or(Keyword='information retrieval', Keyword='user modeling'))`

### <a name="composite-function"></a>Функция Composite
`Composite(expr)`

Возвращает выражение, которое инкапсулирует внутреннее выражение, состоящее из запросов вложенных атрибутов общего составного атрибута.  Для инкапсуляции требуется, чтобы составной атрибут любого соответствующего объекта данных имел по крайней мере одно значение, которое удовлетворяет внутреннему выражению.  Обратите внимание на то, что выражение запроса вложенных атрибутов составного атрибута должно быть инкапсулировано с помощью функции Composite(), прежде чем его можно будет объединить с другими выражениями запросов.

Например, следующее выражение возвращает научные публикации Гарри Шама (Harry Shum) за период, когда он работал в корпорации Майкрософт.

```
Composite(And(Author.Name="harry shum", 
              Author.Affiliation="microsoft"))
```

С другой стороны, приведенное ниже выражение возвращает научные публикации, одним из авторов которых является Гарри Шам (Harry Shum) и которые относятся к корпорации Майкрософт.

```
And(Composite(Author.Name="harry shum"), 
    Composite(Author.Affiliation="microsoft"))
```
