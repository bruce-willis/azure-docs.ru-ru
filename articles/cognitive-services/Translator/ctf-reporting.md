---
title: Отчеты на платформе для совместного перевода CTF для Microsoft Translator
description: Как использовать отчеты на платформе для совместного перевода CTF.
services: cognitive-services
author: Jann-Skotdal
manager: chriswendt1
ms.service: cognitive-services
ms.component: translator-text
ms.topic: article
ms.date: 12/14/2017
ms.author: v-jansko
ms.openlocfilehash: cefc630a82a56703ba4942bcad18f6e0a38b1ee5
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35380828"
---
# <a name="how-to-use-collaborative-translation-framework-ctf-reporting"></a>Как использовать отчеты на платформе для совместного перевода CTF

> [!NOTE]
> Этот метод устарел и более не поддерживается. Он не доступен в версии 3.0-API перевода текстов.

> Платформа для совместного перевода (CTF), ранее доступная для версии 2.0 API перевода текстов, устарела с 1 февраля 2018 года. Функции AddTranslation и AddTranslationArray позволяют пользователям вводить исправления на платформе для совместного перевода. После 31 января 2018 года эти две функции не принимали новые предложения и пользователи получали сообщение об ошибке. Эти функции были выведены из эксплуатации и не будут заменены. 

>Подобная функциональность доступна в API Translator Hub, позволяя вам создать собственную систему перевода с вашей терминологией и стилем. Ее можно вызвать помощью идентификатора категории в API перевода текстов. Translator Hub: [https://hub.microsofttranslator.com](https://hub.microsofttranslator.com). API Translator Hub: [https://hub.microsofttranslator.com/swagger](https://hub.microsofttranslator.com/swagger).

API отчетов платформы для совместного перевода (CTF) возвращает статистику и фактическое содержимое в хранилище CTF. Этот API отличается от метода GetTranslations(), потому что он:
* Возвращает переведенное содержимое и его общее количество только из вашей учетной записи (appId или Azure Marketplace).
* Возвращает переведенное содержимое и его общее количество, не требуя соответствия исходного предложения.
* Не возвращает автоматический перевод (машинный перевод).

## <a name="endpoint"></a>Конечная точка
Конечная точка API отчета CTF http://api.microsofttranslator.com/v2/beta/ctfreporting.svc
                        

## <a name="methods"></a>Методы
| ИМЯ |    ОПИСАНИЕ|
|:---|:---|
| Метод GetUserTranslationCounts | Получает количество переводов, созданных пользователем. |
| Метод GetUserTranslations | Возвращает переводы, созданные пользователем. |

Эти методы позволяют:
* Получить полный набор пользовательских переводов и исправлений под своим идентификатором учетной записи для загрузки.
* Получить список частых участников. Убедитесь, что в AddTranslation () указано правильное имя пользователя.
* Создать пользовательский интерфейс (UI), который позволяет вашим доверенным пользователям видеть всех доступных кандидатов, при необходимости ограничиваясь частью вашего сайта, на основе префикса URI.

> [!NOTE]
> Оба метода относительно медленны и дороги. Рекомендуется использовать их с осторожностью.

## <a name="getusertranslationcounts-method"></a>Метод GetUserTranslationCounts

Этот метод получает число переводов, созданных пользователем. Он предоставляет список счетчиков переводов, сгруппированных по параметрам запроса uriPrefix, from, to, user, minRating и maxRating.

**Синтаксис**

> [!div class="tabbedCodeSnippets"]
```cs
UserTranslationCount[]GetUserTranslationCounts(
           string appId,
           string uriPrefix,
           string from,
           string to,
           int? minRating,
           int? maxRating,
           string user, 
           string category
           DateTime? minDateUtc,
           DateTime? maxDateUtc,
           int? skip,
           int? take);
```

**Параметры**

| Параметр | ОПИСАНИЕ |
|:---|:---|
| appId | **Обязательный**. Если используется заголовок авторизации, оставьте поле appid пустым, иначе укажите строку, содержащую Bearer, пробел и маркер доступа.|
| uriPrefix | **Необязательный**. Строка, содержащая префикс URI перевода.|
| from | **Необязательный**. Строка, представляющая код языка текста перевода. |
| значение | **Необязательный**. Строка, представляющая код языка для перевода текста.|
| minRating| **Необязательный**. Целочисленное значение, представляющее минимальную оценку качества для переведенного текста. Допустимое значение — от -10 до 10. Значение по умолчанию — 1.|
| maxRating| **Необязательный**. Целочисленное значение, представляющее максимальную оценку качества для переведенного текста. Допустимое значение — от -10 до 10. Значение по умолчанию — 1.|
| user | **Необязательный**. Строка, которая используется для фильтрации результата на основе инициатора отправки. |
| category| **Необязательный**. Строка, содержащая категории или домен для перевода. Этот параметр поддерживает только общий параметр по умолчанию.|
| minDateUtc| **Необязательный**. Дата, с которой вы хотите получить переводы. Дата должна быть в формате UTC. |
| maxDateUtc| **Необязательный**. Дата, до которой вы хотите получить переводы. Дата должна быть в формате UTC. |
| skip| **Необязательный**. Количество результатов, которые вы хотите пропустить на странице. Например, если вы хотите пропустить первые 20 строк результатов и начать просмотр с 21-й записи результатов, укажите 20 для этого параметра. Значение параметра по умолчанию — 0.|
| take | **Необязательный**. Количество результатов, которые вы хотите извлечь. Максимальное количество каждого запроса — 100. Количество по умолчанию — 100.|

> [!NOTE]
> Параметры запроса skip и take позволяют разбивать на страницы большое количество записей результатов.

**Возвращаемое значение**

Набор результатов содержит массив **UserTranslationCount**. Каждый массив UserTranslationCount имеет следующие элементы:

| Поле | ОПИСАНИЕ |
|:---|:---|
| Count| Количество полученных результатов|
| Из | Исходный язык|
| Rating| Оценка, применяемая отправителем в вызове метода AddTranslation ()|
| Кому| Конечный язык|
| URI| URI, примененный в вызове метода AddTranslation ()|
| Пользователь| Имя пользователя|

**Исключения**

| Исключение | Сообщение | Условия |
|:---|:---|:---|
| ArgumentOutOfRangeException | Значение параметра **maxDateUtc** должно быть больше или равно значению параметра **minDateUtc**.| Значение параметра **maxDateUtc** меньше, чем значение параметра **minDateUtc**.|
| TranslateApiException | IP превышает квоту.| <ul><li>Достигнут предел количества запросов в минуту.</li><li>Размер запроса по-прежнему ограничен 10 000 символов.</li><li>Почасовая и ежедневная квота ограничивают количество символов, которые примет API Microsoft Translator.</li></ul>|
| TranslateApiException | AppId превышает квоту.| Идентификатор приложения превысил почасовую или дневную квоту.|

> [!NOTE]
> Квота будет корректироваться, чтобы обеспечить распределение ресурсов между всеми пользователями.

**Примеры кода в GitHub**
* [C#](https://github.com/MicrosoftTranslator/Documentation-Code-TextAPI/blob/master/ctf/ctf-getusertranslationcounts-example-csharp.md)
* [PHP](https://github.com/MicrosoftTranslator/Documentation-Code-TextAPI/blob/master/ctf/ctf-getusertranslationcounts-example-php.md)

## <a name="getusertranslations-method"></a>Метод GetUserTranslations

Этот метод возвращает переводы, созданные пользователем. Он предоставляет список переводов, сгруппированных по параметрам запроса uriPrefix, from, to, user, minRating и maxRating.

**Синтаксис**

> [!div class="tabbedCodeSnippets"]
```cs
UserTranslation[] GetUserTranslations (
            string appId,
            string uriPrefix,
            string from,
            string to,
            int? minRating,
            int? maxRating,
            string user, 
            string category
            DateTime? minDateUtc,
            DateTime? maxDateUtc,
            int? skip,
            int? take); 
```

**Параметры**

| Параметр | ОПИСАНИЕ |
|:---|:---|
| appId | **Обязательный**. Если используется заголовок авторизации, оставьте поле appid пустым, иначе укажите строку, содержащую Bearer, пробел и маркер доступа.|
| uriPrefix| **Необязательный**. Строка, содержащая префикс URI перевода.|
| from| **Необязательный**. Строка, представляющая код языка текста перевода.|
| значение| **Необязательный**. Строка, представляющая код языка для перевода текста.|
| minRating| **Необязательный**. Целочисленное значение, представляющее минимальную оценку качества для переведенного текста. Допустимое значение — от -10 до 10. Значение по умолчанию — 1.|
| maxRating| **Необязательный**. Целочисленное значение, представляющее максимальную оценку качества для переведенного текста. Допустимое значение — от -10 до 10. Значение по умолчанию — 1.|
| user| **Необязательный. Строка, которая используется для фильтрации результата на основе инициатора отправки**|
| category| **Необязательный**. Строка, содержащая категории или домен для перевода. Этот параметр поддерживает только общий параметр по умолчанию.| 
| minDateUtc| **Необязательный**. Дата, с которой вы хотите получить переводы. Дата должна быть в формате UTC.| 
| maxDateUtc| **Необязательный**. Дата, до которой вы хотите получить переводы. Дата должна быть в формате UTC.|
| skip| **Необязательный**. Количество результатов, которые вы хотите пропустить на странице. Например, если вы хотите пропустить первые 20 строк результатов и начать просмотр с 21-й записи результатов, укажите 20 для этого параметра. Значение параметра по умолчанию — 0.|
| take| **Необязательный**. Количество результатов, которые вы хотите извлечь. Максимальное количество каждого запроса — 100. Число по умолчанию — 50.|

> [!NOTE]
> Параметры запроса skip и take позволяют разбивать на страницы большое количество записей результатов.

**Возвращаемое значение**

Набор результатов содержит массив **UserTranslation**. Каждый массив UserTranslation имеет следующие элементы:

| Поле | ОПИСАНИЕ |
|:---|:---|
| CreatedDateUtc| Дата создания записи с использованием AddTranslation()|
| Из| Исходный язык|
| OriginalText| Текст исходного языка, который используется при отправке запроса|
|Rating |Оценка, применяемая отправителем в вызове метода AddTranslation ()|
|Кому|    Конечный язык|
|TranslatedText|    Перевод, представленный в вызове метода AddTranslation ()|
|URI|   URI, примененный в вызове метода AddTranslation ()|
|Пользователь   |Имя пользователя|

**Исключения**

| Исключение | Сообщение | Условия |
|:---|:---|:---|
| ArgumentOutOfRangeException | Значение параметра **maxDateUtc** должно быть больше или равно значению параметра **minDateUtc**.| Значение параметра **maxDateUtc** меньше, чем значение параметра **minDateUtc**.|
| TranslateApiException | IP превышает квоту.| <ul><li>Достигнут предел количества запросов в минуту.</li><li>Размер запроса по-прежнему ограничен 10 000 символов.</li><li>Почасовая и ежедневная квота ограничивают количество символов, которые примет API Microsoft Translator.</li></ul>|
| TranslateApiException | AppId превышает квоту.| Идентификатор приложения превысил почасовую или дневную квоту.|

> [!NOTE]
> Квота будет корректироваться, чтобы обеспечить распределение ресурсов между всеми пользователями.

**Примеры кода в GitHub**
* [C#](https://github.com/MicrosoftTranslator/Documentation-Code-TextAPI/blob/master/ctf/ctf-getusertranslations-example-csharp.md)
* [PHP](https://github.com/MicrosoftTranslator/Documentation-Code-TextAPI/blob/master/ctf/ctf-getusertranslations-example-php.md)


















