---
title: Часто задаваемые вопросы по API Bing для поиска изображений в Azure | Документация Майкрософт
description: Получите ответы на распространенные вопросы об API Bing для поиска изображений служб Microsoft Cognitive Services в Azure.
services: cognitive-services
author: v-jerkin
manager: jhubbard
ms.service: cognitive-services
ms.component: bing-image-search
ms.topic: article
ms.date: 10/06/2017
ms.author: v-jerkin
ms.openlocfilehash: 15d3def94312fbde0bf3443cba54edfacafa7ab3
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35380012"
---
# <a name="frequently-asked-questions-faq-about-bing-image-search-api-cognitive-services"></a>Часто задаваемые вопросы по API Bing для поиска изображений (Cognitive Services)
 
Найдите ответы на часто задаваемые вопросы о понятиях, коде и сценариях, связанных с API Bing для поиска изображений для служб Microsoft Cognitive Services в Azure.

## <a name="response-headers-in-javascript"></a>Заголовки ответов в JavaScript

В ответах от API Bing для поиска изображений могут появляться следующие заголовки:

|||
|-|-|
|`X-MSEdge-ClientID`|Уникальный идентификатор, назначенный пользователю службой Bing.|
|`BingAPIs-Market`|Рынок, использованный для выполнения запроса.|
|`BingAPIs-TraceId`|Запись журнала на сервере API Bing для этого запроса (для службы поддержки).|

Особенно важно сохранить идентификатор клиента и вернуть его с последующими запросами. При этом в процессе поиска будет использоваться прошлый контекст в ранжировании результатов поиска, обеспечивая согласованность пользовательского интерфейса.

Тем не менее, при вызове API Bing для поиска изображений из JavaScript встроенные средства обеспечения безопасности браузера (CORS) могут блокировать доступ к значениям этих заголовков.

Чтобы получить доступ к заголовкам, можно выполнить запрос API Bing для поиска изображений через прокси-сервер CORS. Ответ с такого прокси-сервера содержит заголовок `Access-Control-Expose-Headers`, который вносит заголовки ответов в список разрешений и делает их доступными для JavaScript.

Установить прокси-сервер CORS довольно просто. Это позволит нашему [учебному приложению](tutorial-bing-image-search-single-page-app.md) иметь доступ к необязательным заголовкам клиента. Для начала, если у вас не установлен компонент Node.js, [установите его](https://nodejs.org/en/download/). В командной строке введите следующую команду:

    npm install -g cors-proxy-server

Затем в HTML-файле измените конечную точку API Bing для поиска изображений на следующую:

    http://localhost:9090/https://api.cognitive.microsoft.com/bing/v7.0/search

И наконец, запустите прокси-сервер CORS с помощью следующей команды:

    cors-proxy-server

Не закрывайте командное окно, пока используете учебное приложение. Закрытие этого окна приводит к остановке прокси-сервера. Теперь в развертываемом разделе заголовков HTTP под результатами поиска можно увидеть заголовок `X-MSEdge-ClientID` (среди прочих) и убедиться, что он одинаковый для всех запросов.

## <a name="response-headers-in-production"></a>Заголовки ответов в рабочей среде

Подход с использованием прокси-сервера CORS, описанный в предыдущем ответе, подходит для среды разработки, тестовой и учебной сред. 

Однако в рабочей среде серверный сценарий необходимо размещать в одном домене с веб-страницей, которая использует API Bing для поиска в Интернете. Этот сценарий должен фактически выполнять вызовы API по запросу от веб-страницы JavaScript и передавать все результаты, включая заголовки, обратно в клиент. Поскольку два ресурса (страница и сценарий) используют один источник, то CORS не задействуется, и специальные заголовки доступны для JavaScript на веб-странице. 

Такой подход также защищает ключ API от общего доступа, так как он необходим только серверному сценарию. Чтобы обеспечить авторизацию запроса, сценарий может использовать другой метод (такой как источник ссылки HTTP).

## <a name="next-steps"></a>Дополнительная информация

У вас есть вопрос об отсутствующей функции или компоненте? Вы можете отправить запрос или проголосовать за них на нашем [веб-сайте User Voice](https://cognitive.uservoice.com/forums/555907-bing-search).

## <a name="see-also"></a>См. также

 [Stack Overflow: Cognitive Services](http://stackoverflow.com/questions/tagged/bing-api)