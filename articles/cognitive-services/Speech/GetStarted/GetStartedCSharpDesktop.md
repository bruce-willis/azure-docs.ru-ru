---
title: Начало работы с API распознавания речи с помощью рабочей библиотеки С# Microsoft | Документация Майкрософт
description: Разрабатывайте базовые приложения для ОС Windows, которые используют API распознавания речи Microsoft для преобразования устной речи в текст.
services: cognitive-services
author: zhouwangzw
manager: wolfma
ms.service: cognitive-services
ms.component: bing-speech
ms.topic: article
ms.date: 09/27/2017
ms.author: zhouwang
ms.openlocfilehash: e59b0e25401fb5182edd52f82985ffed9052286d
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35380588"
---
# <a name="get-started-with-the-speech-recognition-api-in-c35-for-net-on-windows"></a>Начните работу с API распознавания речи в C# для .NET в ОС Windows

В этой статье показано, как разрабатывать базовые Windows-приложения , которые используют API распознавания речи для преобразования устной речи в текст. Использование клиентской библиотеки позволяет осуществлять потоковую передачу в режиме реального времени, а это означает, что когда клиентское приложение отправляет аудио в службу, оно одновременно и асинхронно получает результаты частичного распознавания.

Разработчики, желающие использовать службу распознавания речи из приложений, работающих на любом устройстве, могут использовать рабочую библиотеку C#. Для использования библиотеки установите [пакет NuGet Microsoft.ProjectOxford.SpeechRecognition-x86](https://www.nuget.org/packages/Microsoft.ProjectOxford.SpeechRecognition-x86/) для 32-разрядной платформы или [пакет NuGet Microsoft.ProjectOxford.SpeechRecognition-x64](https://www.nuget.org/packages/Microsoft.ProjectOxford.SpeechRecognition-x64/) для 64-разрядной платформы. Для получения сведений по API клиентской библиотеки см. по ссылке [Рабочая библиотека речи C# Microsoft](https://cdn.rawgit.com/Microsoft/Cognitive-Speech-STT-Windows/master/docs/SpeechSDK/index.html).

В следующих разделах описывается, как устанавливать, создавать и запускать пример приложения C# с помощью рабочей библиотеки C#.

## <a name="prerequisites"></a>предварительным требованиям

### <a name="platform-requirements"></a>Требования платформы

Следующий образец был разработан для Windows 8+ и .NET Framework 4.5+ с помощью [Visual Studio 2015, Community Edition](https://www.visualstudio.com/products/visual-studio-community-vs).

### <a name="get-the-sample-application"></a>Получите пример приложения

Выполните клонирование из репозитория [образцов рабочей библиотеки речи C#](https://github.com/microsoft/cognitive-speech-stt-windows).

### <a name="subscribe-to-the-speech-recognition-api-and-get-a-free-trial-subscription-key"></a>Подпишитесь на API распознавания речи и получите ключ бесплатной пробной версии подписки

Speech API — элемент Cognitive Services (ранее Project Oxford). Вы можете получить ключи бесплатной пробной версии подписки на странице [подписки на Cognitive Services](https://azure.microsoft.com/try/cognitive-services/). Чтобы получить ключ, после выбора SAPI выберите **Получить API-ключ**. Страница возвращает первичный и вторичный ключ. Оба ключа привязаны к одной и той же квоте, поэтому вы можете использовать любой из них.

> [!IMPORTANT]
> * Получить ключ подписки. Прежде чем использовать клиентские библиотеки речи, необходимо иметь [ключ подписки](https://azure.microsoft.com/try/cognitive-services/).
>
> * Используйте свой ключ подписки С помощью прилагаемого рабочего образца приложения C# вставьте свой ключ подписки в текстовое поле при запуске образца. Для дополнительных сведений см. [Запустите образец приложения](#step-3-run-the-sample-application).

## <a name="step-1-install-the-sample-application"></a>Шаг 1. Установите пример приложения

1. Запустите Visual Studio 2015 и выберите **Файл** > **Открыть** > **Project/Solution** (Проект/решение).

2. Перейдите к папке, где были сохранены загруженные файлы API распознавания речи. Выберите **Речь** > **Windows** и затем выберите папку образца WP.

3. Для открытия дважды щелкните файл решения Visual Studio 2015 (SLN) с именем SpeechToTextWPF-Samples.sln. Решение откроется в Visual Studio.

## <a name="step-2-build-the-sample-application"></a>Шаг 2. Создайте пример приложения

1. Если необходимо использовать *распознавание с намерением*, необходимо сначала зарегистрироваться в [Интеллектуальной службе распознавания речи (LUIS)](https://azure.microsoft.com/services/cognitive-services/language-understanding-intelligent-service/). Используйте URL-адрес конечной точки приложения LUIS, чтобы установить значение ключа `LuisEndpointUrl` в app.config-файле в папке samples/SpeechRecognitionServiceExample. Дополнительные сведения об URL-адресе конечной точки приложения LUIS см. в разделе [Publish your app](../../luis/luis-get-started-create-app.md#publish-your-app) (Публикация приложения).

   > [!TIP]
   > Замените символ `&` в URL-адресе конечной точки LUIS `&amp;`, чтобы убедиться, что URL-адрес правильно интерпретирован синтаксическим анализатором XML.

2. Нажмите клавиши CTRL+SHIFT+B или выберите действие **Cобрать** в меню ленты. Затем выберите **Собрать решение**.

## <a name="step-3-run-the-sample-application"></a>Шаг 3. Запустите пример приложения

1. После завершения сборки нажмите клавишу F5 или щелкните **Запустить** в меню ленты, чтобы запустить образец.

2. Перейдите в окно **Образец оксфордского проекта преобразования речи в текст**. Вставьте ключ подписки в текстовое поле **Здесь вставить ключ подписки для запуска**, как показано ниже. Для сохранения ключа подписки на ПК или ноутбуке выберите **Сохранить ключ**. Чтобы удалить ключ подписки из системы, выберите **Удалить ключ**. Таким образом ключ удаляется с ноутбука или компьютера.

   ![Вставка ключа в службу распознавания речи](../Images/SpeechRecog_paste_key.PNG)

3. В разделе **Источник распознавания речи** выберите один из шести источников речи, которые делятся на две основные категории ввода.

   * Использование микрофона компьютера или присоединенного микрофона для записи речи.
   * Воспроизведение звукового файла.

   Каждая категория имеет три режима распознавания.

    * **Режим ShortPhrase**. Фраза не длиннее 15 секунд. Когда данные отправляются на сервер, клиент получает несколько промежуточных результатов и один конечный результат с несколькими лучшими вариантами.
    * **Режим LongDictation**. Высказывание продолжительностью до 2 минут. После отправки данных на сервер клиент получит несколько промежуточных и несколько конечных результатов в зависимости от того, как сервер разбивает предложение.
    * **Обнаружение намерения**. Сервер возвращает дополнительную структурированную информацию о вводе речи. Чтобы использовать обнаружение намерения, необходимо сначала обучить модель с помощью [интеллектуальной службы распознавания речи (LUIS)](https://azure.microsoft.com/services/cognitive-services/language-understanding-intelligent-service/).

Используйте образец звуковых файлов с этого примера приложения. Найдите файлы в репозитории, который был загружен в этом примере в папке samples/SpeechRecognitionServiceExample. Когда вы выбираете **Использовать файл WAV для режима ShortPhrase** или **Использовать файл WAV для режима LongDictation** для ввода речи, эти звуковые файлы образца запускаются автоматически, если не выбраны никакие другие файлы. В настоящее время поддерживаются только файлы в звуковом формате WAV.

![Интерфейс преобразования речи в текст](../Images/HelloJones.PNG)

## <a name="samples-explained"></a>Описание образцов

### <a name="recognition-events"></a>События распознавания

* **События частичных результатов**. Это событие вызывается каждый раз, когда служба речи предсказывает, что вы можете сказать, даже до того, как вы закончите разговор (если вы используете `MicrophoneRecognitionClient`) или закончите отправку данных (если вы используете `DataRecognitionClient`).
* **События ошибок**. Вызываются, когда служба обнаруживает ошибку.
* **События с намерением**. Вызывает на клиенты "WithIntent" (только в режиме ShortPhrase) после синтаксического анализа распознавания окончательного результата в структурированном намерении JSON.
* **События результатов**.
  * В режиме `ShortPhrase` это событие вызывается и возвращает самые лучшие результаты после окончания речи.
  * В режиме `LongDictation` обработчик событий может вызываться несколько раз в зависимости от того, где служба распознает паузы в предложении.
  * **Для каждого из самых лучших вариантов** возвращаются значение достоверности и несколько различных форм распознанного текста. Для получения дополнительных сведений см. раздел [Формат выходных данных](../Concepts.md#output-format).

Обработчики событий уже описаны в коде в виде комментариев к коду.

## <a name="related-topics"></a>Связанные разделы

* [Справка о рабочей библиотеке речи C# Microsoft](https://cdn.rawgit.com/Microsoft/Cognitive-Speech-STT-Windows/master/docs/SpeechSDK/index.html)
* [Начало работы с API распознавания речи Microsoft в Java на Android](GetStartedJavaAndroid.md)
* [Начало работы с API распознавания речи Microsoft в Objective-C на iOS](Get-Started-ObjectiveC-iOS.md)
* [Начало работы с API распознавания речи Microsoft в JavaScript](GetStartedJSWebsockets.md)
* [Начало работы с API распознавания речи Microsoft с использованием REST](GetStartedREST.md)
