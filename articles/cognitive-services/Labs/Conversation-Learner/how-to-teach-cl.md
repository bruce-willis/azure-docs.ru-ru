---
title: Как использовать приложение Conversation Learner (Обучение диалогам) Microsoft Cognitive Services | Документация Майкрософт
titleSuffix: Azure
description: Узнайте, как использовать приложение Conversation Learner (Обучение диалогам).
services: cognitive-services
author: v-jaswel
manager: nolachar
ms.service: cognitive-services
ms.component: conversation-learner
ms.topic: article
ms.date: 04/30/2018
ms.author: v-jaswel
ms.openlocfilehash: 639fea64fc8eeb2c1f6e6240c4eb26efc68febbd
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35381737"
---
# <a name="how-to-teach-with-conversation-learner"></a>Использование приложения Conversation Learner (Обучение диалогам) 

В этом документе объясняется, какие сигналы понимает приложение Conversation Learner (Обучение диалогам) и описывается процесс обучения.  

Обучение можно разделить на два отдельных этапа: извлечение сущности и выбор действия.

## <a name="entity-extraction"></a>Извлечение сущностей

Для извлечения сущностей приложение Conversation Learner (Обучение диалогам) использует [LUIS](https://www.luis.ai).  Если вы знакомы с LUIS, именно этот механизм применяется к извлечению сущностей в приложении Conversation Learner (Обучение диалогам).

Модели извлечения сущностей осведомлены о *содержимом* и *контексте* внутри фразы пользователя.  Например, если слово "Seattle" было помечено как город в одной фразе, например "What's the weather in Seattle", при извлечении сущности распознается такое же содержимое ("Seattle"), как и этот город, в другой фразе, такой как "Population of Seattle", даже если фразы сильно отличаются.  И наоборот, если слово "Francis" распознано как имя во фразе "Schedule a meeting with Francis", то новое, ранее не встречавшееся имя может быть распознано в аналогичном контексте, например "Set up a meeting with Robin".  Машинное обучение используется, когда нужно следить за содержимым, контекстом или и тем, и другим, на основе примеров обучения.

Сейчас при извлечении сущности учитывается только содержимое текущей фразы.  В отличие от выбора действия (ниже) при этом не учитывается история диалога, такая как предыдущие системные изменения, пользовательские изменения или ранее распознанные сущности.  В результате поведение при извлечении сущности "совместно используется" во всех фразах.  Например, если в одной фразе пользователя "I want Apple" слово "Apple" отмечено как тип сущности "Fruit", модель извлечения сущностей ожидает, что в этой фразе ("I want Apple") слово "Apple" будет всегда иметь такой тип сущности.

Если извлечение сущности работает не так, как ожидалось, ниже приведены возможные решения:

- В первую очередь необходимо добавить дополнительные примеры обучения, особенно примеры, в которых содержится типичный контекст сущности (окружающие слова) или исключения.
- При необходимости добавьте свойство "Ожидаемые сущности" к действию.  Дополнительные сведения см. в руководстве по ожидаемым сущностям.
- Вы можете добавить ручную обработку в `EntityExtractionCallback` для извлечения сущностей с использованием кода, но это наименее оптимальный подход, так как преимущества машинного обучения не будут использоваться по мере развития вашей системы.

## <a name="action-selection"></a>Выбор действия

При выборе действия используется рекуррентная нейронная сеть, которая принимает всю историю диалогов в качестве входных данных.  Таким образом, выбор действий — это процесс с отслеживанием состояния, которому известны предыдущие пользовательские фразы, значения сущностей и системные высказывания.  

В процессе обучения по понятным причинам отдается предпочтение определенным сигналам.  Другими словами, если приложение Conversation Learner (Обучение диалогам) может объяснить решение о выборе действия, используя "более предпочтительные" сигналы, так и будет. Если это невозможно, тогда оно будет использовать "менее предпочтительные" сигналы.

Ниже приведена таблица, в которой показаны все сигналы приложения Conversation Learner (Обучение диалогам), а также представлены сведения о том, какие из них используются при выборе действия.  Обратите внимание, что порядок слов во фразе пользователя не учитывается.

Сигнал | Предпочтения (1 — наиболее предпочтительно) | Заметки
--- | --- | --- 
Действия системы в предыдущем случае | 1 | 
Сущности, присутствующие в текущем случае | 1 | 
Является ли это первым случаем | 1 |
Точное совпадение слов в текущей фразе пользователя | 2 | 
Слова со схожим значением в текущей фразе пользователя | 3 | 
Действия системы перед предыдущим случаем | 4. |
Сущности, присутствующие в предыдущих случаях | 4. | 
Пользовательские фразы до текущего случая | 5 | 

Обратите внимание, что при выборе действия принимается содержимое системных действий: текст, содержимое карты, имя или поведение API. Принимается только идентификатор действия системы.  В результате при изменении содержания действия поведение модели выбора действия не изменится.

Кроме того, обратите внимание, что содержимое и значения сущностей не используются. Учитывается только их наличие или отсутствие.

Если выбор действия работает не так, как ожидалось, ниже приведены возможные решения:

- Добавьте дополнительные диалоги для обучения, особенно диалоги, иллюстрирующие действия, на которые следует обращать внимание при выборе действия.  Например, если при выборе действия следует предпочесть один сигнал другому, приведите примеры, которые показывают, что предпочтительный сигнал находится в одном состоянии, а состояние других сигналов меняется.  Для некоторых последовательностей может потребоваться несколько диалогов для обучения.
- Добавьте сущности Required и Disqualifying в определения действия.  Это ограничивает доступность действий и может быть полезно для выражения бизнес-правил и некоторых очевидных шаблонов. 

## <a name="updates-to-models"></a>Обновление моделей

Каждый раз, когда вы добавляете или изменяете сущность, действие или диалог пользовательского интерфейса, создается запрос на повторное обучение как модели извлечения сущности, так и модели выбора действия.  Этот запрос помещается в очередь, а повторное обучение выполняется асинхронно.  Когда новая модель становится доступна, с этого момента она начинает использоваться для извлечения сущностей и выбора действий.  Этот процесс повторного обучения часто занимает около 5 секунд, но может быть длиннее, если модель сложная, или если нагрузка на службу обучения высока.

Так как обучение выполняется асинхронно, возможно, что внесенные вами изменения отразятся не сразу.  Если извлечение сущности или выбор действия работают не так, как ожидалось, в зависимости от изменений, внесенных за последние 5–10 секунд, причиной может быть именно это.

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Default values and boundaries](./cl-values-and-boundaries.md) (Значение и границы по умолчанию)
