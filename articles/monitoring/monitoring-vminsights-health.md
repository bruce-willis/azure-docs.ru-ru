---
title: Мониторинг работоспособности виртуальной машины Azure с помощью Azure Monitor для виртуальных машин | Документация Майкрософт
description: В этой статье объясняется, как оценить работоспособность виртуальной машины и операционной системы с помощью Azure Monitor для виртуальных машин.
services: azure-monitor
documentationcenter: ''
author: mgoedtel
manager: carmonm
editor: ''
ms.assetid: ''
ms.service: azure-monitor
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/18/2018
ms.author: magoedte
ms.openlocfilehash: c8a8598640e31f59476b5b3351fdb2eab7b66a6c
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46952925"
---
# <a name="understand-the-health-of-your-azure-virtual-machines-with-azure-monitor-for-vms"></a>Общие сведения об оценке работоспособности виртуальных машин Azure с помощью Azure Monitor для виртуальных машин
Azure предлагает несколько служб, каждая из которых выполняет определенную роль или задачу мониторинга. Но полноценный и подробный анализ работоспособности операционной системы, размещенной на виртуальных машинах Azure, до сих пор был недоступен.  Вы могли отслеживать некоторые состояния с помощью Log Analytics или Azure Monitor, но эти решения не предназначены для моделирования и представления работоспособности ключевых компонентов или общей работоспособности виртуальной машины.  Платформа Azure Monitor для виртуальных машин осуществляет упреждающий мониторинг доступности и производительности гостевой ОС Windows или Linux. Платформа использует модель ключевых компонентов и связей между ними, критерии оценки работоспособности этих компонентов и оповещения об обнаружении состояний неработоспособности.  

В Azure Monitor есть два варианта просмотра сведений об общей работоспособности виртуальной машины Azure: непосредственно с виртуальной машины или с платформы Azure Monitor для всех виртуальных машин в группе ресурсов.

Из этой статьи вы узнаете, как быстро оценить, изучить и устранить обнаруженные проблемы с работоспособностью.

Сведения о настройке Azure Monitor для виртуальных машин, см. в [этой статье](monitoring-vminsights-onboard.md).

## <a name="monitoring-configuration-details"></a>Сведения о настройке мониторинга
В этом разделе описаны критерии работоспособности, используемые по умолчанию для мониторинга виртуальных машин Azure на базе Windows и Linux.

### <a name="windows-vms"></a>Виртуальные машины Windows

- доступный объем памяти, мегабайт; 
- среднее время на операцию записи, секунд (логический диск);
- среднее время на операцию записи, секунд (диск);
- среднее время на операцию чтения, секунд (логический диск);
- среднее время на операцию перемещения, секунд (логический диск);
- среднее время на операцию чтения, секунд (диск);
- среднее время на операцию перемещения, секунд (диск);
- текущая длина очереди диска (логический диск);
- текущая длина очереди диска (диск);
- процент времени простоя диска;
- ошибка или повреждение файловой системы;
- мало свободного пространства на логическом диске (в процентах);
- мало свободного пространства на логическом диске (в мегабайтах);
- процент времени простоя логического диска;
- страниц памяти в секунду;
- процент используемой пропускной способности чтения;
- процент используемой общей пропускной способности;
- процент используемой пропускной способности записи;
- процент используемой выделенной памяти;
- процент времени простоя физического диска;
- работоспособность службы DHCP-клиента;
- работоспособность службы DNS-клиента;
- работоспособность службы RPC;
- работоспособность службы сервера;
- общий процент использования ЦП;
- работоспособность службы журнала событий Windows;
- работоспособность службы брандмауэра Windows;
- работоспособность службы удаленного управления Windows.

### <a name="linux-vms"></a>Виртуальные машины Linux
- диск, средн. — время обращения к диску (с) 
- диск, средн. — время чтения с диска (с) 
- диск, средн. — время записи на диск (с) 
- работоспособность диска;
- свободное пространство на логическом диске;
- свободное пространство на логическом диске (в процентах);
- свободные дескрипторы на логическом диске (в процентах);
- работоспособность сетевого адаптера;
- процент времени DPC процессора;
- процент процессорного времени процессора;
- общее процессорное время в процентах;
- общее время DCP в процентах;
- доступный для операционной системы объем памяти, мегабайт.

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure
Войдите на [портале Azure](https://portal.azure.com). 

## <a name="introduction-to-health-experience"></a>Знакомство с интерфейсом для оценки работоспособности системы
Прежде чем углубляться в тонкости использования функции для оценки работоспособности виртуальной машины или группы виртуальных машин, мы представим краткий обзор, чтобы вам было легче понять отображаемую информацию и визуализации.  

## <a name="view-health-directly-from-a-virtual-machine"></a>Просмотр сведений о работоспособности непосредственно с виртуальной машины 
Чтобы просмотреть состояние работоспособности виртуальной машины Azure, выберите **Аналитические сведения (предварительная версия)** в левой области страницы виртуальной машины. На странице аналитики виртуальных машин по умолчанию открывается вкладка **Работоспособность** с представлением работоспособности виртуальной машины.  

![Представление работоспособности выбранной виртуальной машины Azure в Azure Monitor для виртуальных машин](./media/monitoring-vminsights-health/vminsights-directvm-health.png)

На вкладке **Работоспособность** в разделе **Работоспособность гостевых виртуальных машин** отображаются сведения о текущей работоспособности виртуальной машины и общее число оповещений о неработоспособности определенного компонента. Дополнительные сведения см. в разделе [Создание оповещений и управление ими](#alerting-and-alert-management).  

Для виртуальной машины определены следующие состояния работоспособности: 

* **Исправно.** Для виртуальной машины не обнаружено никаких проблем, и она работает так, как нужно.  
* **Критическое.** Обнаружена одна или несколько критических проблем, которые необходимо решить для восстановления правильной функциональности. 
* **Предупреждение.** Обнаружена одна или несколько проблем, без устранения которых состояние работоспособности может стать критическим.  
* **Неизвестно.** Если службе не удается установить соединение с виртуальной машиной, для состояния работоспособности указывается значение "Неизвестно".  

Щелкните **Просмотреть диагностику работоспособности**, чтобы открыть страницу со списком всех компонентов виртуальной машины, для которых здесь указаны критерии работоспособности, изменения состояний и другие серьезные проблемы, обнаруженные в ходе мониторинга компонентов виртуальной машины. Дополнительные сведения см. в разделе [Диагностика работоспособности](#health-diagnostics). 

В разделе **Работоспособность компонентов** представлена таблица со сводной информацией о состояниях работоспособности по основным категориям, отслеживаемым для соответствующих областей, например **ЦП**, **Память**, **Диск** и **Сеть**.  Выбрав любой из этих компонентов, вы откроете страницу со списком всех аспектов мониторинга работоспособности и указанием состояния работоспособности для каждого из них.  

Если страница работоспособности открывается с виртуальной машины Azure под управлением операционной системы Windows, в разделе **Работоспособность основных служб** отображаются сведения о работоспособности для пяти основных служб Windows.  Выберите любую из них, чтобы открыть страницу со списком критериев работоспособности для мониторинга этого компонента и сведениями о его работоспособности.  Щелкните имя критерия работоспособности, чтобы открыть панель свойств, на которой можно просмотреть сведения о конфигурации, в том числе об оповещениях Azure Monitor для этого критерия работоспособности. Дополнительные сведения см. в разделе о [диагностике работоспособности и использовании критериев работоспособности](#health-diagnostics).  

## <a name="aggregate-virtual-machine-perspective"></a>Агрегированное представление виртуальных машин
Чтобы просмотреть сводные данные о работоспособности всех виртуальных машин в группе ресурсов, выберите на портале в списке навигации пункт **Azure Monitor**, а затем — элемент **Виртуальные машины (предварительная версия)**.  

![Страница аналитики виртуальных машин. Представление мониторинга в Azure Monitor](./media/monitoring-vminsights-health/vminsights-aggregate-health.png)

В раскрывающихся списках **Подписка** и **Группа ресурсов** выберите наиболее подходящий вариант, который включает целевые виртуальные машины, чтобы просмотреть для них сведения о работоспособности. 

На вкладке **Работоспособность** можно получить следующие сведения:

* Сколько виртуальных машин находятся в критическом, неработоспособном или исправном состоянии либо не отправляют данные (то есть имеют неизвестное состояние).
* Для каких виртуальных машин и с какими операционными системами (ОС) зафиксировано состояние неработоспособности.
* Сколько виртуальных машин находятся в неработоспособном состоянии из-за проблем с процессором, диском, памятью или сетевым адаптером (в разбивке по категориям состояний работоспособности).  
* Сколько виртуальных машин находятся в неработоспособном состоянии из-за проблем с базовой операционной системой (в разбивке по категориям состояний работоспособности).

Здесь вы можете быстро определить наиболее критичные проблемы, которые обнаруживаются с помощью профилактического мониторинга виртуальной машины, а также просмотреть предупреждения о работоспособности виртуальной машины и соответствующие статьи базы знаний для диагностики и исправления проблемы.  Чтобы открыть страницу [Все оповещения](../monitoring-and-diagnostics/monitoring-overview-unified-alerts.md#all-alerts-page), отфильтрованную по конкретной серьезности, щелкните ее.

В списке **Распределение виртуальных машин по операционной системе** перечислены виртуальные машины по каждому выпуску Windows и (или) версии дистрибутива Linux. В каждой категории операционных систем виртуальные машины дополнительно разделены по состояниям работоспособности. 

![Страница аналитики виртуальных машин. Представление с распределением виртуальных машин](./media/monitoring-vminsights-health/vminsights-vmdistribution-by-os.png)

Для виртуальной машины определены следующие состояния работоспособности: 

* **Исправно.** Для виртуальной машины не обнаружено никаких проблем, и она работает так, как нужно.  
* **Критическое.** Обнаружена одна или несколько критических проблем, которые необходимо решить для восстановления правильной функциональности. 
* **Предупреждение.** Обнаружена одна или несколько проблем, без устранения которых состояние работоспособности может стать критическим.  
* **Неизвестно.** Если службе не удается установить соединение с виртуальной машиной, для состояния работоспособности указывается значение "Неизвестно".  

Вы можете щелкнуть любой элемент столбца, например **Число виртуальных машин**, **Критическое**, **Предупреждение**, **Исправно** или **Неизвестно**, чтобы открыть страницу **Виртуальные машины** с подробными результатами, отфильтрованными по выбранному столбцу. Например, если мы хотим просмотреть все виртуальные машины с ОС **Red Hat Enterprise Linux версии 7.5**, щелкните значение **Число виртуальных машин**, отображаемое для этой ОС. Откроется показанная ниже страница со списком виртуальных машин по этому фильтру и сведениями о работоспособности для них.  

![Пример сводного монитора для виртуальных машин Red Hat Linux](./media/monitoring-vminsights-health/vminsights-rollup-vm-rehl-01.png)
 
На странице **Виртуальные машины** вы можете выбрать имя виртуальной машины в столбце **Имя виртуальной машины**, чтобы перейти на страницу экземпляра виртуальной машины. Здесь представлены подробные сведения об оповещениях и обнаруженных несоответствиях критериям работоспособности, которые влияют на работоспособность выбранной виртуальной машины.  На этой странице можно отфильтровать сведения о работоспособности, щелкнув значок **Состояние работоспособности** в верхнем левом углу страницы. Например, можно отобразить все компоненты, которые находятся в неработоспособном состоянии или просмотреть оповещения о работоспособности виртуальной машины, вызванные неработоспособным компонентом, в разбивке по категориям серьезности предупреждения.    

Если щелкнуть имя виртуальной машины в представлении списка виртуальных машин, откроется та же самая страница **Работоспособность** для этой виртуальной машины, что и при выборе для нее ссылки **Аналитические сведения (предварительная версия)**.

![Страница аналитики виртуальных машин. Информация по выбранной виртуальной машине Azure](./media/monitoring-vminsights-health/vminsights-directvm-health.png)

Здесь вы видите сводный монитор **Состояние работоспособности** для виртуальной машины и **оповещения**, сгруппированные по уровням серьезности, то есть оповещения о работоспособности виртуальной машины, создаваемые при ухудшении работоспособности.  Если выбрать элемент **VMs in critical condition** (Виртуальные машины в критическом состоянии), откроется страница со сведениями об одной или нескольких виртуальных машинах, которые находятся в критическом состоянии.  Щелкните состояние работоспособности любой из виртуальных машин в этом списке, чтобы для виртуальной машины отобразилось представление **Диагностика работоспособности**.  Здесь можно выяснить, по каким критериям определена проблема с работоспособностью. На странице **Диагностика работоспособности** отобразятся сведения обо всех компонентах виртуальной машины и критериях работоспособности для них, по которым определено текущее состояние работоспособности.  Дополнительные сведения см. в разделе [Диагностика работоспособности](#health-diagnostics).  

Щелкните **Просмотреть все условия работоспособности**, чтобы открыть страницу со списком всех доступных для этой функции критериев работоспособности.  Эти данные можно дополнительно отфильтровать по следующим параметрам:

* **Тип.** Есть три типа критериев работоспособности для оценки условий и общего состояния работоспособности отслеживаемой виртуальной машины.  
    a. **Блок.** Отслеживается определенный модуль виртуальной машины. К этому типу критериев работоспособности относятся проверка счетчика производительности для определения производительности компонента, выполнение закодированной в скрипте синтетической транзакции или отслеживание события, свидетельствующего о наличии ошибки.  По умолчанию для фильтра указано именно значение "Блок".  
    b. **Зависимость.** Предоставляется сводный монитор по нескольким сущностям. Такой критерий работоспособности определяет, что работоспособность определенной сущности зависит от работоспособности сущностей другого типа, которые необходимы ей для успешной работы.  
    c. **Агрегация.** Предоставляются обобщенные сведения о работоспособности по другим критериям работоспособности. В этом критерии работоспособности обычно используются сведения по критерию "Блок" и (или) "Зависимость". Критерий агрегации не только позволяет лучше упорядочить несколько разных критериев для одной сущности, но и определить уникальные состояния работоспособности для отдельных категорий сущностей.

* **Категория.** Этот тип критерия работоспособности используется, чтобы сгруппировать аналогичные критерии для отчетности.  Это могут быть критерии **доступности** или **производительности**.

Вы можете просмотреть более подробные сведения, например найти конкретные неработоспособные экземпляры, щелкнув значение в столбце **Unhealthy Component** (Неработоспособный компонент).  На этой странице представлена таблица со списком компонентов, которые находятся в критическом состоянии.    

## <a name="health-diagnostics"></a>Диагностика работоспособности
На странице **Диагностика работоспособности** отображается список компонентов виртуальной машины и все существующие для них критерии работоспособности, сведения об изменении состояний и серьезных проблемах, которые обнаружены в ходе мониторинга объектов, связанных с виртуальной машиной. 

![Пример страницы диагностики работоспособности для виртуальной машины](./media/monitoring-vminsights-health/health-diagnostics-page-01.png)

Диагностику работоспособности можно запустить указанными ниже способами.

* Через сводный монитор работоспособности для всех виртуальных машин, который отображается в представлении агрегированных сведений о виртуальной машине в Azure Monitor.  На странице **работоспособности** щелкните значок состояния работоспособности **Критическое**, **Предупреждение**, **Исправно** или **Неизвестно** в разделе **Работоспособность гостевой виртуальной машины**, а затем перейдите к странице со списком виртуальных машин, соответствующих выбранной категории.  Если щелкнуть значение в столбце **Состояние работоспособности**, откроется страница диагностики работоспособности для конкретной виртуальной машины.      

* Через операционную систему в представлении агрегированных сведений о виртуальной машине в Azure Monitor. Из раздела **Распределение виртуальных машин** при выборе любого из значений в столбцах открывается страница **Виртуальные машины** со списком в табличном виде, который отфильтрован по выбранной категории.  Если щелкнуть значение в столбце **Состояние работоспособности**, откроется страница диагностики работоспособности для выбранной виртуальной машины.    
 
* С гостевой виртуальной машины на вкладке **Работоспособность** в Azure Monitor для виртуальных машин. Нужно выбрать **Просмотреть диагностику работоспособности**. 

На странице диагностики работоспособности сведения о работоспособности упорядочены по следующим категориям: 

* Доступность
* Производительность
 
Все критерии работоспособности, определенные для выбранного целевого объекта, отображаются в соответствующей категории. 

Для каждого критерия работоспособности определяется одно из трех состояний работоспособности — *Критическое*, *Предупреждение* или *Исправно*. Есть еще состояние *Неизвестно*, которое обозначает не состояние работоспособности как таковое, а состояние мониторинга для определенной функции.  

В следующей таблице собраны сведения о состояниях работоспособности, которые отображаются на странице диагностики работоспособности.

|Значок |Исправное состояние |Значение |
|-----|-------------|------------|
| |Healthy |Состояние работоспособности "Исправно" присваивается в тех случаях, когда соблюдаются определенные условия работоспособности. Для родительских сводных мониторов выполняется сведение всех дочерних элементов. При этом отображается только самое хорошее или самое плохое из состояний этих дочерних элементов.|
| |критические ошибки. |Состояние работоспособности "Критическое" присваивается в тех случаях, когда не соблюдаются определенные условия работоспособности. Для родительских сводных мониторов выполняется сведение всех дочерних элементов. При этом отображается только самое хорошее или самое плохое из состояний этих дочерних элементов.|
| |Предупреждение |Состояние работоспособности получает значение "Предупреждение", когда значение условия работоспособности находится в диапазоне между двумя порогами, настроенными для уровней *Предупреждение* и *Критическое*. Для сводных мониторов состояние *Предупреждение* присваивается в том случае, если один или несколько его дочерних элементов находятся в состоянии предупреждения. Если же одновременно для какого-либо дочернего элемента зафиксировано состояние *Критическое*, а для другого — состояние *Предупреждение*, в родительском сводным мониторе для состояния работоспособности отображается значение *Критическое*.|
| |Unknown |Состояние работоспособности *Неизвестно* присваивается в тех случаях, когда по любой причине не удается установить состояние работоспособности. Например, если монитор не может собрать данные, служба выполняет инициализацию и т. д.| 

На странице "Диагностика работоспособности" есть три основных раздела:

* "Модель компонентов"; 
* Health Criteria (Критерии работоспособности);
* "Изменения состояния". 

![Разделы страницы диагностики работоспособности](./media/monitoring-vminsights-health/health-diagnostics-page-02.png)

### <a name="component-model"></a>Модель компонентов
Крайний слева столбец на странице диагностики работоспособности содержит модель компонентов. В этом столбце отображаются все компоненты и обнаруженные экземпляры, связанные с виртуальной машиной. 

В следующем примере обнаружены следующие компоненты: диск, логический диск, процессор, память и операционная система. Для этих компонентов обнаружено и отображено в этом столбце несколько экземпляров: два экземпляра логического диска **/**, **/boot** и  **/mnt/resource**, один экземпляр сетевого адаптера **eth0**, два экземпляра диска, **sda** и **sdb**, два экземпляра процессора, **0 и 1**, а также **Red Hat Enterprise Linux Server версии 7.4 (Maipo) (операционная система)**. 

![Пример модели компонентов в разделе диагностики работоспособности](./media/monitoring-vminsights-health/health-diagnostics-page-component.png)

### <a name="health-criteria"></a>Критерии работоспособности
Центральный столбец на странице диагностики работоспособности называется **Health Criteria** (Критерии работоспособности). Модель работоспособности, созданная для виртуальной машины, отображается здесь в виде иерархического дерева. Модель работоспособности для виртуальной машины состоит из критериев работоспособности "Блок", "Зависимость" и "Агрегация".  

![Пример критериев работоспособности в разделе диагностики работоспособности](./media/monitoring-vminsights-health/health-diagnostics-page-healthcriteria.png)

С помощью каждого критерия работоспособность отслеживаемого экземпляра оценивают по определенному показателю, например по порогу или состоянию сущности и т. д. Критерий работоспособности может принимать два или три состояния работоспособности, как описано в разделе выше. В любой момент критерий работоспособности может находиться только в одном из допустимых состояний. 

Общая работоспособность целевого объекта определяется работоспособностью по каждому критерию, установленному в модели работоспособности. Это может быть любое сочетание критериев работоспособности для самого целевого объекта или компонентов, от которых он зависит, свернутых в сводный монитор. Эта иерархия проиллюстрирована в разделе **критериев работоспособности** на странице "Диагностика работоспособности". Политика сведения данных работоспособности определяется в конфигурации критериев агрегации и зависимости. Список настроенных по умолчанию критериев работоспособности для этой функции вы найдете в разделе [Сведения о настройке мониторинга](#monitoring-configuration-details).  

В следующем примере по критерию агрегации **Core Windows Services Rollup** (Сводный монитор по базовым службам Windows) для виртуальной машины на базе Windows оценивается работоспособность самых критичных служб Windows с использованием индивидуальных критериев работоспособности для отдельных служб. Оценивается состояние каждой службы (DNS, DHCP и т. д.), затем на основе полученных сведений определяется состояние для соответствующего сводного монитора работоспособности (как показано ниже).  

![Пример сводного монитора работоспособности](./media/monitoring-vminsights-health/health-diagnostics-windows-svc-rollup.png)

Далее состояние для сводного монитора **Core Windows Services Rollup** (Сводный монитор по базовым службам Windows) учитывается в параметре **Operating System availability** (Доступность операционной системы), для которого, в свою очередь, выполняется сведение в критерий **доступности** виртуальной машины. 

Чтобы изменить конфигурацию для критерия работоспособности **Блок**, щелкните крайнюю справа ссылку с многоточием и выберите действие **Показать сведения**, после чего откроется панель конфигурации. 

![Пример конфигурации критериев работоспособности](./media/monitoring-vminsights-health/health-diagnostics-linuxvm-example-03.png)

На панели конфигурации для выбранного критерия работоспособности (в нашем примере это **свободное пространство на логическом диске (в процентах)**) можно настроить другое число в качестве порога. Этот монитор поддерживает только два состояния, то есть из исправного состояния сразу переключается в критическое.  Критерии работоспособности могут поддерживать три состояния, и тогда для них можно отдельно настроить пороги для предупреждения и критического состояния.  

>[!NOTE]
>Изменения конфигурации, вносимые в критерии работоспособности для одного экземпляра, применяются сразу ко всем отслеживаемым экземплярам.  Например, если вы выберете **/mnt/resource** и измените порог для **свободного пространства на логическом диске (в процентах)**, это значение будет действовать не только для выбранного экземпляра, но и для всех остальных обнаруженных экземпляров логического диска на отслеживаемой виртуальной машине.
>

![Пример настройки критерия работоспособности для базового монитора](./media/monitoring-vminsights-health/health-diagnostics-linuxvm-example-04.png)


### <a name="state-changes"></a>Изменения состояний
В крайнем столбце справа на странице диагностики работоспособности отображаются сведения об **изменениях состояния**. Здесь перечислены все изменения состояний, обнаруженные для выбранных критериев работоспособности в разделе **Health Criteria** (Критерии работоспособности), а также изменения состояний для виртуальной машины, если она была выбрана в столбце таблицы **Модель компонентов** или **Health Criteria** (Критерии работоспособности). 

![Пример изменений состояний в разделе диагностики работоспособности](./media/monitoring-vminsights-health/health-diagnostics-page-statechanges.png)

Этот раздел содержит сведения об изменении состояния критериев работоспособности и времени их изменения с сортировкой по убыванию актуальности.   

### <a name="association-of-component-model-health-criteria-and-state-change-columns"></a>Взаимосвязи между столбцами модели компонентов, критериев работоспособности и изменений состояния 
Эти три столбца связаны друг с другом. Когда пользователь выбирает в столбце "Модель компонентов" обнаруженный экземпляр, раздел **Health Criteria** (Критерии работоспособности) фильтруется по этому компоненту, а затем обновляется столбец **Изменение состояния** в зависимости от набора выбранных критериев работоспособности. 

![Пример выбора отслеживаемого экземпляра и фильтрации результатов](./media/monitoring-vminsights-health/health-diagnostics-linuxvm-example-02.png)

Когда в приведенном выше примере мы выбираем экземпляр **/mnt (логический диск)**, дерево критериев работоспособности фильтруется по экземпляру **/mnt (логический диск)**. Одновременно применяется соответствующий фильтр на вкладках **Доступность** и **Производительность**. Теперь в столбце **Изменение состояния** отображаются только изменения состояния, касающиеся доступности экземпляра **/mnt (логический диск)**. 

Чтобы просмотреть обновленные сведения о работоспособности, обновите страницу диагностики. Для этого щелкните ссылку **Обновить**.  Если состояние работоспособности для критерия работоспособности изменяется с определенным заданным интервалом, это действие позволит избежать ожидания и сразу отобразить свежие данные о работоспособности.  Фильтр **Состояние критериев работоспособности** позволяет ограничить результаты по значению состояния работоспособности: "Исправно", "Предупреждение", "Критическое", "Неизвестно" или получить результаты по всем этим значениям.  Значение времени **Последнее обновление**в верхнем углу справа обозначает момент последней загрузки страницы диагностики работоспособности.  

## <a name="alerting-and-alert-management"></a>Создание оповещений и управление ими 
Функцию оценки работоспособности в Azure Monitor для виртуальных машин можно интегрировать с [интерфейсом оповещений Azure](../monitoring-and-diagnostics/monitoring-overview-unified-alerts.md), чтобы создавать оповещения о переходе критериев работоспособности из состояния "Исправно" в любое неисправное состояние. Оповещения разделяются на несколько уровней серьезности — от 0 до 4, где 0 обозначает наивысший уровень серьезности.  

Общее число оповещений о работоспособности виртуальной машины с разбивкой по уровням серьезности можно найти на панели мониторинга **Работоспособность** в разделе **Оповещения**. Когда вы выбираете общее число оповещений или число, соответствующее определенному уровню серьезности, открывается страница **Оповещения** со списком всех оповещений для выбранного элемента.  Например, если вы выбрали строку для уровня серьезности **Sev level 1**, вы увидите следующее:

![Пример оповещений для уровня серьезности 1](./media/monitoring-vminsights-health/vminsights-sev1-alerts-01.png)

Это представление можно отфильтровать, выбрав значения в раскрывающемся меню в верхней части страницы.

|столбец |ОПИСАНИЕ | 
|-------|------------| 
|Подписка |Выберите подписки Azure. В представление включены только оповещения из выбранных подписок. | 
|Группа ресурсов |Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. | 
|Тип ресурса |Выбор одной или нескольких группу ресурсов. В представление включены только те оповещения, в которых выбранный тип отмечен. Этот столбец становится доступным только после указания группы ресурсов. | 
|Ресурс |Выбор ресурса. В представление включены только те оповещения, целью которых выбраны ресурсы. Этот столбец становится доступным только после указания типа ресурсов. | 
|Уровень серьезности |Выберите серьезность оповещения или щелкните *Все*, чтобы включить оповещения всех уровней серьезности. | 
|Состояние монитора |Выберите условие мониторинга, при котором отображаются предупреждения, созданные системой (*Fired*) или устраненные системой (*Resolved*) при прекращении действия условия. Также можно выбрать вариант *Все*, чтобы отобразить оповещения по любым условиям. | 
|Состояние оповещения |Выберите состояние оповещения *Новое*, *Подтверждено* или *Закрыто* или щелкните *Все*, чтобы включить оповещения во всех состояниях. | 
|Мониторинг службы |Выберите службу или щелкните *Все*, чтобы включить все службы. Эта функция поддерживает только оповещения от Infrastructure Insights. | 
|Диапазон времени| Только оповещения, выполненные в рамках выбранного временного интервала, будут включены в представление. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. | 

При выборе оповещения отображается страница **сведений об оповещении**, где вы можете изменить его состояние. Дополнительные сведения о работе с правилами генерации оповещений и управлении ими см. в статье [Создание и просмотр оповещений, а также управление ими с помощью Azure Monitor](../monitoring-and-diagnostics/monitor-alerts-unified-usage.md).

![Панель сведений о выбранном оповещении](./media/monitoring-vminsights-health/alert-details-pane-01.png)

Также состояние оповещения можно изменить, выбрав одно или несколько оповещений на странице **Все оповещения** в верхнем углу слева и выбрав **Изменить состояние**. На панели **Изменить состояние оповещения** следует выбрать одно из состояний, добавить для него описание в поле **Комментарий** и зафиксировать изменения, нажав кнопку **ОК**. Пока проверяются данные, ход применения изменений можно отслеживать с помощью пункта меню **Уведомления**.  

## <a name="next-steps"></a>Дополнительная информация
Чтобы выявить узкие места производительности и общий уровень загрузки для виртуальных машин, изучите статью о [просмотре данных производительности виртуальной машины](monitoring-vminsights-performance.md). Просмотреть обнаруженные зависимости приложений поможет статья о [функции карты Azure Monitor для виртуальных машин](monitoring-vminsights-maps.md). 