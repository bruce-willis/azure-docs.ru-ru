---
title: Создание диаграммы производительности с помощью службы Azure Monitor для виртуальных машин | Документация Майкрософт
description: "\"Производительность\" — это функция службы Azure Monitor для виртуальных машин, которая автоматически обнаруживает компоненты приложений в системах Windows и Linux и отображает связи между службами. В этой статье рассказывается о том, как использовать эту функцию в различных сценариях."
services: azure-monitor
documentationcenter: ''
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: ''
ms.service: azure-monitor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/17/2018
ms.author: magoedte
ms.openlocfilehash: 06073197254245727cfa41020f060d904a4e50f9
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46957570"
---
# <a name="how-to-chart-performance-with-azure-monitor-for-vms"></a>Создание диаграммы производительности с помощью службы Azure Monitor для виртуальных машин
Служба Azure Monitor для виртуальных машин включает в себя набор диаграмм производительности, ориентированных на несколько ключевых показателей эффективности (KPI), которые помогают определить, насколько эффективно работает виртуальная машина. На диаграммах отображается использование ресурсов за определенный период времени, что позволяет выявлять узкие места, аномалии, а также переключаться на перспективное представление каждой виртуальной машины для просмотра использования ресурсов на основе выбранной метрики. Хотя при анализе производительности следует учитывать множество элементов, служба Azure Monitor для виртуальных машин ориентирована на операционную систему, эффективность которой проявляется в работе процессора, памяти, сетевых адаптеров и дисков. Функция "Производительность" дополняет функцию мониторинга работоспособности и помогает выявлять проблемы, которые указывают на возможный отказ компонентов системы, поддерживает настройку и оптимизацию для повышения эффективности, а также планирование ресурсов.  

## <a name="multi-vm-perspective-from-azure-monitor"></a>Перспективное представление нескольких виртуальных машин в Azure Monitor
В Azure Monitor функция "Производительность" обеспечивает представление всего множества отслеживаемых виртуальных машин, развернутых в группах ресурсов в ваших подписках или во всей среде.  Чтобы получить доступ к Azure Monitor, выполните указанные ниже действия. 

1. На портале Azure выберите **Монитор**. 
2. В разделе **Решения** выберите пункт **Виртуальные машины (предварительная версия)**.
3. Выберите вкладку **Производительность**.

![Представление списка первых N диаграмм производительности в аналитике виртуальных машин](./media/monitoring-vminsights-performance/vminsights-performance-aggview-01.png)

На вкладке **Top N Charts** (Первые N диаграмм), если у вас несколько рабочих областей Log Analytics, выберите рабочую область, которая интегрирована с решением, в селекторе **Рабочая область** вверху страницы.  Затем выберите в селекторе **Группа** подписку, группу ресурсов или конкретную виртуальную машину за указанный период времени.  По умолчанию на диаграммах отображаются последние 24 часа.  С помощью селектора **Временной интервал** можно запросить временной интервал длительностью до 30 дней, чтобы отобразить производительность за прошедший период.   

На странице отображаются пять диаграмм использования ресурсов:

* "Загрузка ЦП (%)" — показывает первые пять виртуальных машин с наибольшей средней загрузкой процессоров. 
* "Доступная память" — показывает первые пять виртуальных машин с наименьшим средним объемом доступной памяти. 
* Logical Disk Space Used % (% используемого места на логических дисках) — показывает первые пять виртуальных машин с наибольшим средним процентом использования места на всех томах дисков. 
* Bytes Sent Rate (Скорость отправки байт) — показывает первые пять виртуальных машин с наибольшим средним количеством отправленных байт. 
* Bytes Receive Rate (Скорость получения байт) — показывает первые пять виртуальных машин с наибольшим средним количеством полученных байт. 

Если щелкнуть в правом верхнем углу любой из пяти диаграмм, откроется представление **Top N List** (Список первых N).  Здесь можно просмотреть использование ресурсов для соответствующей метрики производительности по отдельным виртуальным машинам в виде списка и увидеть, для какой виртуальной машины характерны наиболее высокие показатели.  

![Вид списка первых N для выбранной метрики производительности](./media/monitoring-vminsights-performance/vminsights-performance-topnlist-01.png)

Если щелкнуть виртуальную машину, справа будет развернута область **Свойства**, в которой отображаются свойства выбранного элемента, например сведения о системе, предоставленные операционной системой, свойства виртуальной машины Azure и т. п. Если щелкнуть один из параметров в разделе **Быстрые ссылки**, соответствующий компонент откроется непосредственно на выбранной виртуальной машине.  

![Область "Свойства" виртуальной машины](./media/monitoring-vminsights-performance/vminsights-properties-pane-01.png)

Переключитесь на вкладку **Aggregated Charts** (Сводные диаграммы), чтобы просмотреть метрики производительности, отфильтрованные по средним показателям или процентилям.  

![Сводное представление производительности в аналитике виртуальных машин](./media/monitoring-vminsights-performance/vminsights-performance-aggview-02.png)

Отображаются следующие диаграммы использования ресурсов:

* "Загрузка ЦП (%)" — по умолчанию отображаются среднее значение и верхний 95-й процентиль. 
* "Доступная память" — по умолчанию отображаются среднее значение, верхний 5-й и 10-й процентиль. 
* Logical Disk Space Used % (% используемого места на логических дисках) — по умолчанию отображаются среднее значение и 95-й процентиль. 
* Bytes Sent Rate (Скорость отправки байт) — по умолчанию отображается среднее количество отправленных байт. 
* Bytes Receive Rate (Скорость получения байт) — по умолчанию отображается среднее количество полученных байт.

Также в диапазоне времени можно изменить детализацию диаграмм, выбрав **Ср.**, **Мин.**, **Макс.**, **50-й**, **90-й** и **95-й** в селекторе процентилей.   

Чтобы просмотреть использование ресурсов по отдельным виртуальным машинам в представлении списка и увидеть, для какой машины характерны самые высокие показатели использования, выберите вкладку **Top N List** (Список первых N).  На странице **Top N List** (Список первых N) отображаются первые 20 виртуальных машин, отсортированные по наибольшему использованию ресурсов по 95-му процентилю для метрики *Загрузка ЦП (%)*.  Чтобы просмотреть дополнительные машины, выберите **Загрузить больше**. Отобразятся результаты для первых 500 виртуальных машин. 

>[!NOTE]
>В списке нельзя отобразить более чем 500 машин одновременно.  
>

![Пример страницы Top N List (Список первых N)](./media/monitoring-vminsights-performance/vminsights-performance-topnlist-01.png)

Чтобы отфильтровать результаты по конкретной виртуальной машине в списке, введите ее имя компьютера в текстовое поле **Поиск по имени**.  

Если требуется просмотреть сведения об использовании по другой метрике производительности, в раскрывающемся списке **Метрика** выберите **Доступная память**, **Logical Disk Space Used %** (% используемого места на логических дисках), **Network Received Byte/s** (Получено байт по сети/с) или **Network Sent Byte/s** (Отправлено байт по сети/с), и список обновится, отображая показатели использования по соответствующей метрике.  

Если выбрать виртуальную машину из списка, откроется панель **Свойства** в правой части страницы, где можно выбрать **Сведения о производительности**.  Откроется страница **сведений о виртуальной машине**, ограниченных соответствующей виртуальной машиной, подобно доступу к функции "Производительность" аналитики виртуальных машин непосредственно с виртуальной машины Azure.  

## <a name="view-performance-directly-from-an-azure-vm"></a>Просмотр производительности непосредственно с виртуальной машины Azure
Чтобы получить доступ непосредственно с виртуальной машины, выполните указанные ниже действия.

1. На портале Azure выберите **Виртуальные машины**. 
2. В списке выберите виртуальную машину и в разделе **Мониторинг** выберите пункт **Аналитические сведения (предварительная версия)**.  
3. Выберите вкладку **Производительность**. 

Эта страница содержит не только диаграммы использования производительности, но и таблицу с отображением каждого обнаруженного логического диска, его емкости, использования и общего среднего значения по каждому показателю.  

Отображаются следующие диаграммы использования ресурсов:

* "Загрузка ЦП (%)" — по умолчанию отображаются среднее значение и верхний 95-й процентиль. 
* "Доступная память" — по умолчанию отображаются среднее значение, верхний 5-й и 10-й процентиль. 
* Logical Disk Space Used % (% используемого места на логических дисках) — по умолчанию отображаются среднее значение и 95-й процентиль. 
* Logical Disk IOPS (Операций ввода-вывода в секунду для логических дисков) — по умолчанию отображаются среднее значение и 95-й процентиль.
* Logical Disk MB/s (Мбит/с для логических дисков) — по умолчанию отображаются среднее значение и 95-й процентиль.
* Max Logical Disk Used % (Макс. % использования логических дисков) — по умолчанию отображаются среднее значение и 95-й процентиль.
* Bytes Sent Rate (Скорость отправки байт) — по умолчанию отображается среднее количество отправленных байт. 
* Bytes Receive Rate (Скорость получения байт) — по умолчанию отображается среднее количество полученных байт.

![Представление производительности непосредственно с виртуальной машины в аналитике виртуальных машин](./media/monitoring-vminsights-performance/vminsights-performance-directvm-01.png)

## <a name="next-steps"></a>Дополнительная информация
Чтобы узнать, как использовать функции работоспособности, см. статью [Understand the health of your Azure virtual machines with Azure Monitor for VMs](monitoring-vminsights-health.md) (Общие сведения о работоспособности виртуальных машин Azure с использованием Azure Monitor для виртуальных машин), а для просмотра обнаруженных зависимостей приложений см. статью [Using Azure Monitor for VMs Map to understand application components](monitoring-vminsights-maps.md) (Использование карты Azure Monitor для виртуальных машин для понимания компонентов приложения). 