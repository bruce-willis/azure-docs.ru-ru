---
title: Расширенное обнаружение угроз Azure | Документы Майкрософт
description: Дополнительные сведения о защите идентификации Azure AD и ее возможностях.
services: security
documentationcenter: na
author: UnifyCloud
manager: mbaldwin
editor: TomSh
ms.assetid: ''
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/21/2017
ms.author: TomSh
ms.openlocfilehash: 9b688ca6faaa7e0d84dff0ae28e2a9b8b8279490
ms.sourcegitcommit: 0b4da003fc0063c6232f795d6b67fa8101695b61
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/05/2018
ms.locfileid: "37856884"
---
# <a name="azure-advanced-threat-detection"></a>Расширенное обнаружение угроз Azure

Azure предлагает встроенные функции расширенного обнаружения угроз в таких службах, как Azure Active Directory (Azure AD), Azure Operations Management Suite (OMS) и центр безопасности Azure. С помощью этого набора служб и функций безопасности можно легко и быстро понять, что произошло в развертываниях Azure.

Azure предоставляет широкий набор параметров для настройки безопасности в соответствии с требованиями развернутых приложения. В этой статье обсуждается соответствие этим требованиям.

## <a name="azure-active-directory-identity-protection"></a>Защита идентификации Azure Active Directory

[Защита идентификации Azure AD](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection) — это функция [Azure Active Directory уровня Premium P2](https://docs.microsoft.com/azure/active-directory/active-directory-editions), обеспечивающая обзор всех событий риска и возможных уязвимостей, которые могут влиять на удостоверения организации. Защита идентификации предусматривает возможности обнаружения аномалий Azure AD (они доступны в [отчетах Azure AD об аномальных действиях](https://docs.microsoft.com/azure/active-directory/active-directory-view-access-usage-reports#anomalous-activity-reports)) и новые типы событий риска, которые позволяют обнаруживать аномалии в реальном времени.

![Схема защиты идентификации Azure AD](./media/azure-threat-detection/azure-threat-detection-fig1.png)

Защита идентификации использует адаптивные алгоритмы машинного обучения и эвристические методы, чтобы обнаруживать аномалии и события риска, которые могут указывать на компрометацию удостоверения. На основе этих данных защита идентификации создает отчеты и оповещения, с помощью которых можно исследовать события риска, чтобы предпринять действия по исправлению и устранению рисков.

Защита идентификации Azure Active Directory — это больше, чем просто инструмент для мониторинга и создания отчетности. Она позволяет рассчитать уровень риска для каждого пользователя на основе соответствующих событий и настроить политики рисков, чтобы обеспечить автоматическую защиту удостоверений в организации.

Эти политики рисков наряду с другими [средствами управления условным доступом](https://docs.microsoft.com/azure/active-directory/active-directory-conditional-access) Azure Active Directory и [EMS](https://docs.microsoft.com/azure/active-directory/active-directory-conditional-access) позволяют обеспечить автоматическую блокировку или адаптивные действия по исправлению, включающие сброс пароля и принудительную многофакторную проверку подлинности.

### <a name="identity-protection-capabilities"></a>Возможности защиты идентификации

Защита идентификации Azure Active Directory — это больше, чем просто инструмент для мониторинга и создания отчетности. Для защиты удостоверений организации можно настроить политики на основе рисков, которые автоматически реагируют на обнаруженные проблемы в случае достижения указанного уровня риска. Эти политики, помимо других элементов управления условным доступом Azure Active Directory и EMS, позволяют обеспечить автоматическую блокировку или инициировать адаптивные действия по исправлению, в том числе сброс пароля и принудительную многофакторную идентификацию.

Примеры способов защиты удостоверений Azure, которые могут помочь защитить учетные записи и удостоверения:

[Обнаружение событий риска и учетных записей, подверженных риску](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection#detection)
-   Обнаружение событий риска шести типов с помощью правил машинного обучения и эвристических правил.
-   Расчет уровня риска для пользователя.
-   Предоставление пользовательских рекомендаций для повышения общего уровня безопасности путем информирования об уязвимостях.

[Исследование событий риска](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection#investigation)
-   Отправка уведомлений о событиях риска.
-   Исследование событий риска на основе соответствующей и контекстной информации.
-   Базовые рабочие процессы для отслеживания исследований.
-   Легкий доступ к действиям по исправлению, таким как сброс пароля.

[Политики условного доступа на основе рисков](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection#risky-sign-ins)
-   Уменьшение рисков при сомнительных входах путем блокировки входа или запроса многофакторной проверки подлинности.
-   Блокировка или защита учетных записей с возможным риском.
-   Требовать от пользователей регистрации для многофакторной проверки подлинности.

### <a name="azure-ad-privileged-identity-management"></a>Azure AD Privileged Identity Management

С помощью [управления привилегированными пользователями в Azure Active Directory (PIM)](https://docs.microsoft.com/azure/active-directory/active-directory-privileged-identity-management-configure) можно администрировать, контролировать и отслеживать доступ в пределах организации. Эта функция включает управление доступом к ресурсам в Azure AD и остальным веб-службам Microsoft, таким как Office 365 или Microsoft Intune.

![Схема управления привилегированными пользователями Azure AD](./media/azure-threat-detection/azure-threat-detection-fig2.png)

PIM помогает:

-   Отправлять оповещения и отчеты администраторам Azure AD и предоставлять административный JIT-доступ к веб-службам Microsoft, таким как Office 365 и Intune.

-   Получать отчеты по данным журнала доступа администраторов и изменениям в назначениях администраторов.

-   Получать оповещения о доступе к привилегированным ролям.

## <a name="operations-management-suite"></a>Operations Management Suite

[Operations Management Suite (OMS)](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview) — это облачное решение Майкрософт для управления ИТ-средой, которое помогает управлять локальной и облачной инфраструктурой и защищать ее. Набор OMS реализован как облачная служба, поэтому время, затрачиваемое на подготовку к работе, минимально, как и вложения в службы инфраструктуры. Новые возможности безопасности предоставляются автоматически, что сокращает затраты на текущее обслуживание и обновление.

Помимо предоставления ценных служб, OMS поддерживает интеграцию с компонентами System Center, такими как [System Center Operations Manager](https://blogs.technet.microsoft.com/cbernier/2013/10/23/monitoring-windows-azure-with-system-center-operations-manager-2012-get-me-started/), позволяя распространить текущие инвестиции в управление безопасностью на облачную среду. System Center и OMS поддерживают взаимодействие для формирования полнофункциональной гибридной среды управления.

### <a name="holistic-security-and-compliance-posture"></a>Комплексное состояние безопасности и соответствия

[Панель мониторинга "Безопасность и аудит" OMS](https://docs.microsoft.com/azure/operations-management-suite/oms-security-getting-started) позволяет всесторонне изучать данные об информационной безопасности в вашей организации. Для этого применяются встроенные поисковые запросы, которые позволяют определять важные моменты, требующие вашего внимания. Панель мониторинга "Безопасность и аудит" — это начальный экран для доступа ко всем функциям, связанным с безопасностью в OMS. Она содержит обобщенное представление состояния безопасности компьютеров организации. Она также позволяет просматривать все события за последние 24 часа, 7 дней или другие настраиваемые промежутки времени.

Панели мониторинга OMS помогут вам быстро и легко понять общее состояние безопасности любой среды в контексте ИТ-операций, включая оценку обновлений программного обеспечения, оценку защиты от вредоносных программ и базовые показатели конфигураций. Вы можете изучить готовые данные журнала безопасности, чтобы оптимизировать процессы аудита безопасности и соответствия.

![Панель мониторинга OMS "Безопасность и аудит"](./media/azure-threat-detection/azure-threat-detection-fig3.jpg)

Данные на панели мониторинга OMS "Безопасность и аудит" подразделяются на четыре основные категории:

-   **Домены безопасности**: в этой области можно более детально просмотреть записи безопасности с течением времени, получить доступ к оценке защиты от вредоносных программ, оценке обновлений, сведениям о сетевой безопасности, идентификации и доступе и сведениям о компьютерах с событиями безопасности, а также быстро перейти к панели мониторинга центра безопасности Azure.

-   **Важные проблемы**: в этой области можно быстро определить количество текущих проблем и степень их серьезности.

-   **Обнаружения (предварительная версия)**: эта область позволяет определять схемы атак путем визуализации оповещений системы безопасности, связанных с ресурсами.

-   **Аналитика угроз**: эта область позволяет определять схемы атак путем визуализации общего числа серверов с исходящим вредоносным IP-трафиком, типов вредоносных угроз и карты, на которой показано физическое расположение соответствующих IP-адресов.

-   **Общие запросы безопасности**: в этой области содержится список самых распространенных запросов безопасности, которые можно использовать для мониторинга среды. При выборе любого запроса на панели поиска отображаются результаты для этого запроса.

### <a name="insight-and-analytics"></a>Анализ и аналитика
Ключевым компонентом [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) является репозиторий OMS, который размещен в Azure.

![Схема анализа и аналитики](./media/azure-threat-detection/azure-threat-detection-fig4.png)

Данные собираются в репозиторий из подключенных источников в результате настройки источников данных и добавления решений в подписку.

![Панель мониторинга OMS ](./media/azure-threat-detection/azure-threat-detection-fig5.png)

Источники данных и решения каждого создают различные типы записей, которые имеют собственные наборы свойств, но которые можно анализировать вместе в запросах к репозиторию. Эти же средства и методы можно использовать для работы с разнообразными данными, собранными из различных источников.


Большая часть взаимодействия с Log Analytics осуществляется через портал OMS, который работает в любом браузере и обеспечивает доступ к параметрам конфигурации и многочисленным инструментам для анализа собранных данных и принятия необходимых мер. На портале вы можете использовать:
* [Поиск по журналам](https://docs.microsoft.com/azure/log-analytics/log-analytics-log-searches), при котором вы формируете запросы для анализа собранных данных.
* [Панели мониторинга](https://docs.microsoft.com/azure/log-analytics/log-analytics-dashboards), которые можно настраивать, используя графические представления большинства значимых поисковых запросов.
* [Решения](https://docs.microsoft.com/azure/log-analytics/log-analytics-add-solutions), которые обеспечивают дополнительные функциональные возможности и инструменты анализа.

![Инструменты анализа](./media/azure-threat-detection/azure-threat-detection-fig6.png)

Решения добавляют функциональные возможности в службу Log Analytics. Они выполняются преимущественно в облаке и обеспечивают анализ данных, собираемых в репозитории OMS. В решениях также могут определяться новые типы записей, которые нужно собирать и можно анализировать, используя запросы поиска по журналам или дополнительный пользовательский интерфейс, предоставляемый решением на панели мониторинга OMS.

К решениям такого типа относится панель мониторинга "Безопасность и аудит".

### <a name="automation-and-control-alert-on-security-configuration-drifts"></a>Автоматизация и управление: оповещения об отклонениях показателей конфигурации безопасности

Служба автоматизации Azure позволяет автоматизировать административные процессы с помощью модулей Runbook на основе PowerShell, выполняемых в облаке. Модули Runbook также могут выполняться на сервере в локальном центре обработки данных для управления локальными ресурсами. Служба автоматизации Azure предоставляет функции управления конфигурацией с помощью PowerShell Desired State Configuration (DSC).

![Схема службы автоматизации Azure](./media/azure-threat-detection/azure-threat-detection-fig7.png)

Вы можете создавать ресурсы DSC, размещенные в Azure, управлять ими и назначать их облачным и локальным системам. В результате вы можете определять и автоматически применять их конфигурацию или получать отчеты об отклонении показателей конфигурации, чтобы обеспечить соответствие конфигураций безопасности политике.

## <a name="azure-security-center"></a>Центр безопасности Azure

Центр безопасности Azure помогает защитить ваши ресурсы Azure. Он включает в себя встроенные функции мониторинга безопасности и управления политиками для подписок Azure. В этой службе можно определить политики как для подписок Azure, так и для [групп ресурсов](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-portal) для повышения степени детализации.

![Схема для центра безопасности Azure](./media/azure-threat-detection/azure-threat-detection-fig8.png)

Исследователи корпорации Майкрософт по вопросам безопасности постоянно отслеживают возникающие угрозы. У них есть доступ к обширной телеметрии, которую корпорация Майкрософт получает благодаря своему глобальному присутствию в облаке и на локальных устройствах. Эта обширная и разнообразная коллекция наборов данных позволяет Майкрософт выявлять новые схемы и тенденции атак в своих локальных потребительских и корпоративных продуктах, а также в онлайн-службах.

Поэтому, когда хакеры создают новые, все более сложные эксплойты, центр безопасности обновляет свои алгоритмы обнаружения максимально оперативно. Этот подход позволяет эффективно противостоять стремительно развивающимся угрозам.

![Обнаружение угроз в центре безопасности Azure](./media/azure-threat-detection/azure-threat-detection-fig9.jpg)

Функция обнаружения угроз в центре безопасности автоматически собирает информацию о безопасности из ваших ресурсов Azure, сети и подключенных партнерских решений. Она анализирует эту информацию, сравнивая сведения из разных источников и определяя угрозы.

Приоритет в центре безопасности получают оповещения безопасности и рекомендации по устранению угроз.

В центре безопасности используется расширенная аналитика безопасности, возможности которой значительно превышают возможности подходов, основанных на сигнатурах. Достижения в сфере больших данных и [машинного обучения](https://azure.microsoft.com/blog/machine-learning-in-azure-security-center/) используются для оценки событий во всей облачной структуре. Расширенная аналитика позволяет выявлять угрозы, которые невозможно обнаружить вручную, а также прогнозировать тенденции развития атак. В следующих разделах рассматриваются эти типы анализа безопасности.

### <a name="threat-intelligence"></a>Анализ угроз

В распоряжении корпорации Майкрософт есть огромный объем информации, относящейся к глобальной аналитике угроз.

Данные телеметрии поступают из таких источников, как Azure, Office 365, Microsoft CRM Online, Microsoft Dynamics AX, outlook.com, MSN.com, подразделение Microsoft Digital Crimes Unit (DCU) и центр Microsoft Security Response Center (MSRC).

![Результаты исследования угроз](./media/azure-threat-detection/azure-threat-detection-fig10.jpg)

Исследователи также получают информацию, связанную с аналитикой угроз, от основных поставщиков облачных служб, которые получают ее по сторонним каналам с аналитической информацией об угрозах. Эта информация позволяет центру безопасности Azure оповещать вас об угрозах, которые связаны с известными вредоносными программами. Некоторые примеры:

-   **Использование возможностей машинного обучения**: центр безопасности Azure имеет доступ к огромному объему данных о сетевых операциях в облаке, которые могут использоваться для обнаружения угроз, нацеленных на развертывания Azure.

-   **Обнаружение атак методом подбора**: машинное обучение используется для создания хронологического шаблона попыток удаленного доступа, который позволит обнаруживать атаки методом подбора, направленные на порты SSH (Secure Shell), RDP (протокол удаленного рабочего стола) и SQL.

-   **Обнаружение исходящих атак DDoS и ботнетов**: общей целью атак на облачные ресурсы является использование вычислительной мощности этих ресурсов для выполнения других атак.

-   **Поведенческая аналитика серверов и виртуальных машин**: после нарушения безопасности сервера или виртуальной машины хакеры используют широкий набор методов для выполнения вредоносного кода в этой системе, стараясь избежать обнаружения, обеспечить постоянное присутствие и устранить средства безопасности.

-   **Обнаружение угроз базы данных SQL Azure**: служба обнаружения угроз базы данных SQL Azure выявляет аномальные операции базы данных, указывающее на необычные и потенциально опасные попытки получить доступ к базам данных или использовать их уязвимость.

### <a name="behavioral-analytics"></a>Поведенческая аналитика

Поведенческая аналитика — это метод, в рамках которого данные анализируются и сверяются с набором известных схем. Однако эти схемы — не просто сигнатуры. Они определяются с помощью сложных алгоритмов машинного обучения, которые применяются к объемным наборам данных.

![Результаты поведенческой аналитики](./media/azure-threat-detection/azure-threat-detection-fig11.jpg)

Шаблоны также определяются посредством тщательного анализа вредоносного поведения. Поведенческая аналитика позволяет центру безопасности Azure выявлять скомпрометированные ресурсы. Для этого центр безопасности анализирует журналы виртуальных машин, журналы устройств виртуальной сети, журналы структуры, аварийный дампы и другие источники.

Кроме того, шаблоны соотносятся с другими сигналами, чтобы получить подтверждающие доказательства масштабной кампании. Эта корреляция, в свою очередь, помогает выявить события, которые соответствуют установленным признакам компрометации.

Некоторые примеры:
-   **Выполнение подозрительных процессов.** Злоумышленники используют несколько методик, чтобы выполнять вредоносные программы и не допускать при этом их обнаружения. Например, злоумышленник может дать вредоносной программе то же имя, что и у обычного системного файла, при этом разместив вредоносные файлы в альтернативных расположениях, использовать имя, очень похожее на имя безвредного файла, или замаскировать настоящее расширение файла. Чтобы обнаруживать подобные выбросы, центр безопасности моделирует поведение процессов и отслеживает их выполнение.

-   **Скрытые вредоносные программы и эксплойты**: сложная вредоносная программа может избегать обнаружения традиционным антивирусным ПО. Для этого она либо никогда ничего не записывает на диск, либо шифрует находящиеся на диске программные компоненты. Тем не менее такую программу может обнаружить анализ памяти, так как в ходе своей работы она не может не оставлять следов в памяти. Когда программа дает сбой, аварийный дамп записывает часть памяти в момент сбоя. Анализируя память в аварийном дампе, центр безопасности Azure может выявить методы, с помощью которых хакер использует уязвимости ПО, получает доступ к конфиденциальным данным и тайно пользуется скомпрометированным компьютером, не снижая его производительность.

-   **Путешествие по компьютерам и внутренняя разведка**: чтобы находиться в скомпрометированной сети длительное время, занимаясь поиском и сбором ценных данных, хакеры часто пытаются переходить со скомпрометированного компьютера на другие компьютеры в той же сети. Чтобы обнаруживать попытки хакера укрепиться в сети, центр безопасности отслеживает процессы обработки и входа, например зондирование сети через удаленное выполнение команд и перечисление учетных записей.

-   **Вредоносные сценарии PowerShell**: злоумышленники могут использовать PowerShell для выполнения вредоносного кода на целевых виртуальных машинах. Центр безопасности проверяет процессы PowerShell на предмет подозрительной активности.

-   **Исходящие атаки.** Злоумышленники часто атакуют облачные ресурсы, чтобы дополнительные атаки исходили уже от них. Скомпрометированные виртуальные машины могут быть источником атак методом подбора против других виртуальных машин, могут рассылать спам или сканировать открытые порты и другие устройства в Интернете. Изучая сетевой трафик с помощью машинного обучения, центр безопасности может обнаруживать аномалии в исходящих сетевых подключениях. При обнаружении спама центр безопасности сверяет трафик необычной электронной почты с аналитической информацией из Office 365, чтобы определить, является ли почта нежелательной или рассылается в рамках обычной рекламной кампании.

### <a name="anomaly-detection"></a>Обнаружение аномалий

Центр безопасности Azure выявляет угрозы также с помощью метода обнаружения аномалий. В отличие от поведенческой аналитики (в которой используются известные схемы поведения, созданные на основе объемных наборов данных), обнаружение аномалий является более персонализированной методикой. В ее рамках акцент делается на показатели, стандартные для вашего развертывания. Машинное обучение определяет, какие процессы являются нормальными для вашей среды. Затем вырабатываются правила, в которых обозначаются аномальные условия, свидетельствующие об угрозе безопасности. Ниже приведен пример.

-   **Входящие атаки методом подбора по протоколу RDP или SSH**: ваши развертывания могут включать в себя виртуальные машины с большой нагрузкой, в которые пользователи входят несколько раз в день, и другие виртуальные машины, на которые пользователи входят очень редко или не входят вообще. Центр безопасности Azure может определять стандартные показатели входов на эти виртуальные машины и с помощью машинного обучения определить средние значения этих показателей. В случае каких-либо отклонений от базовых показателей, определенных для характеристик входа, может быть создано оповещение. Степень существенности отклонения также определяется с помощью машинного обучения.

### <a name="continuous-threat-intelligence-monitoring"></a>Непрерывный мониторинг аналитики угроз

В центре безопасности Azure работают глобальные команды по исследованиям в области безопасности и по обработке и анализу данных. Они постоянно наблюдают за изменениями в сфере угроз. В центре безопасности действуют описанные ниже инициативы.

-   **Мониторинг аналитики угроз**: аналитика угроз предусматривает механизмы, индикаторы, результаты и практические советы об имеющихся и возникающих угрозах. Эта информация размещается в сообществе специалистов по безопасности, и корпорация Майкрософт непрерывно отслеживает каналы аналитики угроз из внутренних и внешних источников.

-   **Общий доступ к сигналам**: команды по обеспечению безопасности, задействованные в широком наборе облачных и локальных служб, серверов и клиентских устройств с конечными точками корпорации Майкрософт, обмениваются информацией и анализируют ее.

-   **Специалисты по безопасности Майкрософт**: свой вклад неустанно вносят команды Майкрософт, которые работают в таких узких областях безопасности, как экспертиза и обнаружение веб-атак.

-   **Настройка обнаружения:** алгоритмы испытываются на наборах данных конкретных пользователей, и исследователи по вопросам безопасности проверяют результаты испытаний в тесном сотрудничестве с этими пользователями. Чтобы улучшать алгоритмы машинного обучения, специалисты анализируют ложные и истинные срабатывания.

Все эти инициативы совместно дают общий результат: обнаружение угроз происходит по-новому и более качественно, а пользоваться результатами вы можете прямо сейчас. Вам не приходится прилагать никаких усилий.

## <a name="advanced-threat-detection-features-other-azure-services"></a>Функции расширенного обнаружения угроз: другие службы Azure

### <a name="virtual-machines-microsoft-antimalware"></a>Виртуальные машины: антивредоносная программа (Майкрософт)

[Антивредоносная программа (Майкрософт)](https://docs.microsoft.com/azure/security/azure-security-antimalware) для Azure — это единый агент для приложений и клиентских сред, работающий в фоновом режиме и не требующий вмешательства пользователя. Вы можете развернуть систему защиты, соответствующую рабочим нагрузкам своих приложений, и использовать базовую конфигурацию защиты (по умолчанию) или расширенную настраиваемую конфигурацию, включающую отслеживание вредоносных программ. Антивредоносная программа Azure — это компонент безопасности для виртуальных машин Azure, который автоматически устанавливается на всех виртуальных машинах PaaS в Azure.

#### <a name="microsoft-antimalware-core-features"></a>Основные возможности антивредоносной программы (Майкрософт)

Ниже приведены возможности Azure, при использовании которых развертывается и включается антивредоносная программа (Майкрософт) для ваших приложений:

-   **Защита в режиме реального времени**: мониторинг действий, выполняемых в облачных службах и виртуальных машинах, для обнаружения и блокировки работы вредоносных программ.

-   **Запланированное сканирование**: периодическое целевое сканирование для обнаружения вредоносных программ, включая уже запущенные программы.

-   **Исправление вредоносных действий**: автоматические действия в отношении обнаруженных вредоносных программ, например удаление или помещение в карантин вредоносных файлов, а также удаление из реестра нежелательных записей.

-   **Обновление сигнатур**: автоматическая установка последних версий сигнатур (определений вирусов) с заданной частотой, обеспечивающая актуальность защиты.

-   **Обновление модуля защиты от вредоносных программ**: автоматическое обновление ядра антивредоносной программы (Майкрософт).

-   **Обновление платформы защиты от вредоносных программ**: автоматическое обновление платформы антивредоносной программы (Майкрософт).

-   **Активная защита**: отправка в Microsoft Azure отчетов с метаданными телеметрии, содержащих сведения об обнаруженных угрозах и подозрительных ресурсах. Активная защита обеспечивает быстрое реагирование на возникающие угрозы и синхронное предоставление подписей в режиме реального времени с помощью системы активной защиты Майкрософт.

-   **Отправка примеров**: отправка примеров в службу защиты от вредоносных программ Майкрософт для повышения качества обслуживания и решения проблем.

-   **Исключения**: администраторы приложений и служб могут отключать защиту и сканирование для определенных файлов, процессов и дисков, чтобы повысить производительность, или по другим причинам.

-   **Сбор событий защиты от вредоносных программ**: запись в журнал событий операционной системы данных о работоспособности службы защиты от вредоносных программ, а также сведений о подозрительных действиях и исправлениях. Вся эта информация собирается в учетной записи хранения Azure клиента.

### <a name="azure-sql-database-threat-detection"></a>Обнаружение угроз базы данных SQL Azure

[Обнаружение угроз базы данных Azure SQL](https://azure.microsoft.com/blog/azure-sql-database-threat-detection-your-built-in-security-expert/) — это новая функция аналитики безопасности, встроенная в службу базы данных SQL Azure. Работая круглосуточно, чтобы изучать, профилировать и выявлять аномальные действия с базами данных, служба обнаружения угроз базы данных SQL Azure определяет потенциальные угрозы для базы данных.

Сотрудники службы безопасности или другие назначенные администраторы могут получить немедленное уведомление о подозрительных действиях с базой данных. Каждое уведомление содержит сведения о подозрительном действии и рекомендации по дальнейшему исследованию и снижению угрозы.

В настоящее время служба обнаружения угроз базы данных SQL Azure обнаруживает потенциальные уязвимости, атаки путем внедрения кода SQL и аномальные закономерности в доступе к базам данных.

При получении уведомления об обнаружении угроз по электронной почте пользователи могут перейти к соответствующим записям аудита по прямой ссылке в электронном письме. При переходе по ссылке откроется средство просмотра аудита или предварительно настроенный шаблон аудита Excel, содержащий соответствующие записи аудита во время возникновения подозрительного события со следующими параметрами:

-   Хранилище аудита для сервера или базы данных, на которых были обнаружены аномальные действия базы данных.

-   Таблица хранилища аудита, которая использовалась во время события для записи журнала аудита.

-   Записи аудита за ближайший час после возникновения события.

-   Записи аудита с похожим идентификатором события на момент события (необязательно для некоторых средств проверки).

Средства обнаружения угроз базы данных SQL используют одну из следующих методик обнаружения:

-   **Детерминированное обнаружение**: определяет подозрительные закономерности (на основе правил) в SQL-запросах клиентов, которые соответствуют известным атакам. Эта методика обеспечивает высокие показатели обнаружения и небольшое число ложных срабатываний, однако ее применение ограничено, так как она относится к категории "атомарного обнаружения".

-   **Обнаружение на основе поведения**: выявляет аномальные действия, которые нетипичны для базы данных и не выполнялись в течение последних 30 дней. К примерам аномальных действий клиента SQL относятся: всплеск неудачных попыток входа или запросов, извлечение большого объема данных, необычные канонические запросы и неизвестные IP-адреса, используемые для доступа к базе данных.

### <a name="application-gateway-web-application-firewall"></a>Брандмауэр веб-приложения шлюза приложений

[Брандмауэр веб-приложения](../app-service/environment/app-service-app-service-environment-web-application-firewall.md) — это функция [шлюза приложений Azure](https://docs.microsoft.com/azure/application-gateway/application-gateway-webapplicationfirewall-overview), которая обеспечивает защиту веб-приложений, использующих шлюз приложений для стандартных функций [управления доставкой приложений](https://kemptechnologies.com/in/application-delivery-controllers). Принцип работы брандмауэра веб-приложения заключается в защите приложений от [большинства из основных 10 уязвимостей OWASP](https://www.owasp.org/index.php/Top_10_2010-Main).

![Схема брандмауэра веб-приложения шлюза приложений](./media/azure-threat-detection/azure-threat-detection-fig13.png)

Средства защиты включают следующие:

-   Защита от внедрения кода SQL.

-   Защита от межсайтовых сценариев.

-   Защита от распространенных сетевых атак, в том числе от внедрения команд, несанкционированных HTTP-запросов, разделения HTTP-запросов и атак с включением удаленного файла.

-   Защита от нарушений протокола HTTP.

-   Защита от аномалий протокола HTTP, например отсутствия агента пользователя узла и заголовков accept.

-   Защита от программ-роботов, программ-обходчиков и сканеров.

-   Обнаружение распространенных неправильных конфигураций приложений (Apache, IIS и т. д.).

Настройка WAF в шлюзе приложений предоставляет следующие преимущества:

-   Защита веб-приложения от сетевых уязвимостей и атак без изменения в коде серверной части.

-   Одновременная защита нескольких веб-приложений с помощью шлюза приложений. В шлюзе приложений можно разместить до 20 веб-сайтов.

-   Мониторинг веб-приложений на наличие атак с помощью отчетов, создаваемых в режиме реального времени на основе журналов WAF шлюза приложений.

-   Обеспечение соответствия нормативным требованиям. Для некоторых элементов управления соответствием требованиям необходимо, чтобы все конечные точки для Интернета были защищены с помощью решения WAF.

### <a name="anomaly-detection-api-built-with-azure-machine-learning"></a>API обнаружения аномалий: встроен в машинное обучение Azure

API обнаружения аномалий — это API, который используется для обнаружения различных шаблонов аномалий в данных временных рядах. API назначает показатель аномальности каждой точке данных временного ряда. Этот показатель может использоваться для создания оповещений, отслеживания с помощью панелей мониторинга или соединения с системами отправки запросов.

[API обнаружения аномалий](https://docs.microsoft.com/azure/machine-learning/machine-learning-apps-anomaly-detection-api) может обнаруживать следующие типы аномалий в данных временных рядов:

-   **Пики и спады**: при мониторинге количества неудачных попыток входа в службу или количества заказов на сайте электронной коммерции необычные пики или спады могут означать атаки на систему безопасности или нарушения в работе службы.

-   **Положительные и отрицательные тенденции**: при отслеживании использования памяти в вычислениях уменьшение объема доступной памяти может указывать на утечку памяти. Для мониторинга длины очереди службы постоянная восходящая тенденция может указывать на наличие проблемы в используемом программном обеспечении.

-   **Изменение уровня и изменения в динамическом диапазоне значений**: изменения уровня задержек службы после обновления службы или более низкие уровни исключений после обновления могут представлять интерес для наблюдения.

API на основе машинного обучения обеспечивает:

-   **Гибкое и надежное обнаружение**: модели обнаружения аномалий позволяют пользователям настроить параметры чувствительности и выявлять аномалии в сезонных и несезонных наборах данных. Пользователи могут настроить модель обнаружения аномалий, чтобы повысить или понизить чувствительность API обнаружения в соответствии с потребностями. Это будет означать обнаружение большего или меньшего числа видимых аномалий в данных с сезонными закономерностями и без них.

-   **Масштабируемое и своевременное обнаружение**: традиционный мониторинг с пороговыми значениями, заданными в соответствии с предметными знаниями экспертов, требует больших затрат и не может охватить миллионы динамически изменяемых наборов данных. Модели обнаружения аномалий в данном API обучаются и настраиваются автоматически на основе данных журналов и данных, получаемых в режиме реального времени.

-   **Упреждающее и действенное обнаружение**: обнаружение медленных тенденций и изменений уровня может применяться для раннего обнаружения аномалий. Обнаруженные ранние аномальные сигналы могут использоваться для привлечения специалистов к изучению проблемных областей и принятию ответных мер. Кроме того, модели анализа первопричин и инструменты оповещения могут разрабатываться на основе этой службы API обнаружения аномалий.

API обнаружения аномалий — это эффективное и рациональное решение для разнообразных сценариев, таких как мониторинг работоспособности и ключевых показателей эффективности служб, Интернет вещей, мониторинг производительности и мониторинг сетевого трафика. Ниже приведены некоторые популярные сценарии, в которых можно использовать этот API.

- ИТ-отделы, нуждающиеся в инструментах для своевременного отслеживания событий, кодов ошибок, журналов использования и производительности (ЦП, памяти и т. д.).

-   Сайты электронной коммерции, на которых требуется отслеживать действия клиентов, просмотры страниц, щелчки и т. д.

-   Коммунальные компании, которым требуется отслеживать потребление воды, газа, электроэнергии и других ресурсов.

-   Службы управления зданиями или сооружениями, которым требуется отслеживать температуру, влажность, трафик и т. д.

-   Компании, работающие в сфере Интернета вещей, или производители, которым требуется использовать данные датчиков во временных рядах для контроля рабочего процесса, качества и т. д.

-   Поставщики услуг, например центры обработки вызовов, которым необходимо отслеживать тенденции спроса на услуги, объем инцидентов, длину очереди ожидания и т. д.

-   Группы бизнес-аналитики, которым требуется отслеживать аномальные смещения ключевых показателей эффективности организации (например, объем продаж, мнения клиентов, цены) в режиме реального времени.

### <a name="cloud-app-security"></a>Cloud App Security

[Cloud App Security](https://docs.microsoft.com/cloud-app-security/what-is-cloud-app-security) является важнейшей частью стека безопасности Microsoft Cloud. Это комплексное решение, которое поможет вашей организации, переходящей в облако, получить все обещанные преимущества облачных приложений. При этом ваша организация сможет сохранить полный контроль над данными благодаря улучшенной видимости операций. Оно также позволяет повысить защиту критически важных данных приложений в облаке.

Используя инструменты, помогающие обнаруживать теневые ИТ, оценивать риски, применять политики, исследовать действия и предотвращать угрозы, организации могут более безопасно перейти в облако, сохраняя контроль над критически важными данными.

| | |
|---|---|
| Поиск | Выявите теневые ИТ с помощью Cloud App Security. Получайте информацию, обнаруживая приложения, действия, пользователей, данные и файлы в облачной среде. Выявляйте сторонние приложения, подключенные к вашему облаку.|
|Изучение | Изучите облачные приложения с помощью облачных инструментов экспертизы, чтобы узнать больше об опасных приложениях, определенных пользователях и файлах в сети. Находите закономерности в данных, собранных из вашего облака. Создавайте отчеты для отслеживания работы облака. |
| Контроль | Снижайте риск, задав политики и оповещения, чтобы получить максимальный контроль над сетевым трафиком облака. Используйте Cloud App Security, чтобы перенести пользователей в альтернативные варианты облачных приложений, санкционированные системой безопасности. |
| Защита | Используйте Cloud App Security, чтобы одобрять или запрещать приложения, применять средства предотвращения потери данных, контролировать доступ и совместное использование ресурсов, а также создавать настраиваемые отчеты и оповещения. |
| Контроль | Снижайте риск, задав политики и оповещения, чтобы получить максимальный контроль над сетевым трафиком облака. Используйте Cloud App Security, чтобы перенести пользователей в альтернативные варианты облачных приложений, разрешенные системой безопасности. |
| | |


![Схема Cloud App Security](./media/azure-threat-detection/azure-threat-detection-fig14.png)

Cloud App Security позволяет получать информацию об облаке за счет использования следующих механизмов:

-   Использует Cloud Discovery для сопоставления и определения облачной среды и облачных приложений, которые использует ваша организация.

-   Разрешает и запрещает приложения в облаке.

-   Использует простые в развертывании соединители приложений, применяющие преимущества интерфейсов API поставщиков, для мониторинга и контроля приложений, к которым вы подключаетесь.

-   Обеспечивает непрерывный контроль благодаря установке политик и их постоянной точной настройке.

При сборе данных из этих источников Cloud App Security выполняет сложный анализ данных. Это решение немедленно оповещает вас о подозрительной активности и предоставляет подробную информацию об облачной среде. В Cloud App Security можно настроить политику безопасности и использовать ее для защиты всех компонентов облачной среды.

## <a name="third-party-advanced-threat-detection-capabilities-through-the-azure-marketplace"></a>Сторонние возможности расширенного обнаружения угроз в Azure Marketplace

### <a name="web-application-firewall"></a>Брандмауэр веб-приложения

Брандмауэр веб-приложения проверяет входящий трафик Интернета и блокирует атаки путем внедрения кода SQL, межсайтовые сценарии, передачу вредоносных программ, атаки DDoS на приложения и другие атаки, нацеленные на ваши веб-приложения. Он также проверяет ответы от внутренних веб-серверов для предотвращения потери данных (DLP). Интегрированная подсистема управления доступом позволяет администраторам создавать детализированные политики управления доступом для осуществления аутентификации, авторизации и учета, что обеспечивает строгую проверку подлинности и контроль пользователей.

Брандмауэр веб-приложения обеспечивает следующие преимущества:

-   Обнаружение и блокирование атак путем внедрения кода SQL, межсайтовых сценариев, передачи вредоносных программ, атак DDoS на приложения и других атак, нацеленных на приложение.

-   Аутентификация и управление доступом.

-   Проверка исходящего трафика для выявления конфиденциальных данных и возможность маскировать информацию или блокировать ее утечку.

-   Ускорение доставки содержимого веб-приложений с помощью различных возможностей, в том числе кэширования, сжатия и других способов оптимизации трафика.

Примеры брандмауэров веб-приложений, доступных в Azure Marketplace, см. в разделе [Barracuda WAF, виртуальный брандмауэр веб-приложений (vWAF) Brocade, Imperva SecureSphere и брандмауэр IP ThreatSTOP](https://azuremarketplace.microsoft.com/marketplace/apps/barracudanetworks.waf).

## <a name="next-steps"></a>Дополнительная информация

- [Возможности обнаружения в центре безопасности Azure](https://docs.microsoft.com/azure/security-center/security-center-detection-capabilities): помогают выявлять активные угрозы для ресурсов Microsoft Azure и оперативно реагировать на них.

- [Обнаружение угроз базы данных SQL Azure](https://azure.microsoft.com/blog/azure-sql-database-threat-detection-your-built-in-security-expert/): помогает устранить проблемы, связанные с потенциальными угрозами для баз данных.
