---
title: Схема безопасности и соответствия требованиям Azure. Хранилище данных для UK NHS
description: Схема безопасности и соответствия требованиям Azure. Хранилище данных для UK NHS
services: security
author: jomolesk
ms.assetid: f4e4b939-88db-4d78-8fa9-c2a12b2c025b
ms.service: security
ms.topic: article
ms.date: 06/15/2018
ms.author: jomolesk
ms.openlocfilehash: 5b9467c93012a65fca95e2b1fb88cdf7980dfeac
ms.sourcegitcommit: 4597964eba08b7e0584d2b275cc33a370c25e027
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2018
ms.locfileid: "37343287"
---
# <a name="azure-security-and-compliance-blueprint-data-warehouse-for-uk-nhs"></a>Схема безопасности и соответствия требованиям Azure. Хранилище данных для UK NHS

## <a name="overview"></a>Обзор

Эта схема безопасности и соответствия требованиям Azure обеспечивает эталонную архитектуру и руководство для решения хранилища данных, подходящего для обеспечения безопасного принятия, помещения на промежуточный процесс, хранения и взаимодействия с конфиденциальными данными системы здравоохранения. В этом решении продемонстрированы способы, используя которые клиенты могут соответствовать указаниям, приведенным в [практическом руководстве по облачной безопасности](https://digital.nhs.uk/data-and-information/looking-after-information/data-security-and-information-governance/nhs-and-social-care-data-off-shoring-and-the-use-of-public-cloud-services/health-and-social-care-cloud-security-good-practice-guide), опубликованном [NHS Digital](https://digital.nhs.uk/), партнером Министерства здравоохранения и социального обеспечения Великобритании. Практическое руководство по облачной безопасности основано на 14 [принципах облачной безопасности](https://www.ncsc.gov.uk/guidance/implementing-cloud-security-principles), опубликованных Национальным центром кибербезопасности Великобритании.

Эта эталонная архитектура, руководство по реализации и модель рисков призваны служить основой, которую клиенты должны адаптировать для собственных потребностей, а не использовать "как есть" в рабочей среде без дополнительной конфигурации. Клиенты несут ответственность за выполнение надлежащей оценки безопасности и соответствия любого решения, созданного с использованием этой архитектуры, так как требования могут варьироваться в зависимости от специфики реализации каждого клиента.

## <a name="architecture-diagram-and-components"></a>Схема и компоненты архитектуры

Это решение предоставляет эталонную архитектуру, необходимую для реализации высокопроизводительного и безопасного облачного хранилища данных. В этой архитектуре есть два отдельных уровня данных: на одном из них осуществляется импорт, хранение и промежуточное хранение данных в кластеризованной среде SQL, другой предназначен для хранилища данных SQL Azure, куда данные загружаются с помощью средства извлечения, преобразования и загрузки (например, запросов T-SQL [PolyBase](https://docs.microsoft.com/azure/sql-data-warehouse/load-data-from-azure-blob-storage-using-polybase)) для обработки. После сохранения данных в хранилище данных SQL Azure можно выполнять аналитику в большом масштабе.

Azure предоставляет клиентам множество различных служб отчетности и аналитики. Это решение включает в себя службы SQL Server Reporting Services для быстрого создания отчетов из хранилища данных SQL Azure. Весь трафик SQL шифруется с помощью SSL и самозаверяющих сертификатов. Azure рекомендует использовать доверенный центр сертификации для повышенной безопасности.

Данные в хранилище данных SQL Azure хранятся в реляционных таблицах с использованием хранения по столбцам — формата, который значительно уменьшает затраты на хранение данных и улучшает производительность запросов.  В зависимости от требований потребления, вычислительные ресурсы хранилища данных SQL Azure можно масштабировать или полностью отключать при отсутствии активных процессов, для которых они требуются.

Подсистема балансировки нагрузки SQL управляет трафиком SQL, обеспечивая высокую производительность. Все виртуальные машины в этой эталонной архитектуре развертываются в группе доступности с помощью экземпляров SQL Server, настроенных в группе доступности AlwaysOn для обеспечения высокого уровня доступности и аварийного восстановления.

Для повышения уровня безопасности все ресурсы в этом решении управляются как группа ресурсов с помощью Azure Resource Manager. Управление доступом на основе ролей Azure Active Directory используется для управления доступом к развернутым ресурсам и ключам в Azure Key Vault. Мониторинг работоспособности системы осуществляется через центр безопасности Azure и Azure Monitor. Клиенты могут настроить обе службы мониторинга для ведения журналов и отображения работоспособности системы на единой панели мониторинга с удобной навигацией.


Эта эталонная архитектура хранилища данных также включает уровень Active Directory, предназначенный для управления ресурсами в рамках архитектуры. Подсеть Active Directory обеспечивает простое внедрение в структуру крупного леса Active Directory, что гарантирует непрерывную работу в среде, даже если доступ к крупному лесу отсутствует. Все виртуальные машины присоединены к домену на уровне Active Directory и используют групповые политики Active Directory для применения конфигураций безопасности и соответствия на уровне операционной системы.

Виртуальная машина, которая служит управляющим узлом-бастионом, предоставляет безопасное соединение для администраторов, позволяющее получить доступ к развернутым ресурсам. Данные загружаются в промежуточную область через этот управляющий узел-бастион. **Корпорация Майкрософт рекомендует настроить подключение VPN или Azure ExpressRoute для управления и импорта данных в подсеть эталонной архитектуры.**

![Схема эталонной архитектуры хранилища данных для UK NHS](images/uknhs-datawarehouse-architecture.png?raw=true "Data Warehouse for UK NHS reference architecture diagram")

Это решение использует следующие службы Azure. Подробные сведения об архитектуре развертывания см. в [этом разделе](#deployment-architecture).

- Группы доступности
    - Контроллеры домена Active Directory
    - узлы и следящий сервер кластера SQL.
- Azure Active Directory
- Каталог данных Azure
- Хранилище ключей Azure
- Azure Monitor
- Центр безопасности Azure
- Azure Load Balancer
- Хранилище Azure
- Служба автоматизации Azure
- Виртуальные машины Azure
    - (1) Узел-бастион
    - (2) контроллер домена Active Directory;
    - (2) узел кластера SQL Server;
    - (1) следящий сервер SQL Server.
- Виртуальная сеть Azure
    - (1) Сеть /16
    - (4) Сети /24
    - (4) Группы безопасности сети
- Хранилище служб восстановления
- Хранилище данных SQL
- Службы отчетов SQL Server

## <a name="deployment-architecture"></a>Архитектура развертывания

В следующем разделе подробно описываются компоненты развертывания и реализации.

**Хранилище данных SQL**. [Хранилище данных SQL](https://docs.microsoft.com/azure/sql-data-warehouse/sql-data-warehouse-overview-what-is) — это корпоративное хранилище данных, использующее массовую параллельную обработку для быстрого выполнения сложных запросов на несколько петабайт данных, позволяя пользователям эффективно идентифицировать данные системы здравоохранения. Пользователи могут применять простые запросы T-SQL PolyBase для импорта больших данных в хранилище данных SQL и задействовать возможности массовой параллельной обработки для выполнения высокопроизводительной аналитики.

**SQL Server Reporting Services**. [SQL Server Reporting Services](https://docs.microsoft.com/sql/reporting-services/report-data/sql-azure-connection-type-ssrs) обеспечивают быстрое создание отчетов с таблицами, диаграммами, картами, датчиками, матрицами и т. д. для хранилища данных SQL Azure.

**Каталог данных**. Благодаря [каталогу данных](https://docs.microsoft.com/azure/data-catalog/data-catalog-what-is-data-catalog) источники данных легко обнаруживаются и являются понятными для пользователей, которые управляют данными. Общие источники данных можно регистрировать, снабжать тегами и использовать для поиска данных, связанных с работоспособностью. Эти данные остаются в существующем расположении, но копия соответствующих метаданных добавляется в каталог данных вместе со ссылкой на расположение источника данных. Кроме того, чтобы облегчить обнаружение каждого источника данных с помощью функции поиска и сделать их доступными для пользователей, метаданные индексируются.

**Узел-бастион**. Узел-бастион является единой точкой входа, которая позволяет пользователям получать доступ к ресурсам, развернутым в этой среде. Узел-бастион предоставляет безопасное подключение к развернутым ресурсам, разрешая только удаленный трафик с общедоступных IP-адресов из надежного списка. Для разрешения трафика по протоколу удаленного рабочего стола (RDP) источник трафика должен быть определен в группе безопасности сети.

Это решение создает виртуальную машину в виде присоединенного к домену узла-бастиона со следующими настройками:
-   [расширение защиты от вредоносных программ](https://docs.microsoft.com/azure/security/azure-security-antimalware);
-   [Расширение системы диагностики Azure](https://docs.microsoft.com/azure/virtual-machines/virtual-machines-windows-extensions-diagnostics-template)
-   [шифрование дисков Azure](https://docs.microsoft.com/azure/security/azure-security-disk-encryption) с помощью хранилища ключей Azure Key Vault;
-   [политика автоматического завершения работы](https://azure.microsoft.com/blog/announcing-auto-shutdown-for-vms-using-azure-resource-manager/) для уменьшения степени использования ресурсов виртуальной машины во время простоя.
-   функция [Credential Guard в Защитнике Windows](https://docs.microsoft.com/windows/access-protection/credential-guard/credential-guard) должна быть включена, чтобы учетные данные и другие секретные сведения обрабатывались в защищенной среде, изолированной от работающей операционной системы.

### <a name="virtual-network"></a>Виртуальная сеть

Эта эталонная архитектура определяет частную виртуальную сеть с пространством адресов 10.0.0.0/16.

**Группы безопасности сети**. [Группы безопасности сети](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg) содержат списки управления доступом, которые разрешают или запрещают трафик в виртуальной сети. Группы безопасности сети можно использовать для защиты трафика на уровне подсети или отдельной виртуальной машины. Существуют следующие группы безопасности сети:

  - группа безопасности сети на уровне данных (кластеры SQL Server, следящий сервер SQL Server и подсистема балансировки нагрузки SQL);
  - группа безопасности сети для управляющего узла-бастиона;
  - группа безопасности сети для Active Directory;
  - группа безопасности сети для служб SQL Server Reporting Services.

В каждой группе безопасности сети открыты определенные порты и протоколы, чтобы решение могло работать безопасно и правильно. Кроме того, для каждой группы безопасности сети настроены следующие конфигурации:

- включены [журналы диагностики и события](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log), которые хранятся в учетной записи хранения;
- решение Log Analytics подключено к [журналам диагностики группы безопасности сети](https://github.com/krnese/AzureDeploy/blob/master/AzureMgmt/AzureMonitor/nsgWithDiagnostics.json).

**Подсети**. Каждая подсеть связана с соответствующей группой безопасности сети.

### <a name="data-at-rest"></a>Неактивные данные

Архитектура защищает неактивные данные с помощью ряда мер, включая шифрование и аудит баз данных.

Архитектура защищает неактивные данные, используя шифрование, аудит базы данных и другие меры.

**Служба хранилища Azure**. Для выполнения требований к шифрованию неактивных данных во всей [службе хранилища Azure](https://azure.microsoft.com/services/storage/) используется [шифрование службы хранилища](https://docs.microsoft.com/azure/storage/storage-service-encryption). Это помогает защищать и охранять данные в рамках обязательств по безопасности организаций и соответствия требованиям, определенным в NHS Digital.

**Шифрование дисков Azure**. Служба [Шифрование дисков Azure](https://docs.microsoft.com/azure/security/azure-security-disk-encryption) использует компонент BitLocker в Windows, чтобы обеспечить шифрование томов для дисков данных. Решение интегрируется с Azure Key Vault, что помогает управлять ключами шифрования дисков.

**База данных SQL Azure**. В экземпляре Базы данных SQL Azure используются следующие меры безопасности базы данных:

- [Использование Active Directory для аутентификации и авторизации](https://docs.microsoft.com/azure/sql-database/sql-database-aad-authentication) обеспечивает централизованное управление удостоверениями для пользователей баз данных и других служб Майкрософт.
- [Аудит базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-auditing-get-started) позволяет отслеживать события базы данных и записывать их в журнал аудита в учетной записи хранения Azure.
- В Базе данных SQL Azure настроено [прозрачное шифрование данных](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql), которое обеспечивает шифрование и расшифровку базы данных, связанных резервных копий и файлов журналов транзакций в реальном времени для защиты неактивных данных. Прозрачное шифрование данных позволяет защитить сохраненные данные от несанкционированного доступа.
- [Правила брандмауэра](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure) предотвращают любой доступ к серверам баз данных без надлежащих разрешений. Брандмауэр предоставляет доступ к базам данным на основе исходного IP-адреса каждого запроса.
- [Обнаружение угроз SQL](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection-get-started) позволяет немедленно выявлять потенциальные угрозы и реагировать на них. При этом поступают оповещения системы безопасности о подозрительных действиях с базами данных, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных шаблонах доступа к базам данных.
- [Зашифрованные столбцы](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) гарантируют, что конфиденциальные данные никогда не отобразятся как открытый текст внутри системы баз данных. После включения шифрования данных получить доступ к данным в виде открытого текста смогут только клиентские приложения и серверы приложений, у которых есть доступ к ключам.
- [Динамическое маскирование данных Базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-dynamic-data-masking-get-started) ограничивает возможность раскрытия конфиденциальных данных, маскируя их для непривилегированных пользователей или приложений. Динамическое маскирование данных может автоматически обнаруживать потенциально конфиденциальные данные и предлагать применение соответствующих масок. Это помогает определить и сократить доступ к данным таким образом, чтобы они не извлекались из базы данных с помощью несанкционированного доступа. Клиенты несут ответственность за настройку параметров динамического маскирования данных в соответствии со своей схемой базы данных.

### <a name="identity-management"></a>Управление удостоверениями

Следующие технологии обеспечивают возможности управления доступом к данным в среде Azure.

- [Azure Active Directory](https://azure.microsoft.com/services/active-directory/) — это мультитенантный облачный каталог и служба управления удостоверениями корпорации Майкрософт. Все пользователи этого решения создаются в Azure Active Directory, включая пользователей, обращающихся к Базе данных SQL Azure.
- Аутентификация приложения выполняется с использованием Azure Active Directory. Дополнительные сведения см. в статье [Интеграция приложений с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications). Кроме того, при шифровании столбцов базы данных используется Azure Active Directory для проверки подлинности приложения в базе данных Azure SQL. Дополнительные сведения см. в статье о [защите конфиденциальных данных в Базе данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault).
- [Управление доступом на основе ролей Azure](https://docs.microsoft.com/azure/active-directory/role-based-access-control-configure) позволяет администраторам определять детальные разрешения доступа, предоставляя его ровно в той мере, которая необходима пользователям для выполнения работы. Вместо предоставления каждому пользователю неограниченных разрешений на ресурсы Azure администраторы могут разрешить только определенные действия для доступа к данным. Доступ к подписке есть только у администратора подписки.
- [Azure Active Directory Privileged Identity Management](https://docs.microsoft.com/azure/active-directory/active-directory-privileged-identity-management-getting-started) позволяет клиентам свести к минимуму число пользователей, имеющих доступ к определенной информации. Администраторы могут использовать Azure Active Directory Privileged Identity Management для обнаружения, ограничения и отслеживания привилегированных удостоверений, а также их доступа к ресурсам. Эту функцию можно также задействовать для получения административного JIT-доступа по требованию, когда это необходимо.
- [Защита идентификации Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection) выявляет потенциальные уязвимости, затрагивающие удостоверения организации, настраивает автоматическое реагирование на обнаруженные подозрительные действия, связанные с удостоверениями организации, и исследует подозрительные инциденты для принятия соответствующих мер по их устранению.

### <a name="security"></a>Безопасность

**Управление секретами.** Для управления ключами и секретами в решении используется [Azure Key Vault](https://azure.microsoft.com/services/key-vault/). Хранилище ключей Azure помогает защитить криптографические ключи и секреты, используемые облачными приложениями и службами. Следующие возможности Azure Key Vault помогают клиентам защитить эти данные и получить доступ к ним:

- Политики расширенного доступа настраиваются по мере необходимости.
- Политики доступа к Key Vault определены с минимальными необходимыми разрешениями на использование ключей и секретов.
- Все ключи и секреты в Key Vault имеют срок действия.
- Все ключи в Key Vault защищены специализированными аппаратными модулями безопасности. Тип ключа — 2048-разрядный ключ RSA, защищенный аппаратным модулем безопасности.
- Всем пользователям или идентификаторам предоставляются минимальные необходимые разрешения с помощью управления доступом на основе ролей.
- Для журналов диагностики хранилища ключей включен срок хранения не менее 365 дней.
- Допустимые операции шифрования для ключей доступны только тем пользователям, которым они нужны.

**Управление исправлениями**. Виртуальные машины Windows, развернутые как часть этой эталонной архитектуры, настраиваются по умолчанию для получения автоматических обновлений из службы Центра обновления Windows. Это решение также включает службу [автоматизации Azure](https://docs.microsoft.com/azure/automation/automation-intro), с помощью которой можно создавать обновленные развертывания для исправления виртуальных машин при необходимости.

**Защита от вредоносных программ**. [Антивредоносное ПО Майкрософт](https://docs.microsoft.com/azure/security/azure-security-antimalware) для виртуальных машин Azure предоставляет возможности защиты в реальном времени для обнаружения и удаления вирусов, шпионских и других вредоносных программ. Вы можете настроить оповещения о попытках установки или запуска вредоносных или нежелательных программ на защищенных виртуальных машинах.

**Центр безопасности Azure**. С помощью [центра безопасности](https://docs.microsoft.com/azure/security-center/security-center-intro) клиенты могут централизованно применять политики безопасности и управлять ими в рабочих нагрузках, ограничивать уязвимость системы к угрозам, а также выявлять атаки и реагировать на них. Кроме того, центр безопасности Azure обращается к существующей конфигурации служб Azure и предоставляет конфигурацию и рекомендации по службам для повышения уровня безопасности и защиты данных.

В центре безопасности Azure используются различные возможности обнаружения, чтобы оповещать клиентов о потенциальных атаках на их среды. Эти оповещения содержат важные сведения о причине их активации, ресурсах, на которые нацелена атака, и ее источнике. Центр безопасности Azure имеет ряд предопределенных [оповещений безопасности](https://docs.microsoft.com/azure/security-center/security-center-alerts-type), которые активируются при возникновении угрозы или подозрительной активности. [Настраиваемые правила генерации оповещений](https://docs.microsoft.com/azure/security-center/security-center-custom-alert) в центре безопасности Azure позволяют клиентам определять новые оповещения безопасности на основе данных, собранных из их среды.

Центр безопасности Azure предоставляет приоритетные оповещения безопасности и инциденты, упрощая процедуры обнаружения и устранения потенциальных проблем безопасности. Для каждой обнаруженной угрозы создается [отчет об исследовании угроз](https://docs.microsoft.com/azure/security-center/security-center-threat-report). Это позволяет командам реагирования на инциденты расследовать и устранять угрозы.

Кроме того, эта эталонная архитектура использует [оценку уязвимости](https://docs.microsoft.com/azure/security-center/security-center-vulnerability-assessment-recommendations) в центре безопасности Azure. После настойки агент партнера (например, Qualys) начнет отправку сведений об уязвимостях на платформу управления партнера. В свою очередь платформа управления партнера предоставляет данные мониторинга уязвимости и работоспособности в центре безопасности Azure, что позволяет клиентам быстро идентифицировать уязвимые виртуальные машины.

### <a name="business-continuity"></a>Непрерывность бизнес-процессов

**Высокий уровень доступности**. Рабочие нагрузки сервера объединяются в [группы доступности](https://docs.microsoft.com/azure/virtual-machines/virtual-machines-windows-manage-availability?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) для обеспечения высокого уровня доступности виртуальных машин в Azure. Во время планового или внепланового технического обслуживания доступна как минимум одна виртуальная машина, что соответствует соглашению об уровне обслуживания Azure, гарантирующему доступность в течение 99,95 % времени.

**Хранилище служб восстановления.** [Хранилище служб восстановления](https://docs.microsoft.com/azure/backup/backup-azure-recovery-services-vault-overview) содержит резервные копии данных и защищает все конфигурации виртуальных машин Azure в этой архитектуре. С помощью хранилища служб восстановления клиенты могут восстановить отдельные файлы и папки виртуальной машины IaaS, а не всю виртуальную машину. Это сокращает время восстановления.

### <a name="logging-and-auditing"></a>Ведение журналов и аудит

Службы Azure обеспечивают детальную запись системных и пользовательских действий, а также сведений о работоспособности системы.
- **Журналы действий.** [Журналы действий](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs) содержат информацию об операциях, которые выполнялись с ресурсами в подписке. Журналы действий помогают определить инициатора операции, время события и состояние.
- **Журналы диагностики.** [Журналы диагностики](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs) включают в себя все журналы, создаваемые каждым ресурсом. К этим журналам относятся системные журналы событий Windows, журналы службы хранилища Azure, журналы аудита Key Vault, а также журналы брандмауэра и доступа к шлюзу приложений. Все журналы диагностики обеспечивают запись данных в централизованную и зашифрованную учетную запись Azure для архивирования. В соответствии с требованиями конкретной организации пользователь может настроить срок хранения до 730 дней.

**Log Analytics**. Эти журналы объединяются в [Log Analytics](https://azure.microsoft.com/services/log-analytics/) для обработки и хранения данных, а также создания отчетов на панелях мониторинга. После сбора данные объединяются в отдельные таблицы для каждого типа данных, что позволяет анализировать все данные независимо от исходного источника. Кроме того, центр безопасности Azure интегрируется с Log Analytics, в результате чего клиенты могут использовать запросы Log Analytics для доступа к своим данным событий безопасности и сочетать их с данными из других служб.

В состав данной архитектуры включены следующие [решения по управлению](https://docs.microsoft.com/azure/log-analytics/log-analytics-add-solutions) Log Analytics:
-   [Оценка Active Directory](https://docs.microsoft.com/azure/log-analytics/log-analytics-ad-assessment). Решение "Проверка работоспособности Active Directory" регулярно оценивает риски и работоспособность серверных сред и предоставляет список рекомендаций, относящихся к развернутой серверной инфраструктуре, в порядке приоритетности.
- [Оценка SQL](https://docs.microsoft.com/azure/log-analytics/log-analytics-sql-assessment). Решение "Проверка работоспособности SQL" регулярно оценивает риски и работоспособность серверных сред и предоставляет клиентам список рекомендаций, относящихся к развернутой серверной инфраструктуре и перечисленных в порядке приоритета.
- [Работоспособность агентов](https://docs.microsoft.com/azure/operations-management-suite/oms-solution-agenthealth). Решение "Работоспособность агентов" сообщает количество развернутых агентов, их географическое распределение, а также количество агентов, которые перестают отвечать на запросы и агентов, которые отправляют операционные данные.
-   [Аналитика журнала действий](https://docs.microsoft.com/azure/log-analytics/log-analytics-activity). Решение "Аналитика журнала действий" помогает анализировать журналы действий Azure во всех подписках Azure для клиента.

**Служба автоматизации Azure**. [Это решение](https://docs.microsoft.com/azure/automation/automation-hybrid-runbook-worker) обеспечивает хранение и выполнение модулей Runbook, а также управление ими. В этом решении модули runbook помогают собирать журналы из Базы данных SQL Azure. Решение [Отслеживание изменений](https://docs.microsoft.com/azure/automation/automation-change-tracking) службы автоматизации позволяет клиентам легко определять изменения в среде.

**Azure Monitor.** [Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/) помогает пользователям отслеживать производительность, поддерживать безопасность и выявлять тенденции. Решение предоставляет организациям возможность аудита, создания оповещений и архивации данных, включая отслеживание вызовов API в ресурсах Azure клиентов.

## <a name="threat-model"></a>Модель рисков

Схему потока данных для этой эталонной архитектуры можно [скачать](https://aka.ms/uknhs-dw-tm) или просмотреть ниже. Используя эту модель, клиенты могут выявить зоны потенциального риска в инфраструктуре системы при внесении изменений.

![Модель угроз хранилища данных для UK NHS](images/uknhs-datawarehouse-threat-model.png?raw=true "Data Warehouse for UK NHS threat model")

## <a name="compliance-documentation"></a>Документация по соответствию

В документе [Azure Security and Compliance Blueprint – UK NHS Customer Responsibility Matrix](https://aka.ms/uknhs-crm) (Схема безопасности и соответствия требованиям Azure. Таблица обязанностей клиента UK NHS) указаны все требования UK NHS. В этой таблице указано, кто отвечает за реализацию каждого принципа: корпорация Майкрософт, клиент или все вместе.

В документе [Azure Security and Compliance Blueprint – UK NHS Data Warehouse Implementation Matrix](https://aka.ms/uknhs-dw-cim) (Схема безопасности и соответствия требованиям Azure. Таблица реализации хранилища данных клиента UK NHS) содержатся сведения о том, какие требования UK NHS отражены в архитектуре хранилища данных, включая подробные описания того, как реализация соответствует требованиям каждой затронутой статьи.

## <a name="guidance-and-recommendations"></a>Инструкции и рекомендации

### <a name="vpn-and-expressroute"></a>VPN и ExpressRoute

Чтобы установить защищенное подключение к ресурсам, которые развертываются в рамках этой эталонной архитектуры веб-приложений PaaS, необходимо настроить защищенный VPN-туннель или [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction). Правильно настроив VPN-подключение или ExpressRoute, клиенты могут добавить уровень защиты передаваемых данных.

При реализации защищенного VPN-туннеля с помощью Azure можно создать виртуальное частное подключение между локальной сетью и виртуальной сетью Azure. Это подключение осуществляется через Интернет и позволяет клиентам безопасно передавать данные по &quot;туннелю&quot; внутри зашифрованного канала между сетью клиента и Azure. VPN типа "сеть — сеть" представляет собой безопасную проверенную технологию, которая десятилетиями применяется на предприятиях всех размеров. [Режим туннеля IPsec](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc786385(v=ws.10)) используется в этом решении как механизм шифрования.

Так как трафик в VPN-туннеле проходит через Интернет с VPN типа "сеть-сеть", Майкрософт предлагает другой, еще более защищенный вариант подключения. Azure ExpressRoute — это выделенный канал связи в глобальной сети между Azure и локальной средой или поставщиком услуг размещения Exchange. Подключения ExpressRoute не осуществляются через Интернет и обеспечивают повышенный уровень безопасности, надежности и быстродействия подключений с низким уровнем задержки по сравнению со стандартными подключениями через Интернет. Более того, так как это прямое подключение поставщика телекоммуникационных услуг клиента, данные не передаются через Интернет и поэтому недоступны в нем.

См. [рекомендации](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) по реализации защищенной гибридной сети, расширяющей локальную сеть в Azure.

### <a name="extract-transform-load-process"></a>Процесс извлечения, преобразования и загрузки

[PolyBase](https://docs.microsoft.com/sql/relational-databases/polybase/polybase-guide) может отправлять данные в хранилище данных SQL Azure без использования отдельного средства для извлечения, преобразования и загрузки или импорта. PolyBase поддерживает доступ к данным с помощью запросов T-SQL. С PolyBase можно использовать бизнес-аналитику и стек аналитики Майкрософт, а также сторонние средства, совместимые с SQL Server.

### <a name="azure-active-directory-setup"></a>Настройка Azure Active Directory

Служба [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-whatis) играет важную роль в управлении развертыванием и подготовкой доступа для персонала, взаимодействующего со средой. Windows Server Active Directory можно интегрировать с Azure Active Directory [с помощью четырех простых действий](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-get-started-express). Клиенты также могут привязать развернутую инфраструктуру Active Directory (контроллеры домена) к существующей службе Azure Active Directory, сделав развернутую инфраструктуру Active Directory дочерним доменом леса Azure Active Directory.

### <a name="optional-services"></a>Дополнительные службы

Azure предлагает широкий набор служб для помощи в хранении и промежуточной обработке форматированных и неформатированных данных. В зависимости от требований клиента в эталонную архитектуру можно добавить следующие службы:
-   [Фабрика данных Azure](https://docs.microsoft.com/azure/data-factory/introduction) — это управляемая облачная служба, созданная для сложных гибридных проектов извлечения, преобразования и загрузки, а также интеграции данных. Фабрика данных Azure обладает возможностями, помогающими отслеживать и находить данные связанные с работоспособностью, и содержит средства визуализации и мониторинга для определения времени поступления данных и их источника. С помощью фабрики данных Azure клиенты могут создавать и планировать управляемые данными рабочие процессы (конвейеры), которые принимают данные из разнородных хранилищ данных. Эти конвейеры позволяют клиентам принимать данные как из внутренних, так и из внешних источников. Затем клиенты могут обрабатывать данные и преобразовывать их для вывода в хранилища данных, такие как хранилище данных SQL Azure.
- На промежуточном этапе клиенты могут направлять неструктурированные данные в [Azure Data Lake Store](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-overview), где можно централизованно сохранять данные любого размера, любого типа и с любой скоростью приема для эксплуатационной и исследовательской аналитики.  Azure Data Lake обладает возможностями, обеспечивающими извлечение и преобразование данных. Служба Azure Data Lake Store совместима с большинством компонентов с открытым кодом в экосистеме Hadoop и хорошо интегрируется с другими службами Azure, такими как хранилище данных SQL Azure.

## <a name="disclaimer"></a>Отказ от ответственности

 - Этот документ является исключительно информационным. МАЙКРОСОФТ НЕ ПРЕДОСТАВЛЯЕТ НИКАКИХ ГАРАНТИЙ, ЯВНЫХ, КОСВЕННЫХ ИЛИ ПРЕДУСМОТРЕННЫХ ЗАКОНОМ, В ОТНОШЕНИИ ИНФОРМАЦИИ В ЭТОМ ДОКУМЕНТЕ. Данный документ предоставляется "как есть". Сведения и мнения, представленные в данном документе, включая URL-адреса и ссылки на другие веб-сайты, могут быть изменены без предварительного уведомления. Клиенты, читающие этот документ, берут ответственность за его использование на себя.
 - Настоящий документ не предоставляет клиентам юридических прав на интеллектуальную собственность в отношении продуктов или решений корпорации Майкрософт.
 - Клиенты могут скопировать и использовать данный документ для внутренних справочных целей.
 - Выполнение некоторых рекомендаций в этом документе может привести к более интенсивному использованию данных, а также сетевых и вычислительных ресурсов в Azure, а значит и к дополнительным затратам на лицензии или подписки Azure.
 - Эта архитектура призвана служить основой, которую клиенты должны адаптировать для конкретных требований, и не должна использоваться "как есть" в рабочей среде.
 - Этот документ разработан в качестве справочного материала и не определяет все способы, с помощью которых клиент может отвечать нормам и стандартам соответствия. Клиентам следует обратиться в юридический отдел своей организации, чтобы получить одобренные варианты пользовательских реализаций.
