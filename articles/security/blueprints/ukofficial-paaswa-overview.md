---
title: Схема безопасности и соответствия требованиям Azure. Размещение веб-приложения PaaS для рабочих нагрузок UK OFFICIAL
description: Схема безопасности и соответствия требованиям Azure. Размещение веб-приложения PaaS для рабочих нагрузок UK OFFICIAL
services: security
author: jomolesk
ms.assetid: 446105ad-a863-44f5-a964-6ead1dac4787
ms.service: security
ms.topic: article
ms.date: 07/13/2018
ms.author: jomolesk
ms.openlocfilehash: b4b37a073f41295bf800d4e6c34681e0a06799c7
ms.sourcegitcommit: 1d850f6cae47261eacdb7604a9f17edc6626ae4b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/02/2018
ms.locfileid: "39450324"
---
# <a name="azure-security-and-compliance-blueprint-paas-web-application-hosting-for-uk-official-workloads"></a>Схема безопасности и соответствия требованиям Azure. Размещение веб-приложения PaaS для рабочих нагрузок UK OFFICIAL

## <a name="azure-security-and-compliance-blueprints"></a>Обеспечение безопасности и соответствия требованиям Azure: схемы

Схемы Azure Blueprint содержат документацию и шаблоны автоматизации, позволяющие развертывать облачную архитектуру. Они предоставляют решения для сценариев, включающих требования к аккредитации и (или) соответствию. Схемы Azure Blueprint представляют собой набор рекомендаций и шаблонов автоматизации, которые позволяют клиентам Microsoft Azure быстрее достигать бизнес-целей. Это обеспечивается благодаря созданию базовой архитектуры, поддерживающей любое расширение в соответствии новыми требованиями.

## <a name="overview"></a>Обзор

Настоящая схема соответствия и безопасности Azure предоставляет руководство и скрипты автоматизации. Они позволяют развернуть архитектуру размещаемых веб-приложений Microsoft Azure в формате [PaaS (платформа как услуга)](https://azure.microsoft.com/overview/what-is-paas/), которая поддерживает рабочие нагрузки категории [UK OFFICIAL](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/251480/Government-Security-Classifications-April-2014.pdf). Эта категория безопасности включает почти всю информацию, создаваемую и обрабатываемую в секторе общественных служб. Сюда входят стандартные бизнес-операции и службы, потеря или кража сведений о которых либо же их публикация в СМИ могут иметь разрушительные последствия. Типичный профиль угроз для категории UK OFFICIAL почти совпадает с тем, который характерен для частных компаний, предоставляющих ценные данные и услуги. UK OFFICIAL используется с учетом необходимости защищать данные и службы правительства Соединенного Королевства от угроз и (или) компрометации со стороны злоумышленников с ограниченными возможностями и ресурсами. В частности, к числу таких злоумышленников можно отнести хактивистов, группы давления по отдельным вопросам, журналистские расследования, компетентных индивидуальных хакеров и значительную часть уголовных преступников и групп.

Эта схема проверена центром национальной кибербезопасности Великобритании (NCSC) и полностью соответствует 14 принципам облачной безопасности NCSC.

В архитектуре используются компоненты Azure в формате [платформа как услуга](https://azure.microsoft.com/overview/what-is-paas/) для создания среды, позволяющей пользователям избежать затрат и сложностей, связанных с приобретением лицензий на программное обеспечение, а также с управлением базовой инфраструктурой приложений, ПО промежуточного слоя и (или) средств разработки и других ресурсов. Клиенты управляют разрабатываемыми приложениями и услугами, уделяя основное внимание бизнес-задачам, а Microsoft Azure берет на себя управление всеми остальными ресурсами Azure, такими как виртуальные машины, хранилища и сети. [Ответственность](https://docs.microsoft.com/azure/security/security-paas-deployments#division-of-responsibility) за управление инфраструктурой в такой схеме возлагается в первую очередь на платформу Azure. [Службы приложений Azure](https://azure.microsoft.com/services/app-service/) поддерживают Windows и Linux, а также обеспечивают автоматическое масштабирование, высокий уровень доступности и автоматическое развертывание в качестве служб по умолчанию из GitHub, Visual Studio Team Services или любого репозитория Git. Службы приложений позволяют сосредоточить усилия на достижении бизнес-целей без дополнительных расходов на управление инфраструктурой. Можно с нуля создавать веб-приложения на Java, PHP, Node.js, Python, HTML либо C# или перенести существующие облачные и (или) локальные веб-приложения в службы приложений Azure (разумеется, с применением экспертизы и тестирования, позволяющих подтвердить соблюдение нужной производительности).

В этой схеме внимание уделяется подготовке надежного веб-интерфейса в формате [PaaS (платформа как услуга)](https://azure.microsoft.com/overview/what-is-paas/) для внешних и внутренних пользователей организаций. В этом сценарии разработки рассматривается использование размещенных в Azure веб-служб, через которые граждане могут отправлять, просматривать конфиденциальные данные и управлять ими, а операторы государственных организаций — обрабатывать конфиденциальные данные, отправленные гражданами, с поддержкой надлежащего уровня безопасности. Для этого сценария возможны следующие варианты использования:

- пользователь оформляет налоговый вычет, а оператор обрабатывает эту заявку;
- пользователь обращается за предоставлением услуги через веб-приложения, а оператор подтверждает заявку и организует предоставление услуги;
- пользователь ищет и просматривает справочные сведения об общественных услугах, предоставляемых государственной организацией.

Используя шаблоны [Azure Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview) и скрипты интерфейса командной строки Azure, эта схема позволяет развернуть среду, которая соответствует 14 [принципам облачной безопасности](https://www.ncsc.gov.uk/guidance/implementing-cloud-security-principles) Национального центра кибербезопасности Соединенного Королевства (NCSC) и средствам управления критическими событиями системы безопасности в [Центре интернет-безопасности](https://www.cisecurity.org/critical-controls.cfm) (CIS). NCSC рекомендует клиентам использовать принципы облачной безопасности, чтобы оценить свойства безопасности службы и составить представление о разделении обязанностей между клиентом и поставщиком. Корпорация Майкрософт предоставила сведения о каждом из этих принципов, чтобы помочь лучше разобраться с разделением обязанностей. Текущая архитектура и соответствующие ей шаблоны Azure Resource Manager поддерживаются технической документацией корпорации Майкрософт, [14 Cloud Security Controls for UK cloud Using Microsoft Azure](https://gallery.technet.microsoft.com/14-Cloud-Security-Controls-670292c1) (14 методов управления безопасностью облака в Соединенном Королевстве с использованием Microsoft Azure). Эта архитектура проверена NCSC и признана соответствующей 14 принципам облачной безопасности UK NCSC, что позволяет общественным организациям быстро отслеживать способность выполнять свои обязательства по соответствию нормативным требованиям с использованием облачных служб по всему миру и в Соединенном Королевстве в облаке Microsoft Azure. Этот шаблон развертывает инфраструктуру для рабочей нагрузки. Клиенты должны установить и настроить код приложения, а также поддерживающее программное обеспечение уровня бизнес-логики и уровня данных. Подробные инструкции по развертыванию см. в [этой статье](https://aka.ms/ukofficial-paaswa-repo/).

Эта схема предоставляет базовую архитектуру. Наши клиенты могут использовать эту схему в качестве основы для рабочих нагрузок категории OFFICIAL и развивать на ней шаблоны и ресурсы в соответствии с конкретными требованиями. Схема опирается на принципы, изложенные в [схеме трехуровневого веб-приложения IaaS для UK OFFICIAL](https://aka.ms/ukofficial-iaaswa), и позволяет предложить нашим клиентам варианты реализации [IaaS (инфраструктура как услуга)](https://azure.microsoft.com/overview/what-is-iaas/) и PaaS для размещения рабочих нагрузок веб-служб.

Чтобы развернуть эту схему, необходима подписка Azure. Если у вас нет подписки Azure, вы можете быстро и легко зарегистрироваться, перейдя на страницу "Приступая к работе с Azure". Инструкции по развертыванию см. [здесь](https://aka.ms/ukofficial-paaswa-repo/).

## <a name="architecture-and-components"></a>Архитектура и компоненты

Эта схема обеспечивает размещение веб-приложения в облачной среде Azure, которая поддерживает рабочие нагрузки категории UK OFFICIAL. Эта архитектура предоставляет безопасную среду на основе возможностей и служб платформы Azure. В этой среде развертываются два веб-приложения службы приложений (одно для граждан, другое для официальных представителей) и дополнительный уровень приложений API, позволяющий обслуживать общедоступный веб-интерфейс. Также развертывается База данных SQL Azure как управляемое реляционное хранилище данных для приложения. Все данные, которыми обмениваются эти компоненты, а также данные, поступающие к ним извне платформы, шифруются с помощью TLS 1.2 для гарантии конфиденциальности данных при передаче, а аутентификация доступа организуется с помощью Azure Active Directory.

![Схема эталонной архитектуры размещения веб-приложения PaaS для UK OFFICIAL](images/ukofficial-paaswa-architecture.png?raw=true "PaaS Web Application Hosting for UK OFFICIAL Workloads reference architecture diagram")

Кроме того, в рамках архитектуры развертываются безопасное хранилище, средства мониторинга и ведения журнала, унифицированного управления безопасностью и расширенной защиты от угроз, чтобы гарантировать клиентам все необходимые возможности для защиты и контроля среды для размещения решений.

Это решение использует следующие службы Azure. Подробные сведения об архитектуре развертывания см. в [этом разделе](#deployment-architecture).

- Azure Active Directory
- Удостоверение управляемой службы
- Служба приложений
- Веб-приложение
- Приложение API
- Azure DNS
- Key Vault
- Azure Monitor
- Application Insights
- Log Analytics
- Azure Resource Manager
- Центр безопасности Azure
- Базы данных SQL Azure
- Хранилище Azure

## <a name="deployment-architecture"></a>Архитектура развертывания

В следующем разделе подробно описываются компоненты развертывания и реализации.

### <a name="security"></a>Безопасность

#### <a name="identity-and-authentication"></a>Идентификация и аутентификация

Эта схема обеспечивает защиту доступа к ресурсам с помощью службы управления каталогами и удостоверениями. Такая архитектура позволяет полноценно использовать [удостоверение как периметр безопасности](https://docs.microsoft.com/azure/security/security-paas-deployments#identity-as-the-primary-security-perimeter). 

Следующие технологии обеспечивают возможности управления удостоверениями в среде Azure:

- [Azure Active Directory (Azure AD)](https://azure.microsoft.com/services/active-directory/) — это мультитенантный облачный каталог и служба управления удостоверениями корпорации Майкрософт. Все пользователи решения создаются в Azure Active Directory, включая пользователей, обращающихся к базе данных SQL.
- Аутентификация в веб-приложении для операторов и доступ к администрированию ресурсов Azure выполняются через Azure AD. Дополнительные сведения см. в статье [Интеграция приложений с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications).
- Azure AD используется при шифровании столбцов базы данных для аутентификации приложения в Базе данных SQL Azure. Дополнительные сведения см. в статье [Always Encrypted: защита конфиденциальных данных в Базе данных SQL и хранение ключей шифрования в хранилище ключей Azure](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault).
- Веб-приложение для граждан предоставляется в свободном доступе. Для поддержки создания учетных записей и аутентификации через Active Directory и (или) социальные сети в качестве поставщиков удостоверений предоставляется возможность интеграции с [Azure Active Directory B2C](https://azure.microsoft.com/services/active-directory-b2c/).
- Служба [Защита идентификации Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection) выявляет потенциальные уязвимости и рискованные учетные записи, предоставляет рекомендации по повышению уровня безопасности для удостоверений вашей организации, настраивает автоматическое реагирование на обнаруженные подозрительные действия, связанные с удостоверениями вашей организации, исследует подозрительные инциденты и предпринимает соответствующие действия для их устранения.
- [Контроль доступа на основе ролей (RBAC) Azure](https://docs.microsoft.com/azure/role-based-access-control/role-assignments-portal) обеспечивает точное управление доступом для Azure. Доступ к подписке ограничен администратором подписки, а доступ к Azure Key Vault разрешен только тем пользователям, которым необходим доступ к управлению ключами.
- Благодаря использованию [условного доступа Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-conditional-access-azure-portal) клиенты могут применять дополнительные меры безопасности для доступа к приложениям или других действий пользователей в среде, основанные на дополнительных условиях: местонахождение пользователя, тип устройства, состояние и риски входа.
- Служба [Защита от атак DDoS Azure](https://docs.microsoft.com/azure/security/security-paas-deployments#security-advantages-of-a-paas-cloud-service-model) в сочетании с соблюдением рекомендаций по разработке приложений обеспечивают защиту от атак DDoS благодаря постоянному мониторингу трафика и устранения распространенных атак сетевого уровня в режиме реального времени. Архитектура PaaS обеспечивает защиту от атак DDoS на уровне платформы полностью автоматически и прозрачно для клиента. Но при этом важно отметить, что клиент несет ответственность за соблюдение правил безопасности при разработке приложений.

#### <a name="data-in-transit"></a>Передаваемые данные

Данные в пути за пределами компонентов Azure и между ними защищаются [протоколами TLS/SSL (Transport Layer Security/Secure Sockets Layer)](https://www.microsoft.com/TrustCenter/Security/Encryption) с использованием симметричной криптографии на основе общего секрета для шифрования сетевых коммуникаций. По умолчанию сетевой трафик защищается с помощью TLS 1.2.

#### <a name="security-and-malware-protection"></a>Безопасность и защита от вредоносных программ

[Центр безопасности Azure](https://azure.microsoft.com/services/security-center/) предоставляет полное представление о состоянии безопасности всех своих ресурсов в Azure. Вы можете убедиться, что все необходимые настройки заданы правильно, а также найти ресурсы, которым нужно уделить внимание.

[Azure Advisor](https://docs.microsoft.com/azure/advisor/advisor-overview) — это персонализированный облачный консультант, который поможет следовать рекомендациям по оптимизации развернутых служб Azure. Он анализирует конфигурацию ресурсов и данные телеметрии их использования и рекомендует решения, которые помогут повысить эффективность затрат, производительность, уровень доступности и безопасности ресурсов Azure.

[Антивредоносное ПО Майкрософт](https://docs.microsoft.com/azure/security/azure-security-antimalware) предоставляет защиту в реальном времени, которая помогает обнаруживать и устранять вирусы, шпионское ПО и другие вредоносные программы. По умолчанию этот компонент устанавливается в базовой инфраструктуре виртуальных машин PaaS и управляется структурой Azure прозрачно для клиента.

### <a name="paas-services-in-this-blueprint"></a>Службы PaaS, включенные в эту схему

#### <a name="azure-app-service"></a>Служба приложений Azure

Веб-приложения Azure предоставляют полностью управляемую среду размещения для веб-приложений на языках Java, PHP, Python, Node.js, HTML и C#, избавляя от необходимости управлять инфраструктурой. Эта служба поддерживает Windows и Linux, а также обеспечивает автоматическое масштабирование, высокий уровень доступности и автоматическое развертывание из [Visual Studio Team Services](https://azure.microsoft.com/services/visual-studio-team-services/) или любого репозитория на основе Git.

Служба приложений [соответствует требованиям ISO, SOC и PCI](https://www.microsoft.com/TrustCenter/) и позволяет выполнять аутентификацию пользователей с помощью [Azure Active Directory](https://docs.microsoft.com/azure/app-service/app-service-mobile-how-to-configure-active-directory-authentication) или учетных записей в социальных сетях ([Google](https://docs.microsoft.com/azure/app-service/app-service-mobile-how-to-configure-google-authentication), [Facebook](https://docs.microsoft.com/azure/app-service/app-service-mobile-how-to-configure-facebook-authentication), [Twitter](https://docs.microsoft.com/azure/app-service/app-service-mobile-how-to-configure-twitter-authentication) и [Microsoft](https://docs.microsoft.com/azure/app-service/app-service-mobile-how-to-configure-microsoft-authentication)).

Планы "Базовый", "Стандартный" и "Премиум" предназначены для производственных нагрузок и выполняются на выделенных экземплярах виртуальных машин. Каждый экземпляр поддерживает множество приложений и доменов. Службы приложений при необходимости поддерживают [ограничения IP-адресов](https://docs.microsoft.com/azure/app-service/app-service-ip-restrictions) для защиты трафика к доверенным IP-адресам, а также [управляемое удостоверение службы](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity) для безопасного подключения к другим службам PaaS, таким как [Key Vault](https://azure.microsoft.com/services/key-vault/) и (или) [База данных Azure SQL](https://azure.microsoft.com/services/sql-database/). Если потребуется более высокий уровень защиты, в рамках плана "Изолированный" приложения можно разместить в частной выделенной среде Azure. Это идеальный вариант, если требуется безопасное подключение к локальной сети, повышенная производительность и дополнительные возможности масштабирования.

Этот шаблон предназначен для развертывания следующих функций службы приложений:

- план службы приложений уровня [Стандартный](https://docs.microsoft.com/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview);
- несколько [слотов развертывания](https://docs.microsoft.com/azure/app-service/web-sites-staged-publishing) для веб-приложений: Dev (разработка), Preview (предварительный просмотр), QA (контроль качества), UAT (приемочное тестирование) и, конечно же, слот по умолчанию Production (рабочая среда);
- [управляемое удостоверение службы](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity) для подключения к [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) (также может использоваться для предоставления доступа к [Базе данных SQL Azure](https://azure.microsoft.com/services/sql-database/)); 
- интеграция с [Azure Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-azure-web-apps) для мониторинга производительности;
- [Журналы диагностики](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs) 
- [оповещения метрик](https://docs.microsoft.com/azure/application-insights/app-insights-alerts); 
- [Приложения API Azure](https://azure.microsoft.com/services/app-service/api/) 

#### <a name="azure-sql-database"></a>Базы данных SQL Azure

База данных SQL — это реляционная база данных общего назначения (управляемая служба) в Microsoft Azure, которая поддерживает такие структуры, как реляционные данные, JSON, пространственные данные и XML. База данных SQL предоставляет отдельные управляемые базы данных SQL, управляемые базы данных SQL в [эластичном пуле](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool) и [управляемые экземпляры](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) базы данных SQL (в общедоступной предварительной версии). Она обеспечивает динамически масштабируемую производительность https://docs.microsoft.com/azure/sql-database/sql-database-service-tiers) и поддерживает такие возможности, как [индексы columnstore](https://docs.microsoft.com/sql/relational-databases/indexes/columnstore-indexes-overview) для подробнейшего аналитического анализа и отчетности и [выполняющуюся в памяти OLTP](https://docs.microsoft.com/azure/sql-database/sql-database-in-memory) для мощнейшей обработки транзакций. Майкрософт быстро и эффективно обрабатывает исправления и обновления базы кода SQL, а также упрощает обслуживание базовой инфраструктуры.

База данных SQL Azure в рамках этой схемы

В экземпляре базы данных Azure SQL используются следующие меры безопасности базы данных:

- [правила брандмауэра уровня сервера и уровня базы данных](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure) либо [конечные точки службы виртуальной сети](https://docs.microsoft.com/azure/virtual-network/virtual-network-service-endpoints-overview) с использованием [правил виртуальной сети](https://docs.microsoft.com/azure/sql-database/sql-database-vnet-service-endpoint-rule-overview);
- [прозрачное шифрование данных](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql) обеспечивает защиту Базы данных SQL Azure и хранилища данных Azure от вредоносных действий. Выполняется шифрование и расшифровка базы данных, связанных резервных копий и неактивных файлов журналов транзакций в реальном времени без необходимости изменения приложения.
- [аутентификация Azure AD](https://docs.microsoft.com/azure/sql-database/sql-database-aad-authentication) позволяет централизованно управлять удостоверениями пользователей базы данных и другими службами Майкрософт. Централизованное управление удостоверениями позволяет использовать единое расположение для управления пользователями и упрощает управление разрешениями.
- использование Azure Active Directory для администрирования базы данных;
- [журналы аудита](https://docs.microsoft.com/azure/sql-database/sql-database-auditing), сохраняемые в учетных записях хранения;
- [оповещения метрик](https://docs.microsoft.com/azure/application-insights/app-insights-alerts) для неудачных подключений к базе данных;
- [обнаружение угроз SQL](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection);
- [столбцы Always Encrypted](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault);

### <a name="azure-storage"></a>Хранилище Azure

[Служба хранилища Microsoft Azure](https://azure.microsoft.com/services/storage/) является облачной службой под управлением корпорации Майкрософт, которая предоставляет хранилище с высоким уровнем доступности, безопасности, надежности, масштабируемости и избыточности. Служба хранилища Azure состоит из хранилища BLOB-объектов, хранилища файлов и хранилища очередей.

#### <a name="azure-storage-in-this-blueprint"></a>Служба хранилища Azure в рамках этой схемы

В этом шаблоне используются следующие компоненты службы хранилища Azure:

- [Шифрование службы хранения](https://docs.microsoft.com/azure/storage/common/storage-service-encryption) 
- допускается только трафик по протоколу HTTPS.

#### <a name="data-at-rest"></a>Неактивные данные

Функция [Шифрование службы хранилища](https://docs.microsoft.com/azure/storage/common/storage-service-encryption) при записи всех данных в службу хранилища Azure использует 256-битное шифрование AES, то есть самую надежную технологию блочного шифрования на сегодняшний день. Вы можете использовать ключи шифрования с SSE, управляемые корпорацией Майкрософт, или [собственные ключи шифрования](https://docs.microsoft.com/azure/storage/common/storage-service-encryption-customer-managed-keys).

Учетные записи хранения можно защитить с помощью [конечных точек службы виртуальной сети](https://docs.microsoft.com/azure/virtual-network/virtual-network-service-endpoints-overview) и [правил виртуальной сети](https://docs.microsoft.com/azure/storage/common/storage-network-security).

Подробные сведения о защите службы хранилища Azure можно найти в [руководстве по безопасности](https://docs.microsoft.com/azure/storage/common/storage-security-guide).


### <a name="secrets-management"></a>Управление секретами

#### <a name="azure-key-vault"></a>Хранилище ключей Azure

[Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-overview) используется для защиты ключей и секретов приложений, чтобы предотвратить доступ к ним посторонних лиц. Оно не предназначено для использования в качестве хранилища паролей пользователей. Оно позволяет создать несколько безопасных контейнеров, называемых хранилищами. Эти хранилища поддерживают аппаратные модули безопасности (HSM). Хранилища позволяют уменьшить вероятность случайной потери информации о безопасности путем централизации хранения секретов приложений. Хранилища Key Vault также контролируют и регистрируют доступ к чему-либо, что хранится в них. Azure Key Vault может обрабатывать запросы и обновлять сертификаты протокола TLS, предоставляя функции, необходимые для надежного решения по управлению жизненным циклом сертификата.

#### <a name="azure-key-vault-in-this-blueprint"></a>Azure Key Vault в рамках этой схемы:

- содержит ключ доступа к хранилищу с доступом на чтение, предоставленным [управляемым удостоверением службы](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity) для веб-приложения с интерфейсом клиента;
- содержит пароль администратора базы данных SQL Server (в отдельном хранилище);
- ведет журнал диагностики.

### <a name="monitoring-logging-and-audit"></a>Мониторинг, ведение журналов и аудит

#### <a name="log-analytics"></a>Log Analytics

[Log Analytics](https://azure.microsoft.com/services/log-analytics/) — это служба в Azure, которая помогает собирать и анализировать данные, формируемые ресурсами в облачных и локальных средах.

#### <a name="log-analytics-in-this-blueprint"></a>Log Analytics в рамках этой схемы реализует следующее:

- Оценка SQL
- диагностика Key Vault;
- подключение к Application Insights;
- Журнал действий Azure

#### <a name="application-insights"></a>Application Insights

[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) — это расширяемая служба управления производительностью приложений (APM) для веб-разработчиков на нескольких платформах. Эта служба используется, чтобы отслеживать динамические веб-приложения, и может автоматически обнаруживать аномалии в производительности, анализировать производительность, диагностировать проблемы и предоставлять сведения о взаимодействии пользователей с приложением. Application Insights можно развернуть локально или в облаке на разных платформах, включая .NET, Node.js и J2EE. Эта служба интегрируется с процессом DevOps и содержит точки подключения ко многим инструментам разработки.

#### <a name="application-insights-in-this-blueprint"></a>Application Insights в рамках этой схемы

В этом шаблоне используются следующие компоненты Application Insights:

- информационная панель Application Insights для каждого сайта (для оператора, для клиента и для API).

#### <a name="azure-activity-logs"></a>журналы действий Azure;

[Журналы действий Azure](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs#what-you-can-do-with-the-activity-log) позволяют выполнять аудит событий уровня управления в подписках. С помощью журнала действий можно ответить на вопросы "что? кто? когда?", касающиеся любой операции записи (PUT, POST, DELETE) для ресурсов в вашей подписке. Вы также можете отслеживать состояние операции и другие ее свойства.

#### <a name="azure-monitor"></a>Azure Monitor

[Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-azure-monitor) обеспечивает базовый мониторинг служб Azure, позволяя собирать метрики, журналы действий и журналы диагностики. Azure Monitor предоставляет метрики инфраструктуры базового уровня, а также журналы для большинства служб Microsoft Azure.

## <a name="threat-model"></a>Модель рисков

Схему потока данных для этой эталонной архитектуры можно [скачать](https://aka.ms/ukofficial-paaswa-tm) или просмотреть ниже. Используя эту модель, клиенты могут выявить зоны потенциального риска в инфраструктуре системы при внесении изменений.

![Размещение веб-приложений PaaS для модели угроз рабочих нагрузок UK OFFICIAL](images/ukofficial-paaswa-threat-model.png?raw=true "PaaS Web Application Hosting for UK OFFICIAL Workloads threat model")

## <a name="ncsc-cloud-security-principles-compliance-documentation"></a>Документация по соответствию принципам облачной безопасности NCSC

В Crown Commercial Service (агентство, которое работает над улучшением коммерческой и закупочной деятельности правительства) повысили категорию корпоративных облачных служб Майкрософт до G-Cloud v6 для всех предложений корпорации на уровне OFFICIAL. Дополнительные сведения об Azure и G-Cloud см. в [этой статье](https://www.microsoft.com/trustcenter/compliance/uk-g-cloud).

Эта схема соответствует 14 принципам облачной безопасности, задокументированным в [принципах NCSC](https://www.ncsc.gov.uk/guidance/implementing-cloud-security-principles), и позволяет создать среду, пригодную для размещения рабочих нагрузок категории UK OFFICIAL.

В [таблице ответственности клиента по категории UK OFFICIAL](https://aka.ms/ukofficial-crm) (книга Excel), включенной в схему безопасности и соответствия требованиям Azure, перечислены все 14 принципов облачной безопасности с указанием того, кто отвечает за реализацию принципа (или его части): корпорация Майкрософт, клиент или обе стороны.

В [таблице реализации принципов](https://aka.ms/ukofficial-paaswa-pim) (книга Excel), включенной в схему безопасности и соответствия требованиям Azure, перечислены все 14 принципов облачной безопасности. Для каждого принципа (или его части), за который согласно таблице ответственности клиентов отвечает клиент, указано: (1) реализует ли схема безопасности этот принцип и (2) как реализация согласовывается с требованиями этого принципа.  

Кроме того, Cloud Security Alliance опубликовал Cloud Control Matrix, чтобы помочь клиентам оценить облачных поставщиков и определить вопросы, на которые нужно ответить, прежде чем переходить к облачным службам. Команда Microsoft Azure, в свою очередь, ответила на вопросы в анкете CSA Consensus Assessment Initiative Questionnaire ([CSA CAIQ](https://www.microsoft.com/TrustCenter/Compliance/CSA)), описав реализацию предлагаемых принципов корпорацией Майкрософт.

## <a name="third-party-assessment"></a>Оценка независимых сторон

Эта схема проверена центром национальной кибербезопасности Великобритании (NCSC) и полностью соответствует 14 принципам облачной безопасности NCSC.

Шаблоны автоматизации протестированы командой архитекторов облачных решений Azure для обслуживания клиентов в Великобритании и партнером корпорации Microsoft [Ampliphae](http://www.ampliphae.com/).


## <a name="deploy-the-solution"></a>Развертывание решения

Это решение автоматизации схемы безопасности и соответствия требованиям Azure состоит из файлов конфигурации JSON и сценариев PowerShell, которые обрабатываются службой API Azure Resource Manager для развертывания ресурсов в Azure. Подробные инструкции по развертыванию см. в [этой статье](https://aka.ms/ukofficial-paaswa-repo).

Были предложены три подхода к развертыванию. Простой "экспресс-метод" [Azure CLI 2](https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest) подходит для быстрого создания тестовой среды; параметризованный метод [Azure CLI 2](https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest) дает больше возможностей для настройки сред для рабочей нагрузки; развертывание через портал Azure позволяет оператору настроить параметры развертывания на портале Azure. 

1.  Клонируйте или скачайте [этот](https://aka.ms/ukofficial-paaswa-repo) репозиторий GitHub на локальную рабочую станцию.
2.  Изучите [описание метода 1: Azure CLI 2 (экспресс-метод)](https://aka.ms/ukofficial-paaswa-repo/#method-1-azure-cli-2-express-version) и выполните приведенные там команды.
3.  Изучите [описание метода 1a: Azure CLI 2 (настройка развертывания с помощью аргументов скрипта)](https://aka.ms/ukofficial-paaswa-repo/#method-1a-azure-cli-2-configuring-the-deployment-via-script-arguments) и выполните приведенные там команды.
4.  Изучите [описание метода 2: процесс развертывания с помощью портала Azure](https://aka.ms/ukofficial-paaswa-repo/#method-2-azure-portal-deployment-process) и выполните перечисленные там действия.

## <a name="guidance-and-recommendations"></a>Инструкции и рекомендации

### <a name="api-management"></a>Управление API

[Управление API Azure](https://azure.microsoft.com/services/api-management/) можно использовать перед Службой приложений Azure для организации дополнительных уровней защиты, регулирования и управления. Эти уровни позволяют предоставлять API-интерфейсы опосредованно и обеспечивать их безопасность.

### <a name="azure-b2c"></a>Azure B2C

[Azure Active Directory B2C](https://azure.microsoft.com/services/active-directory-b2c/) можно реализовать как элемент управления, чтобы пользователи могли регистрировать общедоступные веб-приложения, создавать для них удостоверения, разрешать авторизацию и управлять доступом.

## <a name="disclaimer"></a>Отказ от ответственности

- Этот документ является исключительно информационным. МАЙКРОСОФТ НЕ ПРЕДОСТАВЛЯЕТ НИКАКИХ ГАРАНТИЙ, ЯВНЫХ, КОСВЕННЫХ ИЛИ ПРЕДУСМОТРЕННЫХ ЗАКОНОМ, В ОТНОШЕНИИ ИНФОРМАЦИИ В ЭТОМ ДОКУМЕНТЕ. Данный документ предоставляется "как есть". Сведения и мнения, представленные в данном документе, включая URL-адреса и ссылки на другие веб-сайты, могут быть изменены без предварительного уведомления. Клиенты, читающие этот документ, берут ответственность за его использование на себя.
- Настоящий документ не предоставляет клиентам юридических прав на интеллектуальную собственность в отношении продуктов или решений корпорации Майкрософт.
- Клиенты могут скопировать и использовать данный документ для внутренних справочных целей.
- Выполнение некоторых рекомендаций в этом документе может привести к более интенсивному использованию данных, а также сетевых и вычислительных ресурсов в Azure, а значит и к дополнительным затратам на лицензии или подписки Azure.
- Эта архитектура призвана служить основой, которую клиенты должны адаптировать для конкретных требований, и не должна использоваться "как есть" в рабочей среде.
- Этот документ разработан в качестве справочного материала и не определяет все способы, с помощью которых клиент может отвечать нормам и стандартам соответствия. Клиентам следует обратиться в юридический отдел своей организации, чтобы получить одобренные варианты пользовательских реализаций.
