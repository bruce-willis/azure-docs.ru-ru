---
title: Общие сведения об Управляемом экземпляре Базы данных SQL Azure | Документация Майкрософт
description: В этом разделе описывается Управляемый экземпляр Базы данных SQL Azure и принципы его работы, а также его отличия от отдельной базы данных в службе "База данных SQL Azure".
services: sql-database
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: bonova
ms.author: bonova
ms.reviewer: carlrab
manager: craigg
ms.date: 09/26/2018
ms.openlocfilehash: 626dd362248027831c78d1505662ca12d2ff334d
ms.sourcegitcommit: d1aef670b97061507dc1343450211a2042b01641
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2018
ms.locfileid: "47392828"
---
# <a name="what-is-a-managed-instance"></a>Общие сведения об Управляемом экземпляре

Управляемый экземпляр Базы данных SQL Azure является новой моделью развертывания "База данных SQL Azure". Она обеспечивает практически полную совместимость с последним ядром СУБД локальной версии SQL Server (Enterprise Edition), предоставляя собственную реализацию [виртуальной сети (VNet)](../virtual-network/virtual-networks-overview.md), устраняющую распространенные проблемы безопасности и [бизнес-модель](https://azure.microsoft.com/pricing/details/sql-database/), подходящую для клиентов локальной версии SQL Server. Управляемый экземпляр позволяет существующим клиентам SQL Server переместить их локальные приложения в облако методом lift-and-shift с минимальными изменениями приложения и базы данных. При этом Управляемый экземпляр сохраняет все возможности PaaS (автоматическое исправление и обновление версии, [автоматическое резервное копирование](sql-database-automated-backups.md), [высокий уровень доступности](sql-database-high-availability.md)), что значительно снижает расходы на управление и совокупную стоимость владения.

> [!IMPORTANT]
> Список регионов, в которых сейчас доступен Управляемый экземпляр см. в статье[Migrate your databases to a fully managed service with Azure SQL Database Managed Instance](https://azure.microsoft.com/blog/migrate-your-databases-to-a-fully-managed-service-with-azure-sql-database-managed-instance/) (Перенос баз данных в полностью управляемую службу при помощи Управляемого экземпляра Базы данных SQL Azure).
 
На следующем рисунке показаны основные возможности управляемого экземпляра:

![Основные возможности](./media/sql-database-managed-instance/key-features.png)

Управляемый экземпляр Базы данных SQL Azure предназначен для клиентов, которые хотят перенести большое количество приложений из локальной среды или среды IaaS, самостоятельно созданной среды или среды, предоставленной ISV, в полностью управляемую облачную среду PaaS с минимальными усилиями. С помощью полностью автоматизированной [службы миграции данных (DMS)](../dms/tutorial-sql-server-to-managed-instance.md#create-an-azure-database-migration-service-instance) в Azure клиенты могут методом lift-and-shift переносить локальный экземпляр SQL Server на управляемый экземпляр, который обеспечивает совместимость с SQL Server в локальной среде и полную изоляцию экземпляров клиента с поддержкой собственной виртуальной сети.  В программе Software Assurance можно обменять имеющиеся лицензии, чтобы получить сниженные тарифы на Управляемый экземпляр Базы данных SQL при использовании программы [преимущества гибридного использования Azure для SQL Server](../virtual-machines/windows/hybrid-use-benefit-licensing.md).  Управляемый экземпляр Базы данных SQL — лучший целевой объект миграции в облаке для экземпляров SQL Server, требующих высокого уровня безопасности и расширенных возможностей программирования. 

С выходом общедоступной версии управляемый экземпляр будет обеспечивать совместимость с последней версией локального SQL Server на уровне практически 100 % (предусмотрен многоэтапный план выпуска). 

Чтобы выбрать между отдельной базой данных службы "База данных SQL Azure" и Управляемым экземпляром Базы данных SQL Azure, а также средой IaaS в SQL Server на виртуальной машине, ознакомьтесь со статьей [Вы можете выбрать компонент SQL Server в облаке: база данных SQL Azure (PaaS) или SQL Server на виртуальных машинах Azure (IaaS)](sql-database-paas-vs-sql-server-iaas.md).

## <a name="key-features-and-capabilities"></a>Основные функции и возможности 

Управляемый экземпляр Базы данных SQL Azure сочетает в себе лучшие функции, доступные в Базе данных SQL Azure и ядре СУБД SQL Server.

> [!IMPORTANT]
> Управляемый экземпляр поддерживает все функции последней версию SQL Server, включая операции в сети, автоматическое исправление планов и другие усовершенствования для повышения производительности организации. 

| **Преимущества PaaS** | **Непрерывность бизнес-процессов** |
| --- | --- |
|Нет необходимости в приобретении оборудования и управления им <br>Отсутствие накладных расходов на управление базовой инфраструктурой <br>Быстрая подготовка и масштабирование службы <br>Автоматическое исправление и обновление версии <br>Интеграция с другими службами данных PaaS |Соглашение об уровне обслуживания с гарантией времени непрерывной работы 99,99 %.  <br>Встроенный [высокий уровень доступности](sql-database-high-availability.md) <br>Данные защищены путем [автоматического создания резервных копий](sql-database-automated-backups.md) <br>Период хранения резервных копий настраивается пользователем (в общедоступной предварительной версии установлено фиксированное значение — 7 дней) <br>Инициируемые пользователем [резервные копии](https://docs.microsoft.com/sql/t-sql/statements/backup-transact-sql?view=azuresqldb-mi-current) <br>Возможность [восстановления базы данных до точки во времени](sql-database-recovery-using-backups.md#point-in-time-restore) |
|**Безопасность и соответствие требованиям** | **Управление**|
|Изолированная среда ([интеграция виртуальной сети](sql-database-managed-instance-vnet-configuration.md), клиентская служба, выделенные ресурсы вычисления и хранилище) <br>[Прозрачное шифрование данных (TDE)](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql)<br>[Проверка подлинности Azure AD](sql-database-aad-authentication.md), поддержка единого входа <br>Соблюдение тех же стандартов соответствия, что и База данных SQL Azure <br>[Аудит SQL](sql-database-managed-instance-auditing.md) <br>[Обнаружение угроз](sql-database-managed-instance-threat-detection.md) |Программный интерфейс Azure Resource Manager для автоматизации подготовки и масштабирования службы <br>Функциональные возможности портала Azure для подготовки и масштабирования службы вручную <br>Служба миграции данных 

## <a name="vcore-based-purchasing-model"></a>Модель покупки на основе числа виртуальных ядер

[Модель покупки на основе виртуальных ядер](sql-database-service-tiers-vcore.md) обеспечивает больше гибкости, контроля, прозрачности и это простой способ перенести свои требования к локальной рабочей нагрузке в облако. Эта модель позволяет масштабировать ресурсы вычислений, памяти и хранилища с учетом потребностей рабочих нагрузок. Модель на основе числа виртуальных ядер также обеспечивает экономию до 30 % при использовании [программы преимущества гибридного использования Azure для SQL Server](../virtual-machines/windows/hybrid-use-benefit-licensing.md).

Виртуальное ядро — это логический ЦП с возможностью выбора поколения оборудования.
- Логические ЦП 4-го поколения основаны на процессорах Intel E5-2673 v3 (Haswell) с тактовой частотой 2,4 ГГц.
- Логические ЦП 5-го поколения основаны на процессорах Intel E5-2673 v4 (Broadwell) с тактовой частотой 2,3 ГГц.

Следующая таблица поможет вам выбрать оптимальную конфигурацию ресурсов вычислений, памяти, хранилища и операций ввода-вывода.

||Поколение 4|Поколение 5|
|----|------|-----|
|Оборудование|Процессоры Intel E5-2673 v3 (Haswell) с тактовой частотой 2,4 ГГц с присоединенным виртуальным ядром SSD = 1 PP (физическое ядро)|Процессоры Intel E5-2673 v4 (Haswell) с тактовой частотой 2,4 ГГц, быстрый диск SSD eNVM, виртуальное ядро = 1 LP (технология Hyper-Threading)|
|Объемы вычислительных ресурсов|8, 16, 24 виртуальных ядер|8, 16, 24, 32, 40, 64, 80 виртуальных ядер|
|Память|7 ГБ на виртуальное ядро|5,5 ГБ на виртуальное ядро|
||||

## <a name="managed-instance-service-tiers"></a>Уровни служб Управляемого экземпляра

Управляемый экземпляр доступен на двух уровнях обслуживания:
- **Общего назначения**: для приложений с обычными требованиями к производительности и задержке ввода-вывода.
- **Критически важный для бизнеса (предварительная версия)**: для приложений с низкими требованиями к задержке ввода-вывода и минимальным воздействием основных операций обслуживания на рабочую нагрузку.

Оба уровня обслуживания гарантируют доступность на уровне 99,99 % и позволяют вам независимо выбирать размер хранилища и вычислительную емкость. Дополнительные сведения об архитектуре Базы данных Azure SQL с высоким уровнем доступности см. в статье [Высокая доступность и база данных SQL Azure](sql-database-high-availability.md).

> [!IMPORTANT]
> Изменение уровня службы с "Общего назначения" на "Критически важный для бизнеса" или наоборот не поддерживается в общедоступной предварительной версии. Если вы хотите перенести базы данных к экземпляру другого уровня службы, можно создать новый экземпляр, восстановить базу данных с помощью возвращения на момент времени из исходного экземпляра и затем удалить исходный экземпляр, если он больше не нужен. 

### <a name="general-purpose-service-tier"></a>Уровень служб общего назначения

Ниже перечислены ключевые характеристики уровня служб общего назначения. 

- Предназначен для большинства бизнес-приложений с обычными требованиями к производительности. 
- Высокопроизводительное хранилище Azure класса Premium (8 ТБ). 
- 100 баз данных на экземпляр 

Ниже приведены основные характеристики уровня служб "Общего назначения":

|Функция | ОПИСАНИЕ|
|---|---|
| Количество виртуальных ядер* | 8, 16, 24 (поколение 4)<br>8, 16, 24, 32, 40, 64, 80 (5 поколение)|
| Версия и сборка SQL Server | Ядро СУБД SQL Server (последняя стабильная версия) |
| Минимальный размер хранилища | 32 ГБ |
| Максимальный размер хранилища | 8 ТБ |
| Максимальный размер хранилища на базу данных | Определяется максимальным размером хранилища каждого экземпляра |
| Ожидаемое число операций ввода-вывода в секунду, поддерживаемое хранилищем | 500–7500 операций ввода-вывода на файл данных (зависит от файла данных). Дополнительные сведения о хранилище класса Premium см. [здесь](../virtual-machines/windows/premium-storage-performance.md#premium-storage-disk-sizes). |
| Число файлов данных (ROWS) в одной базе данных | Несколько | 
| Число файлов журнала (LOG) в одной базе данных | 1 | 
| Управляемые, автоматически создаваемые резервные копии | Yes |
| Высокая доступность | Данные, хранящиеся в службе хранилища Azure и [Azure Service Fabric](../service-fabric/service-fabric-overview.md) |
| Встроенный мониторинг и метрики базы данных и экземпляра | Yes |
| Автоматическое применение исправления программного обеспечения | Yes |
| Виртуальная сеть — развертывание Azure Resource Manager | Yes |
| Виртуальная сеть — классическая модель развертывания | Нет  |
| Поддержка портала | Yes|
|||

\* Виртуальное ядро является логическим ЦП с возможностью выбрать поколение оборудования. Логические ЦП 4-го поколения основаны на процессорах Intel E5-2673 v3 (Haswell) 2,4 ГГц, а логические ЦП 5-го поколения — на процессорах Intel E5-2673 v4 (Broadwell) 2,3 ГГц. 

Дополнительные сведения см. в статье [Высокая доступность и База данных SQL Azure](sql-database-high-availability.md#standardgeneral-purpose-availability).

### <a name="business-critical-service-tier-preview"></a>Уровень служб "Критически важный для бизнеса" (предварительная версия)

Уровень служб "Критически важный для бизнеса" предназначен для приложений с высокими требованиями к операциям ввода-вывода. Он предлагает самую высокую отказоустойчивость благодаря использованию нескольких изолированных реплик групп доступности Always On. 

Ниже приведены основные характеристики уровня служб "Критически важный для бизнеса". 
-   Предназначен для бизнес-приложений с наибольшей производительностью и требованиями к высокой доступности 
-   поставляется со сверхбыстрым SSD-хранилищем (до 1 ТБ при использовании поколения 4 и до 4 ТБ при использовании поколения 5);
-   поддерживает до 100 баз данных на экземпляр. 
- Встроенный дополнительный экземпляр, доступный только для чтения, который можно использовать для задач отчетности и других рабочих нагрузок только для чтения.
- [Выполняющаяся в памяти OLTP](sql-database-in-memory.md), которую можно использовать для рабочей нагрузки с требованиями высокой производительности.  

|Функция | ОПИСАНИЕ|
|---|---|
| Количество виртуальных ядер* | 8, 16, 24, 32 (поколение 4)<br>8, 16, 24, 32, 40, 64, 80 (5 поколение)|
| Версия и сборка SQL Server | SQL Server (последняя доступная) |
| Дополнительные функции | [In-Memory OLTP](sql-database-in-memory.md)<br> 1 дополнительная реплика только для чтения ([Масштабирование для чтения](sql-database-read-scale-out.md))
| Минимальный размер хранилища | 32 ГБ |
| Максимальный размер хранилища | 4 поколение: 1 ТБ (все размеры виртуального ядра)<br> 5 поколение:<ul><li>1 ТБ для 8, 16 виртуальных ядер</li><li>2 ТБ для 24 виртуальных ядер</li><li>4 ТБ для 32, 40, 64, 80 виртуальных ядер.</ul>|
| Максимальный размер хранилища на базу данных | Определяется максимальным размером хранилища каждого экземпляра |
| Число файлов данных (ROWS) в одной базе данных | Несколько | 
| Число файлов журнала (LOG) в одной базе данных | 1 | 
| Управляемые, автоматически создаваемые резервные копии | Yes |
| Высокая доступность | Данные, хранящиеся на локальном SSD, и использование [групп доступности Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server) и [Azure Service Fabric](../service-fabric/service-fabric-overview.md) |
| Встроенный мониторинг и метрики базы данных и экземпляра | Yes |
| Автоматическое применение исправления программного обеспечения | Yes |
| Виртуальная сеть — развертывание Azure Resource Manager | Yes |
| Виртуальная сеть — классическая модель развертывания | Нет  |
| Поддержка портала | Yes|
|||

Дополнительные сведения см. в статье [Высокая доступность и База данных SQL Azure](sql-database-high-availability.md#premiumbusiness-critical-availability).

> [!IMPORTANT]
> Уровень служб **Критически важный для бизнеса** находится в предварительной версии.

## <a name="advanced-security-and-compliance"></a>Расширенный уровень безопасности и соответствие требованиям 

Управляемый экземпляр Базы данных SQL Azure сочетает в себе расширенные функции безопасности, предоставляемые облаком Azure и ядром СУБД SQL Server. 

### <a name="managed-instance-security-isolation-in-azure-cloud"></a>Обеспечение защиты Управляемого экземпляра путем изоляции в облаке Azure 

Управляемый экземпляр предоставляет дополнительную защиту путем изоляции от других клиентов в облаке Azure. Для обеспечения защиты путем изоляции необходимо следующее. 

- [Собственная реализованная виртуальная сеть](sql-database-managed-instance-vnet-configuration.md) и подключение к локальной среде с помощью Azure Express Route или VPN-шлюза. 
- Конечная точка SQL, предоставленная только через частный IP-адрес, разрешающий безопасные подключения из частной или гибридной сетей Azure.
- Отдельный клиент с выделенной базовой инфраструктурой (вычислений, хранения).

На следующей схеме показаны различные варианты подключения для приложений: 

![Высокая доступность](./media/sql-database-managed-instance/application-deployment-topologies.png)  

Чтобы получить дополнительные сведения об интеграции виртуальной сети и политике сети на уровне подсети, см. раздел [Настройка виртуальной сети для Управляемого экземпляра Базы данных SQL Azure](sql-database-managed-instance-vnet-configuration.md) и [Подключение приложения к Управляемому экземпляру Базы данных SQL Azure](sql-database-managed-instance-connect-app.md). 

> [!IMPORTANT]
> Поместите несколько управляемых экземпляров в той же подсети, везде, где это разрешено требованиями к безопасности, так как это создаст дополнительные преимущества. Выделение экземпляров в одной и той же подсети значительно упростит обслуживание сетевой инфраструктуры и сократит время подготовки экземпляра, поскольку длительное предоставление ресурсов связано с затратами на развертывание первого управляемого экземпляра в подсети.

### <a name="azure-sql-database-security-features"></a>Возможности безопасности Базы данных SQL Azure

База данных SQL Azure предоставляет набор расширенных функций безопасности, которые можно использовать для защиты данных.

- [Аудит Управляемого экземпляра](sql-database-managed-instance-auditing.md) позволяет отслеживать события базы данных и записывать их в файл журнала аудита, размещенный в учетной записи хранения Azure. Аудит может помочь соблюдать стандарты, проанализировать работу с базой данных и получить представление о расхождениях и аномалиях, которые могут указывать на бизнес-проблемы или предполагаемые нарушения безопасности. 
- Шифрование данных при передаче: Управляемый экземпляр защищает данные, шифруя их при передаче с помощью протокола TLS. В дополнение к применению протокола TLS Управляемый экземпляр Базы данных SQL Azure обеспечивает защиту конфиденциальных данных в процессе использования, при хранении и во время обработки запроса с помощью функции [Always Encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine). Функция Always Encrypted — первая в отрасли функция, которая предлагает непревзойденную защиту данных от взлома, включая кражу чрезвычайно важных данных. Например, функция Always Encrypted дает возможность всегда хранить в базе данных номера кредитных карт в зашифрованном виде, даже во время обработки запроса, позволяя авторизованному персоналу или обрабатывающему их приложению расшифровывать их только в момент использования. 
- Функция [обнаружения угроз](sql-database-managed-instance-threat-detection.md) дополняет [функцию аудита Управляемого экземпляра](sql-database-managed-instance-auditing.md), обеспечивая дополнительный уровень аналитики безопасности, встроенной в службу, которая выявляет подозрительные и потенциально опасные попытки получить доступ к базам данных или использовать их уязвимость. Вы получаете оповещения о подозрительных действиях, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных закономерностях в доступе к базам данных. Оповещения об обнаружении угроз можно просмотреть в [центре безопасности Azure](https://azure.microsoft.com/services/security-center/), который предоставляет сведения о подозрительных операциях и дает рекомендации о том, как определить причину угрозы и устранить ее.  
- [Динамическое маскирование данных](/sql/relational-databases/security/dynamic-data-masking) ограничивает возможность раскрытия конфиденциальных данных, маскируя их для обычных пользователей. Динамическое маскирование данных помогает предотвратить несанкционированный доступ к конфиденциальным данным, позволяя вам самостоятельно определить, какой объем конфиденциальных данных следует раскрывать с минимальным влиянием на уровне приложения. Эта функция работает на основе политики безопасности, скрывая конфиденциальные данные в результирующем наборе запроса по заданным полям базы данных, не меняя сами данные в базе данных. 
- [Безопасность на уровне строк](/sql/relational-databases/security/row-level-security) позволяет управлять доступом к строкам в таблице базы данных в зависимости от характеристик пользователя, выполняющего запрос (например, членство в группе или контекст выполнения). Безопасность на уровне строк (RLS) упрощает проектирование и программирование безопасности в приложении. RLS позволяет реализовать ограничения доступа к строкам данных. Например, обеспечьте сотрудникам доступ только к тем строкам данных, которые имеют отношение к их отделу, или только к тем данным, которые относятся к ним. 
- [Прозрачное шифрование данных (TDE)](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql) позволяет шифровать файлы данных Управляемого экземпляра Базы данных SQL Azure. Это называется шифрованием неактивных данных. TDE выполняет шифрование операций ввода-вывода в режиме реального времени, а также расшифровку файлов данных и журналов. Шифрование использует ключ шифрования базы данных (DEK), который хранится в загрузочной записи базы данных для обеспечения доступности во время восстановления. Вы можете защитить все свои базы данных в Управляемом экземпляре с помощью прозрачного шифрования данных. Прозрачное шифрование данных — это надежная технология шифрования данных на месте, требуемая многими стандартами соответствия для защиты носителя данных от кражи. На стадии общедоступной предварительной версии поддерживается модель автоматического управления ключами (выполняется платформой PaaS). 

Перемещение зашифрованной базы данных в Управляемый экземпляр SQL поддерживается через службу Azure Database Migration Service (DMS) или собственное восстановление. Если планируете перемещение зашифрованной базы данных, используя собственное восстановление, то необходимо выполнить переход существующего сертификата TDE из локального сервера или виртуальной машины SQL Server в управляемый экземпляр. Дополнительные сведения о параметрах перемещения см. в разделе [Перенос экземпляра SQL Server в Управляемый экземпляр Базы данных SQL Azure](sql-database-managed-instance-migrate.md).

## <a name="azure-active-directory-integration"></a>Интеграция с Azure Active Directory

Управляемый экземпляр Базы данных SQL Azure поддерживает стандартный вход СУБД SQL Server и вход, интегрированный с Azure Active Directory (AAD). Имена для входа AAD представляют собой имена для входа (облачная версия Azure) базы данных Windows, которые вы используете в своей локальной среде.

### <a name="azure-active-directory-integration-and-multi-factor-authentication"></a>Интеграция Azure Active Directory и Многофакторная идентификация 

Управляемый экземпляр позволяет централизованно управлять удостоверениями пользователя базы данных и другими службами Майкрософт с помощью [интеграции Azure Active Directory](sql-database-aad-authentication.md). Эта возможность упростила управление разрешениями и повысила уровень безопасности. Azure Active Directory поддерживает [Многофакторную идентификацию](sql-database-ssms-mfa-authentication-configure.md) (MFA) для повышения безопасности данных и приложений, поддерживая процесс единого входа. 

### <a name="authentication"></a>Authentication 
В процессе проверки подлинности Управляемого экземпляра пользователям предлагается подтвердить их личность при подключении к базе данных. База данных SQL поддерживает два типа аутентификации:  

- Проверка подлинности SQL с использованием имени пользователя и пароля.
- Проверка подлинности Azure Active Directory с использованием удостоверений, контролируемых Azure Active Directory, которая поддерживается управляемыми и интегрированными доменами. 

### <a name="authorization"></a>Авторизация

Процесс проверки подлинности включает в себя набор действий, которые пользователь может выполнять в базе данных SQL Azure. Этот набор действий определяется принадлежностью учетной записи пользователя к ролям базы данных и разрешениями на уровне объектов. Управляемый экземпляр имеет такие же возможности авторизации, что и SQL Server 2017. 

## <a name="database-migration"></a>Перенос баз данных 

Управляемый экземпляр предназначен для пользовательских сценариев, требующих массового переноса баз данных из реализаций локальной базы данных или базы данных IaaS. Управляемый экземпляр поддерживает несколько вариантов переноса базы данных. 

### <a name="backup-and-restore"></a>Архивация и восстановление  

При перемещении используются резервные копии SQL, сохраненные в хранилище BLOB-объектов Azure. Резервные копии, хранимые в хранилище BLOB-объектов Azure, можно восстановить непосредственно в Управляемый экземпляр с помощью [команды T-SQL RESTORE](https://docs.microsoft.com/sql/t-sql/statements/restore-statements-transact-sql?view=azuresqldb-mi-current). 
  - Краткое руководство по восстановлению стандартного файла резервной копии базы данных Wide World Importers см. в статье [Restore a database backup to an Azure SQL Database Managed Instance](sql-database-managed-instance-get-started-restore.md) (Восстановление резервной копии базы данных в Управляемом экземпляре Базы данных SQL Azure). В этом кратком руководстве показано, как передать файл резервной копии в хранилище BLOB-объектов Azure и обеспечить его защиту, используя ключ подписанного URL-адреса (SAS).
  - Сведения о восстановлении из URL-адреса см. в разделе [Исходное восстановление из URL-адреса](sql-database-managed-instance-migrate.md#native-restore-from-url).

> [!IMPORTANT]
> Резервные копии из Управляемого экземпляра можно восстановить только в другом Управляемом экземпляре. Их нельзя восстановить на локальный сервер SQL Server, в отдельную базу данных или базу данных в составе пула на логическом сервере Базы данных SQL Azure.

### <a name="data-migration-service"></a>Служба миграции данных

Azure Database Migration Service — это полностью управляемая служба, которая выполняет непрерывную миграцию из множества источников баз данных на платформы данных Azure с минимальным временем простоя. Эта служба упрощает выполнение задач, необходимых для перемещения имеющихся сторонних баз данных и баз данных SQL Server в Azure. Варианты развертывания в общедоступной предварительной версии включают в себя базу данных Azure SQL, управляемый экземпляр и SQL Server в виртуальной машине Azure. Дополнительные сведения см. статье [Migrate SQL Server to Azure SQL Database Managed Instance](https://aka.ms/migratetoMIusingDMS) (Перенос SQL Server в Управляемый экземпляр Базы данных SQL Azure).

## <a name="sql-features-supported"></a>Поддерживаемые функции SQL 

До выхода общедоступной версии службы управляемый экземпляр будет предоставлять совместимость с локальным SQL Server на уровне практически 100 %. Эта совместимость будет реализовываться поэтапно. Список отличий T-SQL между Управляемыми экземплярами и SQL Server см. в [этой](sql-database-managed-instance-transact-sql-information.md) статье, а сравнение функций Базы данных SQL Azure и SQL Server доступно в [этой](sql-database-features.md) статье.
 
Управляемый экземпляр поддерживает обратную совместимость с базами данных SQL 2008. Поддерживается прямой перенос из серверов баз данных SQL 2005. Уровень совместимости для перенесенных баз данных SQL 2005 обновлен до версии SQL 2008. 
 
На следующей схеме показана совместимость в управляемом экземпляре.  

![Миграция](./media/sql-database-managed-instance/migration.png) 

### <a name="key-differences-between-sql-server-on-premises-and-managed-instance"></a>Основные различия между локальным SQL Server и управляемым экземпляром 

Управляемый экземпляр всегда обновлен в облаке. Это означает, что некоторые компоненты локального SQL Server могут быть устаревшими, снятыми с учета или же вместо них можно использовать альтернативные варианты. В конкретных случаях инструменты должны определять, что определенный компонент работает несколько иначе или что служба работает в среде, которую вы не полностью контролируете. 

- Встроенный и предварительно настроенный высокий уровень доступности. Функции обеспечения высокого уровня доступности AlwaysOn предоставляются не так, как в реализациях SQL IaaS. 
- Автоматическое резервное копирование и восстановление состояния системы до определенной точки во времени. Клиент может инициировать резервные копирования `copy-only`, которые не препятствуют работе автоматической цепочки резервных копий. 
- Управляемый экземпляр не позволяет указывать полные физические пути, поэтому все соответствующие сценарии должны поддерживаться по-разному (например, сценарий RESTORE DB не поддерживает WITH MOVE, с CREATE DB нельзя применять физические пути, BULK INSERT работает только с большими двоичными объектами Azure и т. д.). 
- Управляемый экземпляр поддерживает [проверку подлинности Azure AD](sql-database-aad-authentication.md) в качестве облачной альтернативы проверке подлинности Windows. 
- Управляемый экземпляр автоматически управляет файловыми группами и файлами с механизмом XTP для баз данных, содержащих объекты выполняющейся в памяти OLTP.
- Управляемый экземпляр поддерживает службы SQL Server Integration Services (SSIS). Он может размещать каталог SSIS (SSISDB), в котором хранятся пакеты SSIS, но эти пакеты выполняются в управляемой среде Azure SSIS Integration Runtime (IR) в службе "Фабрика данных Azure" (ADF) (см. руководство по [созданию Azure SSIS IR в ADF](https://docs.microsoft.com/azure/data-factory/create-azure-ssis-integration-runtime)). Сравнение компонентов SSIS в Базе данных SQL и Управляемом экземпляре см. в [этом разделе](../data-factory/create-azure-ssis-integration-runtime.md#compare-sql-database-logical-server-and-sql-database-managed-instance).

### <a name="managed-instance-administration-features"></a>Возможности администрирования управляемого экземпляра  

Управляемый экземпляр позволяет системному администратору сосредоточиться на действительно важных аспектах бизнеса. Многие действия системного администратора или администратора базы данных являются необязательными или простыми. Например, установка или исправление ОС и реляционной СУБД, динамическое изменение размера и конфигурация экземпляра, резервное копирование, [репликация базы данных](replication-with-sql-database-managed-instance.md) (включая системные базы данных), конфигурация высокого уровня доступности, конфигурация работоспособности и наблюдения за производительностью потоков данных. 

> [!IMPORTANT]
> Список поддерживаемых, частично поддерживаемых и неподдерживаемых функций см. в статье [Сравнение функций Базы данных SQL Azure и SQL Server](sql-database-features.md). Список отличий T-SQL между управляемыми экземплярами и SQL Server см. в [этой](sql-database-managed-instance-transact-sql-information.md) статье.

### <a name="how-to-programmatically-identify-a-managed-instance"></a>Программное определение управляемого экземпляра

В таблице ниже приведены некоторые свойства, доступные в Transact SQL, которые можно использовать, чтобы определить, работает ли приложение с Управляемым экземпляром, а также узнать важные свойства.

|Свойство|Значение|Комментарий|
|---|---|---|
|`@@VERSION`|Microsoft SQL Azure (RTM) - 12.0.2000.8 2018-03-07 Copyright (C) 2018 Microsoft Corporation.|Это значение совпадает со значением в базе данных SQL.|
|`SERVERPROPERTY ('Edition')`|SQL Azure|Это значение совпадает со значением в базе данных SQL.|
|`SERVERPROPERTY('EngineEdition')`|8|Данное значение уникально идентифицирует управляемый экземпляр.|
|`@@SERVERNAME`, `SERVERPROPERTY ('ServerName')`|Полное DNS-имя экземпляра в формате <instanceName>.<dnsPrefix>database.windows.net, где <instanceName> — имя, предоставленное клиентом, а <dnsPrefix> — автоматически формируемая часть имени, гарантируемая уникальность глобального DNS-имени (например, "wcus17662feb9ce98").|Пример: my-managed-instance.wcus17662feb9ce98.database.windows.net|

## <a name="next-steps"></a>Дополнительная информация

- Сведения о создании первого Управляемого экземпляра см. в [этом руководстве по началу работы](sql-database-managed-instance-get-started.md).
- Сведения о функциях и список сравнения см. в статье [Сравнение функций Базы данных SQL Azure и SQL Server](sql-database-features.md).
- Дополнительные сведения о настройке виртуальной сети для управляемого экземпляра базы данных SQL Azure см. в [этой статье](sql-database-managed-instance-vnet-configuration.md).
- Сведения о создании Управляемого экземпляра и восстановлении базы данных из файла резервной копии см. в статье [Создание Управляемого экземпляра SQL Azure](sql-database-managed-instance-get-started.md).
- Сведения об использовании Azure Database Migration Service (DMS) для миграции см. в статье о [миграции SQL Server в управляемый экземпляр базы данных SQL Azure](../dms/tutorial-sql-server-to-managed-instance.md).
- Информацию о ценах см. в разделе [Цены на управляемый экземпляр Базы данных SQL Azure](https://azure.microsoft.com/pricing/details/sql-database/managed/).
