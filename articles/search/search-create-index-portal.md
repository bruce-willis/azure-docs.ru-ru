---
title: Создание индекса для Поиска Azure на портале Azure | Документация Майкрософт
description: Сведения о создании индекса для Поиска Azure с помощью встроенного портала конструкторов индекса.
manager: cgronlun
author: heidisteen
services: search
ms.service: search
ms.devlang: NA
ms.topic: conceptual
ms.date: 07/10/2018
ms.author: heidist
ms.openlocfilehash: bb1ba5e860dab237b3f6e16205b5e4cbad45e6e3
ms.sourcegitcommit: df50934d52b0b227d7d796e2522f1fd7c6393478
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/12/2018
ms.locfileid: "38990852"
---
# <a name="how-to-create-an-azure-search-index-using-the-azure-portal"></a>Создание индекса для Поиска Azure с помощью портала Azure

Поиск Azure предлагает на портале встроенный конструктор индексов, который очень удобен для создания прототипов или [поисковых индексов](search-what-is-an-index.md) в службе Поиска Azure. Этот инструмент позволяет создавать схемы. Когда вы сохраните определение, в Поиске Azure полностью выражается пустой индекс. Вы можете заполнять его для поиска любыми методами на свое усмотрение.

Конструктор индексов — это лишь один из возможных способов создания индекса. Вы можете выполнить эти задачу программным способом через API [.NET](search-create-index-dotnet.md) или API [REST](search-create-index-rest-api.md).

## <a name="prerequisites"></a>Предварительные требования

В этой статье предполагается наличие [подписки Azure](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A261C142F) и [службы поиска Azure](search-create-service-portal.md).

## <a name="open-index-designer-and-name-an-index"></a>Откройте конструктор индексов и присвойте индексу имя

1. Войдите на [портал Azure](https://portal.azure.com) и откройте панель мониторинга службы. Щелкните **Все службы** на панели переходов, чтобы найти существующие службы поиска в текущей подписке. 

2.  На панели команд в верхней части страницы нажмите кнопку **Добавить индекс**.

3. Укажите имя для индекса службы поиска Azure. Имена индексов указываются в операциях индексирования и выполнения запросов. Имя индекса становится частью URL-адреса конечной точки, используемого для подключений к индексу и отправки HTTP-запросов в REST API службы поиска Azure.

   * Оно должно начинаться с буквы.
   * Используйте только строчные буквы, цифры или дефисы ("-").
   * Ограничьте имя 60 символами.

## <a name="define-the-fields-of-your-index"></a>Определение полей индекса

Структура индекса включает *коллекцию полей*, которая определяет данные, доступные для поиска в индексе. Коллекция полей задает структуру документов, которые передаются отдельно. Коллекция полей включает обязательные и необязательные поля с указанием имен и типов, а также атрибутов индекса, которые описывают возможное использование каждого поля.

1. В колонке **Добавление индекса** щелкните **Fields >** (Поля >), чтобы открыть колонку определения полей. 

2. Примите созданное *ключевое* поле типа Edm.String. По умолчанию поле называется *id*, но вы можете переименовать его. При этом строка должна соответствовать [правилам именования](https://docs.microsoft.com/rest/api/searchservice/Naming-rules). Ключевое поле является обязательным для всех индексов Поиска Azure и должно быть строковым.

3. Добавьте поля, чтобы полностью определить документы, которые будут отправлены. Если документ состоит из полей *id*, *hotel name*, *address*, *city* и *region*, создайте в индексе соответствующие поля для каждого из них. Просмотрите раздел [Руководство по проектированию для настройки атрибутов](#design) ниже.

4. При необходимости добавьте все поля, которые используются внутренне в выражениях фильтра. Атрибуты в поле можно задать, чтобы исключить поля из операций поиска.

5. По завершении щелкните **ОК**, чтобы сохранить настройки и создать индекс.

## <a name="tips-for-adding-fields"></a>Советы по добавлению полей

Создание индекса на портале — трудоемкий процесс. Сведите действия к минимуму, следуя этому рабочему процессу:

1. Сначала создайте список полей, введя имена и указав типы данных.

2. Затем используйте флажки в верхней части каждого атрибута, чтобы массово подключить параметр для всех полей, и выборочно снимите флажки тех нескольких полей, где они не требуются. Например, строковые поля обычно доступны для поиска. Таким образом можно щелкнуть **Доступный для получения** и **Доступный для поиска** для возвращения значений поля в результатах поиска, а также для разрешения полнотекстового поиска по полю. 

<a name="design"></a>

## <a name="design-guidance-for-setting-attributes"></a>Руководство по проектированию для настройки атрибутов

Несмотря на то что вы в любой момент можете добавить новые поля, имеющиеся определения полей блокируются на время существования индекса. По этой причине разработчики обычно используют портал для создания простых индексов, тестирования идей или используют страницы портала для поиска параметра. Частая итерация по структуре индекса более эффективна, если следовать подходу на основе кода для легкой перестройки индекса.

Анализаторы и средства подбора связываются с полями перед сохранением индекса. Не забудьте щелкнуть каждую вкладку, чтобы добавить анализаторы языка или средств подбора в определение индекса.

Строковые поля часто помечены как **Доступный для поиска** и **Доступный для получения**.

Для сужения результатов поиска используются такие поля: **Сортируемый**, **Фильтруемый** и **Аспектируемый**.

Атрибуты поля определяют, как используется поле, например, используется ли полнотекстовый поиск, фасетная навигация, операции сортировки и т д. В следующей таблице описывается каждый атрибут.

|Атрибут|ОПИСАНИЕ|  
|---------------|-----------------|  
|**Доступный для поиска**|Полнотекстовый поиск, подлежащий лексическому анализу, такому как разбиения на слова во время индексации. Если, например, задать для поля, поддерживающего поиск, значение sunny day (солнечный день), оно будет разделено на элементы sunny и day. Дополнительные сведения см. в статье [Как работает полнотекстовый поиск в службе поиска Azure](search-lucene-query-architecture.md).|  
|**Фильтруемый**|Указывается в запросах **$filter**. Для фильтруемых полей типа `Edm.String` и `Collection(Edm.String)` не выполняется разбиение на слова, поэтому они могут попасть в результаты поиска только по точному совпадению. Например, если для такого поля задать значение sunny day, запрос `$filter=f eq 'sunny'` не вернет совпадений, а запрос — `$filter=f eq 'sunny day'` вернет. |  
|**Сортируемый**|По умолчанию система сортирует результаты по их оценке, однако можно настроить сортировку на основе полей в документах. Поля типа `Collection(Edm.String)` не могут быть **сортируемыми**. |  
|**Аспектируемый**|Обычно используется в представлении результатов поиска, включающих количество обращений по категориям (например, отелей в определенном городе). Этот параметр не предназначен для использования с полями типа `Edm.GeographyPoint`. Поля типа `Edm.String`, которые имеют атрибуты **фильтруемый**, **сортируемый** или **аспектируемый**, могут быть длинной до 32 КБ. Дополнительные сведения см. в статье [Create Index (Azure Search Service REST API)](https://docs.microsoft.com/rest/api/searchservice/create-index) (Создание индекса в REST API службы Поиска Azure).|  
|**key**|Уникальный идентификатор для документов в индексе. Только одно поле должно быть выбрано ключевым и оно должно иметь тип `Edm.String`.|  
|**Доступный для получения**|Определяет, включается ли поле в возвращаемые поиском результаты. Этот атрибут полезен, когда поле (например, *показатель прибыльности*) нужно использовать для фильтрации, сортировки или оценки, но оно не должно отображаться конечному пользователю. У полей с установленным свойством `true` for `key` .|  

## <a name="create-the-hotels-index-used-in-example-api-sections"></a>Создание индекса отелей, используемого в примерах разделов API

Документация по API службы поиска Azure включает примеры кода, содержащие простой индекс *hotels*. На снимке экрана ниже можно увидеть определение индекса, включая анализатор французского языка, указанный во время определения индекса, который можно повторно создать на портале в качестве упражнения.

![](./media/search-create-index-portal/field-definitions.png)

![](./media/search-create-index-portal/set-analyzer.png)

## <a name="next-steps"></a>Дополнительная информация

После создания индекса службы поиска Azure можно перейти к следующему шагу: [отправке доступных для поиска данных в индекс](search-what-is-data-import.md).

Кроме того, можно подробнее рассмотреть индексы. В дополнение к коллекции полей, индекс указывает анализаторы, средства подбора, профили оценки и параметры CORS. На портале есть вкладки для определения наиболее распространенных элементов: полей, анализаторов и средств подбора. Для создания или изменения других элементов можно использовать REST API или пакет SDK для .NET.

## <a name="see-also"></a>См. также

 [Принцип работы полнотекстового поиска](search-lucene-query-architecture.md)  
 [REST API службы поиска](https://docs.microsoft.com/rest/api/searchservice/) [Пакет SDK для .NET](https://docs.microsoft.com/dotnet/api/overview/azure/search?view=azure-dotnet)

